<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yuki Sugawara | 菅原裕輝</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Inter:wght@200;300;400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0c0c0c;
      --bg2: #141414;
      --line: #272727;
      --text: #d8d8d0;
      --muted: #6a6a62;
      --accent: #c8a96e;
      --white: #f0f0ea;
      --font-sans: 'Inter', 'Noto Sans JP', sans-serif;
    }

    html { scroll-behavior: smooth; scroll-padding-top: 64px; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-sans);
      font-weight: 300;
      line-height: 1.8;
      font-size: 15px;
      letter-spacing: 0.02em;
    }

    /* ── NAVIGATION BAR ── */
    .nav-bar {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      background: rgba(12,12,12,0.0);
      backdrop-filter: blur(0px);
      border-bottom: 1px solid transparent;
      transition: background 0.4s, backdrop-filter 0.4s, border-color 0.4s;
    }
    .nav-bar.scrolled {
      background: rgba(12,12,12,0.88);
      backdrop-filter: blur(16px);
      border-bottom-color: var(--line);
    }
    .nav-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 48px;
      height: 56px;
    }
    .nav-logo {
      text-decoration: none;
      flex-shrink: 0;
      transition: opacity 0.3s;
      display: flex;
      align-items: center;
    }
    .nav-logo:hover { opacity: 0.7; }
    .nav-logo-img {
      height: 22px;
      width: auto;
      display: block;
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .nav-link {
      position: relative;
      text-decoration: none;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--muted);
      padding: 6px 11px;
      border-radius: 2px;
      transition: color 0.25s, background 0.25s;
    }
    .nav-link:hover {
      color: var(--text);
      background: rgba(255,255,255,0.04);
    }
    .nav-link.active {
      color: var(--accent);
    }
    .nav-link.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 16px;
      height: 1px;
      background: var(--accent);
    }
    .nav-link-label { display: none; }
    body.lang-ja .nav-link-label[data-lang="ja"] { display: inline; }
    body.lang-en .nav-link-label[data-lang="en"] { display: inline; }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }
    .lang-toggle {
      display: flex;
      gap: 0;
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow: hidden;
    }
    .lang-toggle button {
      background: transparent;
      border: none;
      color: var(--muted);
      font-family: var(--font-sans);
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 6px 12px;
      cursor: pointer;
      transition: all 0.25s;
    }
    .lang-toggle button.active {
      background: var(--accent);
      color: var(--bg);
      font-weight: 500;
    }
    .lang-toggle button:hover:not(.active) { color: var(--text); }
    .nav-progress {
      height: 1px;
      width: 0%;
      background: var(--accent);
      transition: width 0.1s linear;
    }
    /* hamburger (mobile) */
    .nav-hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      gap: 5px;
      width: 32px;
      height: 32px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
    }
    .nav-hamburger span {
      display: block;
      width: 100%;
      height: 1px;
      background: var(--text);
      transition: transform 0.3s, opacity 0.3s;
    }
    .nav-hamburger.open span:nth-child(1) { transform: translateY(6px) rotate(45deg); }
    .nav-hamburger.open span:nth-child(2) { opacity: 0; }
    .nav-hamburger.open span:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

    /* ── HERO ── */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 0 48px 80px;
      position: relative;
      border-bottom: 1px solid var(--line);
    }
    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 640px;
    }
    .hero-label {
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 28px;
    }
    .hero-name {
      font-size: clamp(42px, 6vw, 72px);
      font-weight: 200;
      letter-spacing: -0.01em;
      line-height: 1.05;
      color: var(--white);
      margin-bottom: 6px;
    }
    .hero-name-sub {
      font-size: clamp(20px, 2.5vw, 30px);
      font-weight: 200;
      color: var(--muted);
      letter-spacing: 0.08em;
      margin-bottom: 36px;
    }
    .hero-affil {
      font-size: 13px;
      color: var(--text);
      line-height: 1.7;
      border-left: 2px solid var(--accent);
      padding-left: 16px;
      margin-bottom: 40px;
    }
    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .hero-tag {
      font-size: 10px;
      letter-spacing: 0.1em;
      color: var(--muted);
      border: 1px solid var(--line);
      padding: 5px 12px;
      border-radius: 1px;
      transition: border-color 0.2s, color 0.2s;
    }
    .hero-tag:hover { border-color: var(--accent); color: var(--accent); }
    .hero-tag[data-tag="Digital STS"]                  { color: #4dc4a8; border-color: rgba(77, 196, 168, 0.35); }
    .hero-tag[data-tag="Digital Philosophy of Science"] { color: #8e7fd4; border-color: rgba(142, 127, 212, 0.35); }
    .hero-tag[data-tag="Digital Anthropology"]          { color: #c8a96e; border-color: rgba(200, 169, 110, 0.35); }

    /* ── SECTIONS ── */
    section {
      padding: 90px 48px;
      border-bottom: 1px solid var(--line);
      max-width: 1100px;
      margin: 0 auto;
    }
    .section-full {
      max-width: none;
      padding-left: 0; padding-right: 0;
    }
    .section-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 48px;
    }

    .sec-label {
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 48px;
    }
    .sec-title {
      font-size: clamp(26px, 3vw, 38px);
      font-weight: 200;
      color: var(--white);
      line-height: 1.2;
      margin-bottom: 8px;
    }
    .sec-title-jp {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 48px;
    }

    /* ── MVV ── */
    .mvv-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      background: var(--line);
      border: 1px solid var(--line);
      align-items: start;
    }
    .mvv-card {
      background: var(--bg);
      padding: 48px 40px;
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease, opacity 0.4s ease;
    }
    /* top accent line trace */
    .mvv-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 0; height: 1px;
      background: var(--accent);
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .mvv-card:hover::before { width: 100%; }
    /* corner radial glow */
    .mvv-card::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, rgba(200,169,110,0.10) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .mvv-card:hover::after { transform: scale(1); }
    .mvv-card > * { position: relative; z-index: 1; }
    .mvv-card:hover { background: var(--bg2); }
    /* sibling dimming — nearly invisible */
    .mvv-grid:has(.mvv-card:hover) .mvv-card:not(:hover) { opacity: 0.06; }
    .mvv-card { cursor: default; }
    .mvv-card-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 12px;
      transition: letter-spacing 0.4s ease;
    }
    .mvv-card:hover .mvv-card-label { letter-spacing: 0.28em; }
    .mvv-card-title {
      font-size: 22px;
      font-weight: 300;
      color: var(--white);
      margin-bottom: 0;
      line-height: 1.3;
    }
    .mvv-card-body {
      font-size: 14px;
      color: var(--text);
      line-height: 1.9;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(18px);
      transition: max-height 1.2s cubic-bezier(0.16, 1, 0.3, 1),
                  opacity 0.9s ease 0.15s,
                  transform 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.15s;
    }
    .mvv-card:hover .mvv-card-body {
      max-height: 600px;
      opacity: 1;
      transform: translateY(0);
      margin-top: 24px;
    }
    /* values list items slide on hover */
    .mvv-card-body li {
      transition: transform 0.25s ease, opacity 0.3s ease;
      cursor: default;
    }
    .mvv-card-body li:hover { transform: translateX(6px); }
    /* hint line below title — fades out on hover as content reveals */
    .mvv-card-title::after {
      content: '';
      display: block;
      width: 20px;
      height: 1px;
      background: var(--accent);
      margin-top: 20px;
      opacity: 0.45;
      transition: opacity 0.35s ease, width 0.35s ease;
    }
    .mvv-card:hover .mvv-card-title::after { opacity: 0; width: 0; }

    /* ── VALUES LIST ── */
    .values-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 0;
      border: 1px solid var(--line);
    }
    .values-item {
      display: grid;
      grid-template-columns: 72px 1fr;
      align-items: start;
      border-bottom: 1px solid var(--line);
      padding: 36px 40px;
      gap: 32px;
      transition: background 0.25s;
    }
    .values-item:last-child { border-bottom: none; }
    .values-item:hover { background: var(--bg2); }
    .values-num {
      font-size: 32px;
      font-weight: 200;
      color: var(--line);
      line-height: 1;
      padding-top: 4px;
    }
    .values-item:hover .values-num { color: var(--accent); }
    .values-text-title {
      font-size: 16px;
      font-weight: 400;
      color: var(--white);
      margin-bottom: 10px;
    }
    .values-text-body {
      font-size: 14px;
      color: var(--text);
      line-height: 1.9;
    }

    /* ── VALUES INLINE DETAIL (appears below each li on hover) ── */
    .vhd-inline {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.85;
      margin-top: 0;
      padding-top: 0;
      border-top: 1px solid transparent;
      transition: max-height 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                  opacity 0.4s ease,
                  margin-top 0.3s ease,
                  padding-top 0.3s ease,
                  border-top-color 0.3s ease;
    }
    .mvv-card-body li:hover > .vhd-inline {
      max-height: 200px;
      opacity: 1;
      margin-top: 12px;
      padding-top: 12px;
      border-top-color: var(--line);
    }
    /* dim sibling li items when one is hovered */
    .mvv-card-body ol:has(li:hover) li:not(:hover) {
      opacity: 0.3;
    }

    /* ── MVV STACK (vertical redesign) ── */
    .mvv-stack {
      display: flex;
      flex-direction: column;
      gap: 0;
      border: 1px solid var(--line);
    }
    .mvv-block {
      padding: 48px 52px;
      border-bottom: 1px solid var(--line);
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease;
      cursor: default;
    }
    .mvv-block:last-child { border-bottom: none; }
    /* left accent line — grows on hover */
    .mvv-block::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 3px; height: 0;
      background: var(--mvv-color);
      transition: height 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .mvv-block:hover::before { height: 100%; }
    .mvv-block:hover { background: var(--bg2); }
    .mvv-block-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
    }
    .mvv-block-icon {
      width: 48px; height: 48px;
      flex-shrink: 0;
      stroke: var(--mvv-color);
      fill: none;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    .mvv-block-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--mvv-color);
      margin-bottom: 6px;
      transition: letter-spacing 0.4s ease;
    }
    .mvv-block:hover .mvv-block-label { letter-spacing: 0.28em; }
    .mvv-block-title {
      font-size: 20px;
      font-weight: 300;
      color: var(--white);
      line-height: 1.3;
    }
    .mvv-block-body {
      font-size: 14px;
      color: var(--text);
      line-height: 1.9;
      margin-top: 16px;
    }
    .mvv-block-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 16px;
    }
    .mvv-block-tag {
      font-size: 9px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--mvv-color);
      border: 1px solid var(--mvv-color);
      padding: 2px 10px;
      border-radius: 2px;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }
    .mvv-block:hover .mvv-block-tag { opacity: 1; }
    /* values list inside Values block */
    .mvv-values-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 16px;
      padding: 0;
    }
    .mvv-values-item {
      display: grid;
      grid-template-columns: 40px 1fr;
      align-items: start;
      gap: 16px;
      transition: transform 0.25s ease;
      cursor: default;
    }
    .mvv-values-item:hover { transform: translateX(4px); }
    .mvv-values-num {
      font-size: 28px;
      font-weight: 200;
      color: var(--mvv-color);
      line-height: 1;
      opacity: 0.6;
    }
    .mvv-values-item:hover .mvv-values-num { opacity: 1; }
    .mvv-values-item-title {
      font-size: 15px;
      font-weight: 400;
      color: var(--white);
      margin-bottom: 6px;
    }
    .mvv-values-item-body {
      font-size: 13px;
      color: var(--text);
      line-height: 1.8;
      opacity: 0.75;
    }

    /* responsive */
    @media (max-width: 768px) {
      .mvv-block { padding: 36px 28px; }
      .mvv-block-icon { width: 36px; height: 36px; }
      .mvv-block-header { gap: 14px; margin-bottom: 18px; }
      .mvv-block-title { font-size: 18px; }
      .mvv-values-item { grid-template-columns: 32px 1fr; gap: 12px; }
      .mvv-values-num { font-size: 24px; }
    }
    @media (max-width: 560px) {
      .mvv-block { padding: 28px 20px; }
      .mvv-block-icon { width: 30px; height: 30px; }
      .mvv-block-header { gap: 10px; margin-bottom: 14px; }
      .mvv-block-title { font-size: 16px; }
      .mvv-block-body { font-size: 13px; }
      .mvv-block-tag { font-size: 8px; padding: 2px 8px; }
    }

    /* ── STRENGTHS ── */
    .strengths-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px;
      background: var(--line);
      border: 1px solid var(--line);
    }
    .strengths-card {
      background: var(--bg);
      padding: 52px 48px;
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease, opacity 0.4s ease;
    }
    /* top accent line trace */
    .strengths-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 0; height: 1px;
      background: var(--accent);
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .strengths-card:hover::before { width: 100%; }
    /* corner radial glow */
    .strengths-card::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, rgba(200,169,110,0.10) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .strengths-card:hover::after { transform: scale(1); }
    .strengths-card:hover { background: var(--bg2); }
    .strengths-card > * { position: relative; z-index: 1; }
    /* sibling dimming */
    .strengths-grid:has(.strengths-card:hover) .strengths-card:not(:hover) { opacity: 0.06; }
    .strengths-card-icon {
      width: 36px;
      height: 36px;
      margin-bottom: 28px;
      color: var(--muted);
      transition: color 0.4s ease, transform 0.4s ease;
    }
    .strengths-card:hover .strengths-card-icon { color: var(--accent); transform: translateY(-2px); }
    .strengths-card-icon svg { width: 100%; height: 100%; }
    /* skill tags inside strengths card */
    .str-skills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 20px;
    }
    .str-skill {
      display: inline-flex;
      align-items: center;
      gap: 7px;
      font-size: 11px;
      color: var(--muted);
      padding: 7px 14px;
      border: 1px solid var(--line);
      border-radius: 1px;
      transition: border-color 0.3s ease, color 0.3s ease;
      letter-spacing: 0.02em;
    }
    .strengths-card:hover .str-skill {
      border-color: rgba(200,169,110,0.35);
      color: var(--text);
    }
    .str-skill-icon {
      width: 13px;
      height: 13px;
      flex-shrink: 0;
      opacity: 0.6;
      transition: opacity 0.3s ease;
    }
    .strengths-card:hover .str-skill-icon { opacity: 1; }
    .str-skill-icon svg { width: 100%; height: 100%; }
    /* working style structured sections */
    .str-section {
      margin-top: 20px;
    }
    .str-section:first-child { margin-top: 0; }
    .str-section-label {
      font-size: 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      margin-bottom: 10px;
    }
    .str-section-label.str-plus { color: var(--accent); }
    .str-section-label.str-delta { color: var(--muted); }
    .str-section-body {
      font-size: 13px;
      color: var(--text);
      line-height: 1.95;
    }
    .str-divider {
      width: 24px;
      height: 1px;
      background: var(--line);
      margin: 20px 0;
    }
    .strengths-card-title {
      font-size: 18px;
      font-weight: 400;
      color: var(--white);
      margin-bottom: 0;
      line-height: 1.4;
      transition: letter-spacing 0.4s ease;
    }
    .strengths-card:hover .strengths-card-title { letter-spacing: 0.01em; }
    /* hint line */
    .strengths-card-title::after {
      content: '';
      display: block;
      width: 20px;
      height: 1px;
      background: var(--accent);
      margin-top: 18px;
      opacity: 0.45;
      transition: opacity 0.35s ease, width 0.35s ease;
    }
    .strengths-card:hover .strengths-card-title::after { opacity: 0; width: 0; }
    .strengths-card-body {
      font-size: 14px;
      color: var(--text);
      line-height: 1.95;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(18px);
      transition: max-height 1.2s cubic-bezier(0.16, 1, 0.3, 1),
                  opacity 0.9s ease 0.15s,
                  transform 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.15s;
    }
    .strengths-card:hover .strengths-card-body {
      max-height: 600px;
      opacity: 1;
      transform: translateY(0);
      margin-top: 24px;
    }

    /* ── STRENGTHS v2 (vertical stack) ── */
    .str-stack {
      display: flex;
      flex-direction: column;
      gap: 0;
      border: 1px solid var(--line);
      margin-top: 56px;
    }
    .str-block {
      padding: 48px 52px;
      border-bottom: 1px solid var(--line);
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease;
      cursor: default;
    }
    .str-block:last-child { border-bottom: none; }
    /* left accent line — grows on hover */
    .str-block::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 3px; height: 0;
      background: var(--str-color);
      transition: height 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .str-block:hover::before { height: 100%; }
    .str-block:hover { background: var(--bg2); }
    .str-block-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
    }
    .str-block-icon {
      width: 48px; height: 48px;
      flex-shrink: 0;
      stroke: var(--str-color);
      fill: none;
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
      transition: transform 0.4s ease;
    }
    .str-block:hover .str-block-icon { transform: translateY(-2px); }
    .str-block-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--str-color);
      margin-bottom: 6px;
      transition: letter-spacing 0.4s ease;
    }
    .str-block:hover .str-block-label { letter-spacing: 0.28em; }
    .str-block-title {
      font-size: 20px;
      font-weight: 300;
      color: var(--white);
      line-height: 1.3;
    }
    .str-block-body {
      font-size: 14px;
      color: var(--text);
      line-height: 1.9;
      margin-top: 16px;
    }
    .str-block-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 20px;
    }
    .str-block-tag {
      display: inline-flex;
      align-items: center;
      gap: 7px;
      font-size: 11px;
      color: var(--str-color);
      opacity: 0.7;
      padding: 7px 14px;
      border: 1px solid var(--str-color);
      border-radius: 1px;
      transition: opacity 0.3s ease;
      letter-spacing: 0.02em;
    }
    .str-block:hover .str-block-tag { opacity: 1; }
    .str-block-tag-icon {
      width: 13px;
      height: 13px;
      flex-shrink: 0;
      opacity: 0.6;
      transition: opacity 0.3s ease;
    }
    .str-block:hover .str-block-tag-icon { opacity: 1; }
    .str-block-tag-icon svg { width: 100%; height: 100%; }

    /* ── RESEARCH ── */
    .topic-tag {
      font-size: 10px;
      letter-spacing: 0.08em;
      padding: 3px 10px;
      border-radius: 1px;
      display: inline-block;
      border: 1px solid;
    }
    /* Anthropology family — warm earth */
    .topic-tag[data-tag="Anthropology"] {
      color: #c87a5e;
      border-color: rgba(200, 122, 94, 0.35);
    }
    .topic-tag[data-tag="Digital Anthropology"] {
      color: #c8a96e;
      border-color: rgba(200, 169, 110, 0.35);
    }
    /* STS family — teal */
    .topic-tag[data-tag="STS"] {
      color: #6ab08a;
      border-color: rgba(106, 176, 138, 0.35);
    }
    .topic-tag[data-tag="Digital STS"] {
      color: #4dc4a8;
      border-color: rgba(77, 196, 168, 0.35);
    }
    /* Philosophy of Science family — purple */
    .topic-tag[data-tag="Philosophy of Science"] {
      color: #a87cb0;
      border-color: rgba(168, 124, 176, 0.35);
    }
    .topic-tag[data-tag="Digital Philosophy of Science"] {
      color: #8e7fd4;
      border-color: rgba(142, 127, 212, 0.35);
    }
    /* Humanities / Digital Technology family — blue */
    .topic-tag[data-tag="Humanities"] {
      color: #4868a8;
      border-color: rgba(72, 104, 168, 0.35);
    }
    .topic-tag[data-tag="Digital Humanities"] {
      color: #38b0e8;
      border-color: rgba(56, 176, 232, 0.35);
    }
    .topic-tag[data-tag="Digital Technology"] {
      color: #78a8e0;
      border-color: rgba(120, 168, 224, 0.35);
    }
    .topic-tag[data-tag="Technology"] {
      color: #6890c0;
      border-color: rgba(104, 144, 192, 0.35);
    }
    .topic-tag[data-tag="Neuroscience"] {
      color: #e06878;
      border-color: rgba(224, 104, 120, 0.35);
    }
    .topic-tag[data-tag="Research Ethics"] {
      color: #d4a84b;
      border-color: rgba(212, 168, 75, 0.35);
    }

    /* ── RESEARCH NETWORK GRAPH ── */
    .network-wrap {
      position: relative;
      margin-bottom: 48px;
    }
    .network-label {
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 12px;
    }
    .network-hint {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 10px;
      opacity: 0.7;
    }
    #network-container {
      width: 100%;
      height: 700px;
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow: hidden;
      position: relative;
    }
    #network-svg {
      width: 100%;
      height: 100%;
      display: block;
    }
    .node-tag {
      cursor: pointer;
    }
    .node-project {
      cursor: pointer;
    }
    .network-edge {
      stroke: var(--muted);
      stroke-opacity: 0.18;
      stroke-width: 1;
      transition: stroke-opacity 0.2s;
    }
    /* hover dimming */
    #network-svg.has-hover .network-edge { stroke-opacity: 0.04; }
    #network-svg.has-hover .node-tag,
    #network-svg.has-hover .node-project { opacity: 0.15; }
    #network-svg.has-hover .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #network-svg.has-hover .node-tag.node-active,
    #network-svg.has-hover .node-project.node-active { opacity: 1; }
    /* filter mode */
    #network-svg.has-filter .network-edge { stroke-opacity: 0.04; }
    #network-svg.has-filter .node-tag,
    #network-svg.has-filter .node-project { opacity: 0.15; }
    #network-svg.has-filter .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #network-svg.has-filter .node-tag.node-active,
    #network-svg.has-filter .node-project.node-active { opacity: 1; }
    /* tooltip */
    #network-tooltip {
      position: absolute;
      pointer-events: none;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 420px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #network-tooltip.visible { opacity: 1; }
    /* legend */
    #network-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-top: 12px;
      align-items: center;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
      cursor: pointer;
      transition: opacity 0.2s;
      letter-spacing: 0.04em;
    }
    .legend-item:hover { color: var(--text); }
    .legend-item.legend-active { color: var(--text); }
    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    /* project list filter dimming */
    /* project number badge in list */
    .proj-num-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      font-size: 10px;
      font-weight: 500;
      line-height: 1;
      letter-spacing: 0;
      color: var(--bg);
      margin-right: 8px;
      flex-shrink: 0;
      vertical-align: middle;
    }
    .pub-item.net-dimmed {
      opacity: 0.15;
      transition: opacity 0.3s;
    }
    .pub-item.net-highlight {
      transition: opacity 0.3s;
    }
    .pub-item.net-flash {
      background: rgba(200, 169, 110, 0.08);
      transition: background 0.6s;
    }
    .pub-item-book.net-dimmed {
      opacity: 0.15;
      transition: opacity 0.3s;
    }
    .pub-item-book.net-highlight {
      transition: opacity 0.3s;
    }
    .pub-item-book.net-flash {
      background: rgba(200, 169, 110, 0.08);
      transition: background 0.6s;
    }
    /* ── PUB NETWORK ── */
    #pub-network-container {
      width: 100%;
      height: 588px;
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow: hidden;
      position: relative;
    }
    #pub-network-svg {
      width: 100%;
      height: 100%;
      display: block;
    }
    #pub-network-svg.has-hover .network-edge { stroke-opacity: 0.04; }
    #pub-network-svg.has-hover .node-tag,
    #pub-network-svg.has-hover .node-project { opacity: 0.15; }
    #pub-network-svg.has-hover .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #pub-network-svg.has-hover .node-tag.node-active,
    #pub-network-svg.has-hover .node-project.node-active { opacity: 1; }
    #pub-network-svg.has-filter .network-edge { stroke-opacity: 0.04; }
    #pub-network-svg.has-filter .node-tag,
    #pub-network-svg.has-filter .node-project { opacity: 0.15; }
    #pub-network-svg.has-filter .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #pub-network-svg.has-filter .node-tag.node-active,
    #pub-network-svg.has-filter .node-project.node-active { opacity: 1; }
    #pub-network-tooltip {
      position: absolute;
      pointer-events: none;
      transition: opacity 0.15s;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 420px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #pub-network-tooltip.visible { opacity: 1; }
    #pub-network-tooltip.tip-interactive { pointer-events: auto; }
    #pub-network-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 18px;
      margin-top: 12px;
      align-items: center;
    }
    /* ── PUB TIMELINE ── */
    #pub-timeline {
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow-x: auto;
      background: var(--bg);
    }
    #pub-timeline-svg {
      display: block;
      min-width: 600px;
    }
    #pub-timeline-tooltip {
      position: absolute;
      pointer-events: none;
      transition: opacity 0.15s;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 420px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #pub-timeline-tooltip.visible { opacity: 1; }
    #pub-timeline-tooltip.tip-interactive { pointer-events: auto; }

    /* ── PUB CARD LIST ── */
    #pub-card-list {
      margin-top: 48px;
    }
    #pub-card-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 24px;
      align-items: center;
    }
    .pub-filter-btn {
      font-size: 10px;
      letter-spacing: 0.08em;
      padding: 5px 14px;
      border-radius: 1px;
      display: inline-block;
      border: 1px solid var(--line);
      color: var(--muted);
      background: transparent;
      cursor: pointer;
      transition: color 0.3s, border-color 0.3s, background 0.3s;
      font-family: inherit;
    }
    .pub-filter-btn:hover {
      color: var(--text);
      border-color: var(--text);
    }
    .pub-filter-btn.active {
      color: var(--bg);
      border-color: var(--filter-color, var(--accent));
      background: var(--filter-color, var(--accent));
    }
    #pub-card-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    .pub-card {
      position: relative;
      overflow: hidden;
      padding: 28px 28px 24px;
      border: 1px solid var(--line);
      background: var(--bg);
      transition: background 0.4s ease, opacity 0.4s ease;
      cursor: default;
      display: flex;
      flex-direction: column;
    }
    .pub-card[data-link] { cursor: pointer; }
    .pub-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 0; height: 2px;
      background: var(--card-accent, var(--accent));
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .pub-card:hover::before { width: 100%; }
    .pub-card::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, var(--card-glow, rgba(200,169,110,0.08)) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .pub-card:hover::after { transform: scale(1); }
    .pub-card:hover { background: var(--bg2); }
    .pub-card > * { position: relative; z-index: 1; }
    #pub-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 0.06; }
    .pub-card-header {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 10px;
    }
    .pub-card-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      font-size: 10px;
      font-weight: 500;
      line-height: 1;
      color: var(--bg);
      flex-shrink: 0;
      margin-top: 2px;
    }
    .pub-card-title {
      font-size: 14px;
      font-weight: 400;
      color: var(--white);
      line-height: 1.55;
    }
    .pub-card-year {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.06em;
      margin-bottom: 8px;
    }
    .pub-card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }
    .pub-card-tags .topic-tag {
      font-size: 9px;
      padding: 2px 8px;
      cursor: pointer;
    }
    .pub-card-summary {
      font-size: 12px;
      color: var(--text);
      line-height: 1.75;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.8s cubic-bezier(0.16, 1, 0.3, 1),
                  opacity 0.4s ease;
    }
    .pub-card:hover .pub-card-summary {
      max-height: 600px;
      overflow: visible;
      opacity: 1;
    }
    .pub-card-cover {
      width: 48px;
      height: auto;
      border-radius: 2px;
      margin-top: 10px;
      opacity: 0.85;
      transition: opacity 0.3s;
    }
    .pub-card:hover .pub-card-cover { opacity: 1; }
    .pub-card-detail {
      font-size: 11px;
      color: var(--muted);
      line-height: 1.6;
      margin-bottom: 8px;
    }
    body.lang-ja .pub-card-summary[data-lang="ja"],
    body.lang-en .pub-card-summary[data-lang="en"] {
      display: block;
    }
    .pub-card.filtered-out {
      opacity: 0;
      max-height: 0;
      padding-top: 0;
      padding-bottom: 0;
      margin: 0;
      border-width: 0;
      overflow: hidden;
      transition: opacity 0.3s, max-height 0.4s 0.1s, padding 0.4s 0.1s, margin 0.4s 0.1s, border-width 0s 0.4s;
    }

    @media (max-width: 768px) {
      #pub-card-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 560px) {
      .pub-card { padding: 20px 18px 18px; }
      #pub-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 1; }
    }
    @media (pointer: coarse) {
      .pub-card-summary {
        max-height: none;
        overflow: visible;
        opacity: 1;
      }
      #pub-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 1; }
    }

    /* ── PROJ CARD LIST ── */
    #proj-card-list { margin-top: 48px; }
    #proj-card-filters {
      display: flex; flex-wrap: wrap; gap: 8px;
      margin-bottom: 24px; align-items: center;
    }
    #proj-card-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    .pub-card-group {
      display: inline-block;
      font-size: 9px;
      letter-spacing: 0.06em;
      padding: 2px 8px;
      border-radius: 1px;
      border: 1px solid var(--line);
      color: var(--muted);
      margin-left: 6px;
      vertical-align: middle;
    }
    #proj-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 0.06; }
    @media (max-width: 768px) {
      #proj-card-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 560px) {
      #proj-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 1; }
    }
    @media (pointer: coarse) {
      #proj-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity: 1; }
    }

    /* ── CAREER TIMELINE ── */
    .career-static-list { display: none; }
    #career-timeline {
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow-x: auto;
      background: var(--bg);
    }
    #career-timeline-svg {
      display: block;
      min-width: 600px;
    }
    #career-timeline-tooltip {
      position: absolute;
      pointer-events: none;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 380px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #career-timeline-tooltip.visible { opacity: 1; }
    .tl-diamond {
      cursor: pointer;
      transition: filter 0.2s;
    }
    .tl-diamond:hover { filter: brightness(1.5); }

    /* ── CAREER CARD LIST ── */
    #career-card-list { margin-top: 48px; }
    #career-card-filters { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:24px; align-items:center; }
    #career-card-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; }
    #career-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity:0.06; }
    @media (max-width: 768px) {
      #career-card-grid { grid-template-columns:1fr; }
    }
    @media (max-width: 560px) {
      #career-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity:1; }
    }
    @media (pointer: coarse) {
      #career-card-grid:has(.pub-card:hover) .pub-card:not(:hover) { opacity:1; }
    }

    /* ── CAREER NETWORK ── */
    #career-network-container {
      width:100%; height:588px;
      background:var(--bg); border:1px solid var(--line);
      border-radius:2px; overflow:hidden; position:relative;
    }
    #career-network-svg { width:100%; height:100%; display:block; }
    #career-network-svg.has-hover .network-edge { stroke-opacity: 0.04; }
    #career-network-svg.has-hover .node-tag,
    #career-network-svg.has-hover .node-project { opacity: 0.15; }
    #career-network-svg.has-hover .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #career-network-svg.has-hover .node-tag.node-active,
    #career-network-svg.has-hover .node-project.node-active { opacity: 1; }
    #career-network-svg.has-filter .network-edge { stroke-opacity: 0.04; }
    #career-network-svg.has-filter .node-tag,
    #career-network-svg.has-filter .node-project { opacity: 0.15; }
    #career-network-svg.has-filter .network-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #career-network-svg.has-filter .node-tag.node-active,
    #career-network-svg.has-filter .node-project.node-active { opacity: 1; }
    #career-network-tooltip {
      position: absolute;
      pointer-events: none;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 380px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #career-network-tooltip.visible { opacity: 1; }
    #career-network-legend { display:flex; flex-wrap:wrap; gap:10px 18px; margin-top:12px; align-items:center; }

    /* dimming for career-item sync */
    .career-item.net-dimmed { opacity:0.15; transition:opacity 0.3s; }
    .career-item.net-highlight { transition:opacity 0.3s; }

    /* ── PROJECT TIMELINE (GANTT) ── */
    #grant-static-list { display: none; }
    #pub-static-list { display: none; }
    #project-timeline {
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow-x: auto;
      background: var(--bg);
    }
    #timeline-svg {
      display: block;
      min-width: 600px;
    }
    #timeline-tooltip {
      position: absolute;
      pointer-events: none;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 380px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #timeline-tooltip.visible { opacity: 1; }
    /* rich tooltip card inner */
    .tip-head {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }
    .tip-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px; height: 20px;
      border-radius: 50%;
      font-size: 10px;
      font-weight: 500;
      color: var(--bg);
      flex-shrink: 0;
    }
    .tip-year {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.06em;
    }
    .tip-title {
      font-size: 13px;
      font-weight: 400;
      color: var(--white);
      margin-bottom: 6px;
    }
    .tip-tags {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      margin-bottom: 6px;
    }
    .tip-tag {
      font-size: 9px;
      letter-spacing: 0.06em;
      padding: 2px 7px;
      border-radius: 1px;
      border: 1px solid;
      opacity: 0.85;
    }
    .tip-grant {
      font-size: 11px;
      color: var(--muted);
      border-top: 1px solid var(--line);
      padding-top: 5px;
      margin-top: 2px;
    }
    .tip-summary {
      font-size: 11px;
      color: var(--text);
      line-height: 1.7;
      border-top: 1px solid var(--line);
      padding-top: 6px;
      margin-top: 6px;
      opacity: 0.85;
    }
    .tip-book-row {
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }
    .tip-book-cover {
      flex-shrink: 0;
      width: 60px;
    }
    .tip-book-cover img {
      width: 100%;
      border-radius: 3px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.35);
    }
    .tip-book-body {
      flex: 1;
      min-width: 0;
    }
    .tip-pub-link {
      margin-top: 6px;
      padding-top: 5px;
      border-top: 1px solid var(--line);
    }
    .tip-pub-link a {
      font-size: 11px;
      color: var(--accent);
      text-decoration: none;
      opacity: 0.9;
    }
    .tip-pub-link a:hover {
      opacity: 1;
      text-decoration: underline;
    }
    .tip-members {
      font-size: 10px;
      color: var(--muted);
      opacity: 0.7;
      margin-top: 3px;
    }
    /* tag description tooltip */
    .tip-tag-head {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }
    .tip-tag-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .tip-tag-name {
      font-size: 14px;
      font-weight: 400;
      letter-spacing: 0.02em;
    }
    .tip-tag-name-ja {
      font-size: 12px;
      color: var(--muted);
      margin-left: 6px;
    }
    .tip-desc {
      font-size: 11.5px;
      color: var(--text);
      line-height: 1.7;
      opacity: 0.85;
    }
    .tl-bar {
      cursor: pointer;
      transition: filter 0.2s, opacity 0.3s;
    }
    .tl-bar:hover { filter: brightness(1.35); }
    .tl-bar.tl-dimmed { opacity: 0.12; }
    .tl-bar.tl-highlight { opacity: 1; }
    .tl-bar.tl-flash {
      animation: tl-flash-anim 0.9s ease-out;
    }
    @keyframes tl-flash-anim {
      0%   { filter: brightness(2.2); }
      100% { filter: brightness(1); }
    }
    .tl-today-line {
      stroke: var(--accent);
      stroke-width: 1.5;
      stroke-dasharray: 5 4;
      opacity: 0.6;
    }
    .tl-divider {
      stroke: var(--muted);
      stroke-width: 0.8;
      stroke-dasharray: 4 4;
      opacity: 0.45;
    }
    .tl-group-label {
      fill: var(--muted);
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    .tl-bar-num {
      fill: var(--bg);
      font-size: 10px;
      font-weight: 500;
      pointer-events: none;
    }
    .tl-axis text {
      fill: var(--muted);
      font-size: 11px;
    }
    .tl-axis line, .tl-axis path {
      stroke: var(--line);
    }
    .tl-grid line {
      stroke: var(--line);
      stroke-opacity: 0.45;
    }
    @media (max-width: 860px) {
      #timeline-svg { min-width: 500px; }
      #career-timeline-svg { min-width: 500px; }
      #pub-timeline-svg { min-width: 500px; }
    }
    @media (max-width: 560px) {
      #timeline-svg { min-width: 450px; }
      #career-timeline-svg { min-width: 450px; }
      #pub-timeline-svg { min-width: 450px; }
    }

    /* ── RESEARCH OVERVIEW INFOGRAPHIC ── */
    .ro-vision {
      max-width: 760px;
      margin-bottom: 56px;
    }
    .ro-vision-title {
      font-size: 22px;
      font-weight: 400;
      color: var(--white);
      line-height: 1.5;
      margin-bottom: 20px;
    }
    .ro-vision-body {
      font-size: 14px;
      color: var(--text);
      line-height: 2;
    }
    /* 3 pillar cards */
    .ro-pillars {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0;
      border: 1px solid var(--line);
    }
    .ro-pillar {
      position: relative;
      overflow: hidden;
      padding: 44px 36px;
      border-right: 1px solid var(--line);
      background: var(--bg);
      transition: background 0.4s ease, opacity 0.4s ease;
      cursor: default;
      display: flex;
      flex-direction: column;
    }
    .ro-pillar:last-child { border-right: none; }
    /* top accent line — color from CSS var */
    .ro-pillar::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 0; height: 2px;
      background: var(--pillar-color, var(--accent));
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .ro-pillar:hover::before { width: 100%; }
    /* corner glow */
    .ro-pillar::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, var(--pillar-glow, rgba(200,169,110,0.08)) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .ro-pillar:hover::after { transform: scale(1); }
    .ro-pillar:hover { background: var(--bg2); }
    .ro-pillar > * { position: relative; z-index: 1; }
    /* sibling dimming */
    .ro-pillars:has(.ro-pillar:hover) .ro-pillar:not(:hover) { opacity: 0.06; }
    .ro-pillar-num {
      font-size: 11px;
      letter-spacing: 0.18em;
      color: var(--muted);
      margin-bottom: 20px;
    }
    .ro-pillar-tag {
      display: inline-block;
      font-size: 10px;
      letter-spacing: 0.08em;
      padding: 3px 10px;
      border: 1px solid;
      border-radius: 1px;
      margin-bottom: 20px;
      align-self: flex-start;
    }
    .ro-pillar-name {
      font-size: 16px;
      font-weight: 400;
      color: var(--white);
      line-height: 1.5;
      margin-bottom: 0;
    }
    .ro-pillar-name::after {
      content: '';
      display: block;
      width: 20px;
      height: 1px;
      background: var(--accent);
      margin-top: 16px;
      opacity: 0.45;
      transition: opacity 0.35s ease, width 0.35s ease;
    }
    .ro-pillar:hover .ro-pillar-name::after { opacity: 0; width: 0; }
    .ro-pillar-body {
      font-size: 13px;
      color: var(--text);
      line-height: 1.9;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(14px);
      transition: max-height 1s cubic-bezier(0.16, 1, 0.3, 1),
                  opacity 0.7s ease 0.1s,
                  transform 0.7s cubic-bezier(0.16, 1, 0.3, 1) 0.1s;
    }
    .ro-pillar:hover .ro-pillar-body {
      max-height: 400px;
      opacity: 1;
      transform: translateY(0);
      margin-top: 20px;
    }
    /* implementation highlight */
    .ro-impl {
      margin-top: 48px;
      max-width: 760px;
      padding: 36px 40px;
      border-left: 2px solid var(--accent);
      background: rgba(200,169,110,0.03);
    }
    .ro-impl-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 16px;
    }
    .ro-impl-body {
      font-size: 14px;
      color: var(--text);
      line-height: 2;
    }

    /* ── CONCEPT MAP ── */
    #concept-map-container {
      width: 100%;
      height: 640px;
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: 2px;
      overflow: hidden;
      position: relative;
    }
    #concept-map-svg {
      width: 100%;
      height: 100%;
      display: block;
    }
    .cmap-edge {
      stroke: var(--muted);
      stroke-opacity: 0.18;
      stroke-width: 1;
      transition: stroke-opacity 0.2s;
    }
    #concept-map-svg.has-hover .cmap-edge { stroke-opacity: 0.04; }
    #concept-map-svg.has-hover .cmap-node { opacity: 0.15; }
    #concept-map-svg.has-hover .cmap-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #concept-map-svg.has-hover .cmap-node.node-active { opacity: 1; }
    #concept-map-svg.has-filter .cmap-edge { stroke-opacity: 0.04; }
    #concept-map-svg.has-filter .cmap-node { opacity: 0.15; }
    #concept-map-svg.has-filter .cmap-edge.edge-active { stroke-opacity: 0.5; stroke-width: 1.5; }
    #concept-map-svg.has-filter .cmap-node.node-active { opacity: 1; }
    #concept-map-tooltip {
      position: absolute;
      pointer-events: none;
      background: rgba(16, 16, 16, 0.94);
      border: 1px solid var(--line);
      color: var(--text);
      font-size: 12px;
      padding: 12px 16px;
      border-radius: 3px;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.18s;
      z-index: 10;
      max-width: 420px;
      line-height: 1.55;
      backdrop-filter: blur(6px);
    }
    #concept-map-tooltip.visible { opacity: 1; }
    /* concept map animations */
    @keyframes cmap-flow {
      to { stroke-dashoffset: -18; }
    }
    @keyframes cmap-pulse {
      0%, 100% { transform: scale(1); opacity: 0.18; }
      50% { transform: scale(1.08); opacity: 0.30; }
    }
    .cmap-edge-flow { animation: cmap-flow 3s linear infinite; }
    .cmap-shape-pulse { transform-origin: 0 0; animation: cmap-pulse 3.5s ease-in-out infinite; }
    .cmap-node.cmap-entering { opacity: 0; }
    .cmap-node.cmap-entered { transition: opacity 0.6s ease-out; opacity: 1; }
    .cmap-edge.cmap-entering { stroke-opacity: 0 !important; }
    .cmap-edge.cmap-entered { transition: stroke-opacity 0.8s ease-out; }

    /* ── STATS DASHBOARD ── */
    #proj-stats { margin-bottom: 48px; }
    .proj-stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      border: 1px solid var(--line);
      border-radius: 2px;
      margin-bottom: 36px;
    }
    .proj-stat-card {
      text-align: center;
      padding: 28px 16px;
      border-right: 1px solid var(--line);
      transition: background 0.25s;
    }
    .proj-stat-card:last-child { border-right: none; }
    .proj-stat-card:hover { background: rgba(200,169,110,0.04); }
    .proj-stat-num {
      font-size: 42px;
      font-weight: 200;
      font-variant-numeric: tabular-nums;
      color: var(--white);
      line-height: 1.1;
    }
    .proj-stat-label {
      font-size: 11px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--muted);
      margin-top: 8px;
    }
    #proj-tag-dist {
      margin-top: 24px;
    }
    .proj-tag-bar-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 6px;
      font-size: 12px;
    }
    .proj-tag-bar-label {
      width: 180px;
      text-align: right;
      color: var(--muted);
      flex-shrink: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .proj-tag-bar-track {
      flex: 1;
      height: 14px;
      background: rgba(255,255,255,0.03);
      border-radius: 1px;
      overflow: hidden;
    }
    .proj-tag-bar-fill {
      height: 100%;
      border-radius: 1px;
      width: 0;
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .proj-tag-bar-count {
      width: 28px;
      text-align: right;
      color: var(--muted);
      font-variant-numeric: tabular-nums;
      flex-shrink: 0;
    }

    #pub-stats { margin-bottom: 48px; }
    #pub-tag-dist { margin-top: 24px; }

    /* ── PUBLICATIONS ── */
    .pub-list {
      display: flex;
      flex-direction: column;
    }
    .pub-item {
      display: grid;
      grid-template-columns: 80px 1fr;
      gap: 32px;
      padding: 28px 0;
      border-bottom: 1px solid var(--line);
      align-items: start;
    }
    .pub-item:last-child { border-bottom: none; }
    .pub-year {
      font-size: 12px;
      color: var(--muted);
      padding-top: 2px;
      letter-spacing: 0.06em;
    }
    .pub-title {
      font-size: 14px;
      color: var(--text);
      line-height: 1.7;
    }

    /* ── CAREER ── */
    .career-list {
      display: flex;
      flex-direction: column;
    }
    .career-item {
      display: grid;
      grid-template-columns: 180px 1fr;
      gap: 32px;
      padding: 22px 0;
      border-bottom: 1px solid var(--line);
      align-items: start;
    }
    .career-item:last-child { border-bottom: none; }
    .career-period {
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.04em;
      padding-top: 2px;
    }
    .career-body { font-size: 14px; color: var(--text); line-height: 1.7; }
    .career-role { color: var(--accent); font-size: 12px; margin-top: 4px; }

    /* ── CONTACT CARDS ── */
    .contact-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1px;
      background: var(--line);
      border: 1px solid var(--line);
      margin-top: 56px;
    }
    .contact-card {
      background: var(--bg);
      padding: 48px 36px;
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease, opacity 0.4s ease;
      cursor: pointer;
    }
    .contact-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 0; height: 1px;
      background: var(--accent);
      transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .contact-card:hover::before { width: 100%; }
    .contact-card::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, rgba(200,169,110,0.10) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .contact-card:hover::after { transform: scale(1); }
    .contact-card:hover { background: var(--bg2); }
    .contact-card > * { position: relative; z-index: 1; }
    .contact-cards:has(.contact-card:hover) .contact-card:not(:hover) { opacity: 0.06; }
    .contact-card-icon {
      width: 32px; height: 32px;
      margin-bottom: 28px;
      color: var(--muted);
      transition: color 0.4s ease, transform 0.4s ease;
    }
    .contact-card:hover .contact-card-icon { color: var(--accent); transform: translateY(-2px); }
    .contact-card-icon svg { width: 100%; height: 100%; }
    .contact-card-label {
      font-size: 10px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
      transition: letter-spacing 0.4s ease;
    }
    .contact-card:hover .contact-card-label { letter-spacing: 0.22em; }
    .contact-card-value {
      font-size: 14px;
      color: var(--text);
      line-height: 1.7;
      flex: 1;
    }
    .contact-card-action {
      font-size: 11px;
      color: var(--accent);
      margin-top: 20px;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.35s ease, transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
      letter-spacing: 0.04em;
    }
    .contact-card:hover .contact-card-action { opacity: 1; transform: translateY(0); }

    /* ── CONTACT STACK (vertical redesign) ── */
    .contact-stack {
      display: flex;
      flex-direction: column;
      border: 1px solid var(--line);
      margin-top: 56px;
    }
    .contact-block {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 44px 52px;
      border-bottom: 1px solid var(--line);
      text-decoration: none;
      color: inherit;
      position: relative;
      overflow: hidden;
      transition: background 0.4s ease;
      cursor: pointer;
    }
    .contact-block:last-child { border-bottom: none; }
    .contact-block::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 3px; height: 0;
      background: var(--contact-color);
      transition: height 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .contact-block:hover::before { height: 100%; }
    .contact-block:hover { background: var(--bg2); }
    .contact-block-header {
      display: flex;
      align-items: center;
      gap: 24px;
      flex: 1;
      min-width: 0;
    }
    .contact-block-icon {
      width: 48px; height: 48px;
      flex-shrink: 0;
      color: var(--muted);
      transition: color 0.4s ease, transform 0.4s ease;
    }
    .contact-block:hover .contact-block-icon { color: var(--contact-color); transform: translateY(-2px); }
    .contact-block-icon svg { width: 100%; height: 100%; }
    .contact-block-text {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 0;
    }
    .contact-block-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--contact-color);
      transition: letter-spacing 0.4s ease;
    }
    .contact-block:hover .contact-block-label { letter-spacing: 0.28em; }
    .contact-block-value {
      font-size: 16px;
      color: var(--white);
      font-weight: 300;
      line-height: 1.5;
    }
    .contact-block-action {
      font-size: 12px;
      color: var(--contact-color);
      letter-spacing: 0.04em;
      opacity: 0.7;
      white-space: nowrap;
      flex-shrink: 0;
      transition: opacity 0.35s ease, transform 0.35s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .contact-block:hover .contact-block-action { opacity: 1; transform: translateX(4px); }

    /* ── PUB TYPE BADGES ── */
    .pub-type-badge {
      display: inline-block;
      font-size: 9px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      padding: 2px 8px;
      border-radius: 1px;
      margin-bottom: 8px;
    }
    .pub-type-paper { background: rgba(126,184,201,0.12); color: #7eb8c9; border: 1px solid rgba(126,184,201,0.3); }
    .pub-type-book  { background: rgba(200,169,110,0.12); color: var(--accent); border: 1px solid rgba(200,169,110,0.3); }
    .pub-type-trans { background: rgba(106,106,98,0.12); color: var(--muted); border: 1px solid rgba(106,106,98,0.3); }
    .pub-type-talk  { background: rgba(160,140,180,0.12); color: #b09ac8; border: 1px solid rgba(160,140,180,0.3); }
    .pub-title-link {
      text-decoration: none;
      display: block;
    }
    .pub-title-link .pub-title {
      transition: color 0.2s;
    }
    .pub-title-link:hover .pub-title {
      color: var(--accent);
    }
    .pub-detail {
      font-size: 12px;
      color: var(--muted);
      margin-top: 5px;
      line-height: 1.7;
    }
    /* book entry with cover */
    .pub-item-book {
      display: grid;
      grid-template-columns: 80px 1fr;
      gap: 32px;
      padding: 28px 0;
      border-bottom: 1px solid var(--line);
      align-items: start;
    }
    .pub-book-cover {
      width: 80px;
      display: block;
      border: 1px solid var(--line);
      transition: opacity 0.2s;
    }
    .pub-item-book:hover .pub-book-cover { opacity: 0.85; }
    /* lang for badges */
    .pub-type-badge[data-lang] { display: none; }
    body.lang-ja .pub-type-badge[data-lang="ja"] { display: inline-block; }
    body.lang-en .pub-type-badge[data-lang="en"] { display: inline-block; }

    /* ── GRANT GROUP LABEL LANG SWITCH ── */
    .grant-group-label[data-lang] { display: none; }
    body.lang-ja .grant-group-label[data-lang="ja"] { display: block; }
    body.lang-en .grant-group-label[data-lang="en"] { display: block; }

    /* ── HOVER REVEAL ── */
    .pub-item .pub-detail,
    .pub-item .grant-info,
    .pub-item .member-info {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      margin-top: 0;
      transition: max-height 0.45s cubic-bezier(0.16,1,0.3,1),
                  opacity 0.35s ease,
                  margin-top 0.3s ease;
    }
    .pub-item:hover .pub-detail,
    .pub-item:hover .grant-info,
    .pub-item:hover .member-info {
      max-height: 200px;
      opacity: 1;
      margin-top: 8px;
    }
    .pub-item:hover .pub-detail-media { max-height: 280px; }
    .yt-thumb-link {
      display: block;
      position: relative;
      max-width: 300px;
      margin-top: 4px;
      border-radius: 2px;
      overflow: hidden;
      border: 1px solid var(--line);
    }
    .yt-thumb-link img { width: 100%; display: block; transition: opacity 0.2s; }
    .yt-thumb-link:hover img { opacity: 0.85; }
    .yt-play-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.25);
      transition: background 0.2s;
    }
    .yt-thumb-link:hover .yt-play-overlay { background: rgba(0,0,0,0.1); }
    .yt-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 10px;
      letter-spacing: 0.06em;
      color: #ff4444;
      border: 1px solid rgba(255, 68, 68, 0.4);
      padding: 3px 10px 3px 8px;
      border-radius: 1px;
      text-decoration: none;
      transition: background 0.2s, border-color 0.2s;
    }
    .yt-badge:hover { background: rgba(255,68,68,0.08); border-color: rgba(255,68,68,0.7); }
    .pub-item { cursor: default; }
    /* hint: small dot on right edge when hoverable content exists */
    .pub-item > div { position: relative; }
    .pub-item > div::after {
      content: '···';
      position: absolute;
      right: 0; top: 0;
      font-size: 14px;
      letter-spacing: 0.1em;
      color: var(--line);
      transition: color 0.25s;
    }
    .pub-item:hover > div::after { color: var(--accent); }
    .pub-item.news-entry:hover .pub-detail { max-height: 2000px; transition: max-height 0.8s cubic-bezier(0.16,1,0.3,1), opacity 0.5s ease, margin-top 0.3s ease; }

    /* ── GRANTS & TEACHING ── */
    .grant-group-label {
      font-size: 10px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--muted);
      border-left: 2px solid var(--accent);
      padding-left: 12px;
      margin-top: 48px;
    }
    .grant-tag {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.04em;
    }
    .grant-role {
      font-size: 10px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 3px 10px;
      border-radius: 1px;
    }
    .grant-role-pi {
      background: rgba(200, 169, 110, 0.12);
      color: var(--accent);
      border: 1px solid rgba(200, 169, 110, 0.3);
    }
    .grant-role-co {
      background: rgba(106, 106, 98, 0.12);
      color: var(--muted);
      border: 1px solid rgba(106, 106, 98, 0.3);
    }
    .teaching-inst {
      font-size: 12px;
      color: var(--muted);
      margin-top: 5px;
      letter-spacing: 0.04em;
    }

    /* ── TEACHING CARDS ── */
    .teaching-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 56px;
    }
    .teaching-card {
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: 2px;
      padding: 40px 32px;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      transition: border-color 0.3s, background 0.3s, opacity 0.4s ease;
    }
    .teaching-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: var(--tc-color, var(--accent));
      opacity: 0.5;
      transition: opacity 0.3s;
    }
    .teaching-card:hover::before { opacity: 1; }
    .teaching-card::after {
      content: '';
      position: absolute;
      bottom: -60px; right: -60px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, color-mix(in srgb, var(--tc-color, var(--accent)) 10%, transparent) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
      z-index: 0;
    }
    .teaching-card:hover::after { transform: scale(1); }
    .teaching-card:hover {
      border-color: color-mix(in srgb, var(--tc-color, var(--accent)) 35%, transparent);
      background: var(--bg2);
    }
    .teaching-card > * { position: relative; z-index: 1; }
    .teaching-grid:has(.teaching-card:hover) .teaching-card:not(:hover) { opacity: 0.06; }
    .tc-num {
      width: 48px; height: 48px;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
      font-weight: 300;
      color: var(--tc-color, var(--accent));
      background: color-mix(in srgb, var(--tc-color, var(--accent)) 10%, transparent);
      border: 1px solid color-mix(in srgb, var(--tc-color, var(--accent)) 20%, transparent);
      margin-bottom: 20px;
      font-variant-numeric: tabular-nums;
      transition: background 0.3s, color 0.3s;
    }
    .teaching-card:hover .tc-num {
      background: color-mix(in srgb, var(--tc-color, var(--accent)) 18%, transparent);
    }
    .tc-year {
      font-size: 11px;
      color: var(--tc-color, var(--accent));
      letter-spacing: 0.14em;
      margin-bottom: 14px;
    }
    .tc-title {
      font-size: 16px;
      font-weight: 400;
      color: var(--white);
      line-height: 1.5;
      margin-bottom: 8px;
    }
    .tc-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .tc-level {
      font-size: 9px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--tc-color, var(--accent));
      border: 1px solid color-mix(in srgb, var(--tc-color, var(--accent)) 30%, transparent);
      padding: 2px 10px;
      border-radius: 1px;
    }
    .tc-inst {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.04em;
    }
    .tc-dot {
      width: 3px; height: 3px;
      border-radius: 50%;
      background: var(--line);
    }
    .tc-tags { display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
    /* lang handling for tc elements */
    .tc-title[data-lang] { display: none; }
    body.lang-ja .tc-title[data-lang="ja"] { display: block; }
    body.lang-en .tc-title[data-lang="en"] { display: block; }
    .tc-inst[data-lang], .tc-level[data-lang] { display: none; }
    body.lang-ja .tc-inst[data-lang="ja"],
    body.lang-ja .tc-level[data-lang="ja"] { display: inline; }
    body.lang-en .tc-inst[data-lang="en"],
    body.lang-en .tc-level[data-lang="en"] { display: inline; }
    /* lang handling for new elements */
    .pub-title[data-lang], .grant-tag[data-lang], .grant-role[data-lang], .teaching-inst[data-lang] { display: none; }
    body.lang-ja .pub-title[data-lang="ja"],
    body.lang-ja .grant-tag[data-lang="ja"],
    body.lang-ja .grant-role[data-lang="ja"],
    body.lang-ja .teaching-inst[data-lang="ja"] { display: block; }
    body.lang-en .pub-title[data-lang="en"],
    body.lang-en .grant-tag[data-lang="en"],
    body.lang-en .grant-role[data-lang="en"],
    body.lang-en .teaching-inst[data-lang="en"] { display: block; }
    /* grant-role is inline */
    body.lang-ja .grant-role[data-lang="ja"],
    body.lang-en .grant-role[data-lang="en"] { display: inline-block; }

    /* ── INSTAGRAM ── */
    .ig-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    .ig-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: 2px;
      padding: 48px 32px 40px;
      text-decoration: none;
      position: relative;
      overflow: hidden;
      transition: border-color 0.3s, background 0.3s;
    }
    .ig-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
      opacity: 0.5;
      transition: opacity 0.3s;
    }
    .ig-card:hover::before { opacity: 1; }
    .ig-card:hover {
      border-color: rgba(192,91,138,0.35);
      background: var(--bg2);
    }
    .ig-ring {
      width: 88px; height: 88px;
      border-radius: 50%;
      padding: 3px;
      background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
      margin-bottom: 20px;
      transition: transform 0.3s;
    }
    .ig-card:hover .ig-ring { transform: scale(1.05); }
    .ig-account-icon {
      width: 100%; height: 100%;
      border-radius: 50%;
      object-fit: cover;
      display: block;
      border: 3px solid var(--bg);
      filter: grayscale(20%);
      transition: filter 0.3s;
    }
    .ig-card:hover .ig-account-icon { filter: grayscale(0%); }
    .ig-type {
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #c05b8a;
      margin-bottom: 10px;
    }
    .ig-handle {
      font-size: 15px;
      letter-spacing: 0.06em;
      color: var(--white);
      font-weight: 400;
      margin-bottom: 4px;
    }
    .ig-name {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 16px;
      line-height: 1.5;
    }
    .ig-desc {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.8;
      opacity: 0.65;
    }
    .ig-arrow {
      font-size: 18px;
      color: var(--line);
      transition: color 0.3s, transform 0.3s;
      margin-top: 24px;
      display: block;
      text-align: center;
    }
    .ig-card:hover .ig-arrow { color: #c05b8a; transform: translateY(-3px); }
    /* ig lang handling */
    .ig-name[data-lang], .ig-desc[data-lang], .ig-type[data-lang] { display: none; }
    body.lang-ja .ig-name[data-lang="ja"],
    body.lang-ja .ig-desc[data-lang="ja"],
    body.lang-ja .ig-type[data-lang="ja"] { display: block; }
    body.lang-en .ig-name[data-lang="en"],
    body.lang-en .ig-desc[data-lang="en"],
    body.lang-en .ig-type[data-lang="en"] { display: block; }

    /* ── WORKS CARDS ── */
    .works-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px;
      margin-top: 56px;
    }
    .works-card {
      position: relative;
      overflow: hidden;
      border: 1px solid var(--line);
      border-radius: 2px;
      cursor: pointer;
      aspect-ratio: 16 / 10;
      transition: border-color 0.35s, transform 0.4s cubic-bezier(0.16,1,0.3,1), box-shadow 0.4s;
    }
    .works-card:hover {
      border-color: rgba(200,169,110,0.4);
      transform: translateY(-6px);
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    }
    .works-card-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: brightness(0.7) saturate(0.85);
      transition: filter 0.5s, transform 0.5s cubic-bezier(0.16,1,0.3,1);
    }
    .works-card:hover .works-card-img {
      filter: brightness(0.35) saturate(0.6);
      transform: scale(1.04);
    }
    .works-card-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 28px;
      pointer-events: none;
    }
    .works-card-label {
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 8px;
      opacity: 0.8;
    }
    .works-card-name {
      font-size: clamp(18px, 2vw, 24px);
      font-weight: 300;
      color: var(--white);
      line-height: 1.3;
      margin-bottom: 6px;
    }
    .works-card-tech {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.05em;
      margin-bottom: 14px;
    }
    .works-card-desc {
      font-size: 13px;
      color: var(--text);
      line-height: 1.7;
      opacity: 0;
      transform: translateY(12px);
      transition: opacity 0.4s 0.05s, transform 0.4s 0.05s cubic-bezier(0.16,1,0.3,1);
    }
    .works-card:hover .works-card-desc {
      opacity: 1;
      transform: translateY(0);
    }
    .works-card-arrow {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 18px;
      color: var(--muted);
      opacity: 0;
      transform: translate(-6px, 6px);
      transition: opacity 0.3s, transform 0.3s cubic-bezier(0.16,1,0.3,1);
    }
    .works-card:hover .works-card-arrow {
      opacity: 1;
      transform: translate(0, 0);
      color: var(--accent);
    }
    /* works lang handling */
    .works-card-name[data-lang],
    .works-card-desc[data-lang],
    .works-card-label[data-lang] { display: none; }
    body.lang-ja .works-card-name[data-lang="ja"],
    body.lang-ja .works-card-desc[data-lang="ja"],
    body.lang-ja .works-card-label[data-lang="ja"] { display: block; }
    body.lang-en .works-card-name[data-lang="en"],
    body.lang-en .works-card-desc[data-lang="en"],
    body.lang-en .works-card-label[data-lang="en"] { display: block; }

    /* ── WORKS MODAL ── */
    .works-modal-backdrop {
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(0,0,0,0.0);
      backdrop-filter: blur(0px);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.45s ease, visibility 0.45s ease, background 0.45s ease, backdrop-filter 0.45s ease;
    }
    .works-modal-backdrop.active {
      opacity: 1;
      visibility: visible;
      background: rgba(0,0,0,0.82);
      backdrop-filter: blur(12px);
    }
    .works-modal {
      background: var(--bg2);
      border: 1px solid var(--line);
      border-radius: 3px;
      max-width: 800px;
      width: 90vw;
      max-height: 85vh;
      overflow-y: auto;
      transform: translateY(40px) scale(0.96);
      transition: transform 0.45s cubic-bezier(0.16,1,0.3,1);
      scrollbar-width: thin;
      scrollbar-color: var(--line) transparent;
    }
    .works-modal-backdrop.active .works-modal {
      transform: translateY(0) scale(1);
    }
    .works-modal-hero {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      overflow: hidden;
    }
    .works-modal-hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .works-modal-hero-gradient {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(to top, var(--bg2), transparent);
    }
    .works-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 36px;
      height: 36px;
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 50%;
      background: rgba(12,12,12,0.6);
      backdrop-filter: blur(8px);
      color: var(--white);
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, border-color 0.2s;
      z-index: 1;
    }
    .works-modal-close:hover {
      background: rgba(200,169,110,0.2);
      border-color: var(--accent);
    }
    .works-modal-body {
      padding: 36px 40px 44px;
    }
    .works-modal-label {
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 12px;
    }
    .works-modal-title {
      font-size: clamp(22px, 2.5vw, 30px);
      font-weight: 200;
      color: var(--white);
      line-height: 1.3;
      margin-bottom: 20px;
    }
    .works-modal-desc {
      font-size: 14px;
      color: var(--text);
      line-height: 1.9;
      margin-bottom: 28px;
    }
    .works-modal-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 32px;
    }
    .works-modal-tag {
      font-size: 11px;
      letter-spacing: 0.06em;
      color: var(--muted);
      border: 1px solid var(--line);
      padding: 4px 12px;
      border-radius: 2px;
    }
    .works-modal-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px solid var(--accent);
      padding-bottom: 3px;
      transition: color 0.2s;
    }
    .works-modal-link:hover { color: var(--white); }
    /* modal lang handling */
    .works-modal-title[data-lang],
    .works-modal-desc[data-lang],
    .works-modal-label[data-lang],
    .works-modal-link[data-lang] { display: none; }
    body.lang-ja .works-modal-title[data-lang="ja"],
    body.lang-ja .works-modal-desc[data-lang="ja"],
    body.lang-ja .works-modal-label[data-lang="ja"] { display: block; }
    body.lang-ja .works-modal-link[data-lang="ja"] { display: inline-flex; }
    body.lang-en .works-modal-title[data-lang="en"],
    body.lang-en .works-modal-desc[data-lang="en"],
    body.lang-en .works-modal-label[data-lang="en"] { display: block; }
    body.lang-en .works-modal-link[data-lang="en"] { display: inline-flex; }

    /* ── FOOTER ── */
    footer {
      padding: 48px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.08em;
      max-width: 1100px;
      margin: 0 auto;
    }

    /* ── RESPONSIVE ── */
    @media (max-width: 860px) {
      .nav-inner { padding: 0 24px; height: 50px; }
      .nav-links {
        display: none;
        position: absolute;
        top: 50px;
        left: 0; right: 0;
        flex-direction: column;
        background: rgba(12,12,12,0.96);
        backdrop-filter: blur(16px);
        border-bottom: 1px solid var(--line);
        padding: 12px 24px 20px;
        gap: 2px;
      }
      .nav-links.open { display: flex; }
      .nav-link { padding: 10px 12px; font-size: 12px; }
      .nav-hamburger { display: flex; }
      .hero { padding: 0 24px 64px; }
      section { padding: 64px 24px; }
      .mvv-grid { grid-template-columns: 1fr; }
      .strengths-grid { grid-template-columns: 1fr; }
      .str-block { padding: 36px 28px; }
      .str-block-icon { width: 36px; height: 36px; }
      .str-block-header { gap: 14px; margin-bottom: 18px; }
      .str-block-title { font-size: 18px; }
      .ig-grid { grid-template-columns: 1fr; }
      .works-grid { grid-template-columns: 1fr; }
      .works-modal-body { padding: 28px 24px 36px; }
      .ro-pillars { grid-template-columns: 1fr; }
      .ro-pillar { border-right: none; border-bottom: 1px solid var(--line); }
      .ro-pillar:last-child { border-bottom: none; }
      .ro-impl { padding: 28px 24px; }
      .career-item { grid-template-columns: 1fr; gap: 6px; }
      .contact-cards { grid-template-columns: 1fr; }
      .contact-card { padding: 36px 28px; }
      .contact-block { flex-direction: column; align-items: flex-start; gap: 16px; padding: 36px 28px; }
      .contact-block-icon { width: 36px; height: 36px; }
      .contact-block-action { align-self: flex-end; }
      .teaching-grid { grid-template-columns: 1fr; }
      footer { padding: 32px 24px; flex-direction: column; gap: 12px; text-align: center; }
      .lang-bar { padding: 16px 24px; }
      .pub-item { gap: 20px; }
      .pub-item-book { gap: 20px; }
      #network-container { height: 560px; }
      #pub-network-container { height: 480px; }
      #concept-map-container { height: 520px; }
      .proj-stats-grid { grid-template-columns: repeat(2, 1fr); }
      .proj-stat-card:nth-child(2) { border-right: none; }
      .proj-stat-card:nth-child(1),
      .proj-stat-card:nth-child(2) { border-bottom: 1px solid var(--line); }
      .proj-tag-bar-label { width: 140px; }
    }
    @media (max-width: 560px) {
      .hero { padding: 0 20px 56px; }
      .hero-name img { height: clamp(36px, 14vw, 70px) !important; }
      section { padding: 48px 20px; }
      .values-item { grid-template-columns: 48px 1fr; gap: 16px; padding: 28px 20px; }
      .pub-item { grid-template-columns: 1fr; gap: 4px; padding: 20px 0; }
      .pub-year { padding-top: 0; }
      .pub-item-book { grid-template-columns: 64px 1fr; gap: 20px; padding: 24px 0; }
      .pub-book-cover { width: 64px !important; }
      .career-item { padding: 16px 0; }
      .kw { font-size: 11px; padding: 5px 10px; }
      .topic-tag { font-size: 9px; padding: 2px 8px; }
      .hero-tag { font-size: 9px; padding: 4px 10px; }
      .grant-group-label { margin-top: 36px !important; }
      #network-container { height: 440px; }
      #pub-network-container { height: 380px; }
      #concept-map-container { height: 420px; }
      .network-wrap { margin-bottom: 32px; }
      .proj-stats-grid { grid-template-columns: repeat(2, 1fr); }
      .proj-stat-num { font-size: 32px; }
      .proj-stat-card { padding: 20px 12px; }
      .proj-tag-bar-label { width: 100px; font-size: 10px; }
      .contact-block { padding: 28px 20px; }
      .contact-block-icon { width: 30px; height: 30px; }
      .contact-block-value { font-size: 14px; }
      .str-block { padding: 28px 20px; }
      .str-block-icon { width: 30px; height: 30px; }
      .str-block-header { gap: 10px; margin-bottom: 14px; }
      .str-block-title { font-size: 16px; }
      .str-block-body { font-size: 13px; }
      .str-block-tag { font-size: 10px; }
    }
    /* タッチデバイスではホバー非表示コンテンツを常時表示 */
    @media (pointer: coarse) {
      .pub-item .pub-detail,
      .pub-item .grant-info,
      .pub-item .member-info {
        max-height: none;
        opacity: 1;
        margin-top: 6px;
        transition: none;
      }
      .pub-item > div::after { display: none; }
      .ro-pillar-body {
        max-height: none;
        opacity: 1;
        transform: none;
        margin-top: 16px;
        transition: none;
      }
      .ro-pillar-name::after { display: none; }
      .ro-pillars:has(.ro-pillar:hover) .ro-pillar:not(:hover) { opacity: 1; }
      .strengths-card-body {
        max-height: none;
        opacity: 1;
        transform: none;
        margin-top: 20px;
        transition: none;
      }
      .strengths-card-title::after { display: none; }
      .strengths-grid:has(.strengths-card:hover) .strengths-card:not(:hover) { opacity: 1; }
      .teaching-card .tc-action {
        opacity: 1;
        transform: translateY(0);
        transition: none;
      }
      .teaching-grid:has(.teaching-card:hover) .teaching-card:not(:hover) { opacity: 1; }
    }

    /* ── LANGUAGE SWITCH ── */
    [data-lang] { display: none; }
    body.lang-ja [data-lang="ja"] { display: block; }
    body.lang-en [data-lang="en"] { display: block; }
    body.lang-ja .lang-toggle [data-target="ja"],
    body.lang-en .lang-toggle [data-target="en"] { }
    /* inline elements */
    span[data-lang], li[data-lang], div[data-lang] { }
    body.lang-ja span[data-lang="ja"],
    body.lang-ja li[data-lang="ja"],
    body.lang-ja div[data-lang="ja"] { display: inline; }
    body.lang-en span[data-lang="en"],
    body.lang-en li[data-lang="en"],
    body.lang-en div[data-lang="en"] { display: inline; }

    /* block-level overrides */
    .mvv-card-body[data-lang],
    .strengths-card-body[data-lang],
    .str-block-body[data-lang],
    .str-block-title[data-lang],
    .mvv-card-title[data-lang],
    .mvv-block-title[data-lang],
    .mvv-block-body[data-lang],
    .mvv-values-list[data-lang],
    .ro-vision-title[data-lang],
    .ro-vision-body[data-lang],
    .ro-pillar-name[data-lang],
    .ro-pillar-body[data-lang],
    .ro-impl-label[data-lang],
    .ro-impl-body[data-lang],
    .hero-affil[data-lang],
    .hero-name-sub[data-lang],
    .sec-title[data-lang],
    .sec-title-jp[data-lang],
    .values-text-title[data-lang],
    .values-text-body[data-lang],
    .strengths-card-title[data-lang],
    .pub-card-title[data-lang],
    .pub-card-summary[data-lang],
    .pub-card-detail[data-lang],
    .pub-card-group[data-lang],
    p[data-lang] {
      display: none;
    }
    body.lang-ja .pub-card-title[data-lang="ja"],
    body.lang-ja .pub-card-detail[data-lang="ja"],
    body.lang-ja .mvv-card-body[data-lang="ja"],
    body.lang-ja .strengths-card-body[data-lang="ja"],
    body.lang-ja .str-block-body[data-lang="ja"],
    body.lang-ja .str-block-title[data-lang="ja"],
    body.lang-ja .mvv-card-title[data-lang="ja"],
    body.lang-ja .mvv-block-title[data-lang="ja"],
    body.lang-ja .mvv-block-body[data-lang="ja"],
    body.lang-ja .mvv-values-list[data-lang="ja"],
    body.lang-ja .ro-vision-title[data-lang="ja"],
    body.lang-ja .ro-vision-body[data-lang="ja"],
    body.lang-ja .ro-pillar-name[data-lang="ja"],
    body.lang-ja .ro-pillar-body[data-lang="ja"],
    body.lang-ja .ro-impl-label[data-lang="ja"],
    body.lang-ja .ro-impl-body[data-lang="ja"],
    body.lang-ja .hero-affil[data-lang="ja"],
    body.lang-ja .hero-name-sub[data-lang="ja"],
    body.lang-ja .sec-title[data-lang="ja"],
    body.lang-ja .sec-title-jp[data-lang="ja"],
    body.lang-ja .values-text-title[data-lang="ja"],
    body.lang-ja .values-text-body[data-lang="ja"],
    body.lang-ja .strengths-card-title[data-lang="ja"],
    body.lang-ja .str-block-label[data-lang="ja"],
    body.lang-ja p[data-lang="ja"] { display: block; }
    body.lang-ja .pub-card-group[data-lang="ja"] { display: inline-block; }
    body.lang-en .pub-card-title[data-lang="en"],
    body.lang-en .pub-card-detail[data-lang="en"],
    body.lang-en .mvv-card-body[data-lang="en"],
    body.lang-en .strengths-card-body[data-lang="en"],
    body.lang-en .str-block-body[data-lang="en"],
    body.lang-en .str-block-title[data-lang="en"],
    body.lang-en .mvv-card-title[data-lang="en"],
    body.lang-en .mvv-block-title[data-lang="en"],
    body.lang-en .mvv-block-body[data-lang="en"],
    body.lang-en .mvv-values-list[data-lang="en"],
    body.lang-en .ro-vision-title[data-lang="en"],
    body.lang-en .ro-vision-body[data-lang="en"],
    body.lang-en .ro-pillar-name[data-lang="en"],
    body.lang-en .ro-pillar-body[data-lang="en"],
    body.lang-en .ro-impl-label[data-lang="en"],
    body.lang-en .ro-impl-body[data-lang="en"],
    body.lang-en .hero-affil[data-lang="en"],
    body.lang-en .hero-name-sub[data-lang="en"],
    body.lang-en .sec-title[data-lang="en"],
    body.lang-en .sec-title-jp[data-lang="en"],
    body.lang-en .values-text-title[data-lang="en"],
    body.lang-en .values-text-body[data-lang="en"],
    body.lang-en .strengths-card-title[data-lang="en"],
    body.lang-en .str-block-label[data-lang="en"],
    body.lang-en p[data-lang="en"] { display: block; }
    body.lang-en .pub-card-group[data-lang="en"] { display: inline-block; }
    /* mvv-values-list needs flex not block */
    body.lang-ja .mvv-values-list[data-lang="ja"],
    body.lang-en .mvv-values-list[data-lang="en"] { display: flex; }

    /* fade transition */
    .lang-fade {
      transition: opacity 0.3s ease;
    }

    /* ── LOADING SCREEN ── */
    #loader {
      position: fixed;
      inset: 0;
      background: var(--bg);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.6s ease, visibility 0.6s ease;
    }
    #loader.hidden { opacity: 0; visibility: hidden; }
    .loader-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    .loader-name {
      font-size: 13px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--muted);
      overflow: hidden;
    }
    .loader-name span {
      display: inline-block;
      animation: loaderChar 0.8s cubic-bezier(0.16,1,0.3,1) both;
    }
    .loader-bar {
      width: 120px;
      height: 1px;
      background: var(--line);
      position: relative;
      overflow: hidden;
    }
    .loader-bar::after {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%;
      height: 100%;
      background: var(--accent);
      animation: loaderBarFill 1.2s cubic-bezier(0.4,0,0.2,1) 0.2s forwards;
    }
    @keyframes loaderBarFill { to { left: 100%; } }
    @keyframes loaderChar {
      from { transform: translateY(120%); opacity: 0; }
      to   { transform: translateY(0);    opacity: 1; }
    }

    /* ── SCROLL PROGRESS (moved into nav-bar) ── */
    #scroll-progress { display: none; }

    /* ── CUSTOM CURSOR ── */
    #cursor {
      position: fixed;
      width: 8px; height: 8px;
      background: var(--accent);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9998;
      transform: translate(-50%, -50%);
      transition: transform 0.1s ease, width 0.25s ease, height 0.25s ease, opacity 0.25s ease;
      mix-blend-mode: difference;
    }
    #cursor-ring {
      position: fixed;
      width: 36px; height: 36px;
      border: 1px solid rgba(200,169,110,0.4);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9997;
      transform: translate(-50%, -50%);
      transition: transform 0.18s ease, width 0.3s ease, height 0.3s ease, opacity 0.3s ease;
    }
    body.cursor-hover #cursor { width: 4px; height: 4px; }
    body.cursor-hover #cursor-ring { width: 56px; height: 56px; border-color: rgba(200,169,110,0.7); }
    @media (pointer: coarse) { #cursor, #cursor-ring { display: none; } }

    /* ── SCROLL REVEAL ── */
    .reveal {
      opacity: 0;
      transform: translateY(32px);
      transition: opacity 0.7s cubic-bezier(0.16,1,0.3,1),
                  transform 0.7s cubic-bezier(0.16,1,0.3,1);
    }
    .reveal.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .reveal-left {
      opacity: 0;
      transform: translateX(-24px);
      transition: opacity 0.7s cubic-bezier(0.16,1,0.3,1),
                  transform 0.7s cubic-bezier(0.16,1,0.3,1);
    }
    .reveal-left.visible { opacity: 1; transform: translateX(0); }

    /* stagger delays */
    .stagger-1 { transition-delay: 0.05s; }
    .stagger-2 { transition-delay: 0.12s; }
    .stagger-3 { transition-delay: 0.19s; }
    .stagger-4 { transition-delay: 0.26s; }
    .stagger-5 { transition-delay: 0.33s; }
    .stagger-6 { transition-delay: 0.40s; }

    /* ── HERO ENTRANCE ── */
    .hero-label    { opacity: 0; transform: translateY(12px); animation: heroFadeUp 0.7s cubic-bezier(0.16,1,0.3,1) 1.4s forwards; }
    .hero-name     { opacity: 0; transform: translateY(16px); animation: heroFadeUp 0.8s cubic-bezier(0.16,1,0.3,1) 1.55s forwards; }
    .hero-affil    { opacity: 0; transform: translateY(12px); animation: heroFadeUp 0.7s cubic-bezier(0.16,1,0.3,1) 1.7s forwards; }
    .hero-tags     { opacity: 0; transform: translateY(10px); animation: heroFadeUp 0.7s cubic-bezier(0.16,1,0.3,1) 1.85s forwards; }
    .scroll-hint   { opacity: 0; animation: heroFadeUp 0.6s ease 2.1s forwards; }
    @keyframes heroFadeUp {
      to { opacity: 1; transform: translateY(0); }
    }

    /* ── SECTION TITLE LINE ── */
    .sec-label::before {
      content: '';
      display: inline-block;
      width: 0;
      height: 1px;
      background: var(--accent);
      vertical-align: middle;
      margin-right: 0;
      transition: width 0.5s ease, margin-right 0.5s ease;
    }
    .sec-label.visible::before { width: 24px; margin-right: 10px; }

    /* ── HOVER LIFT on cards ── */
    .mvv-card, .strengths-card, .str-block {
      transition: background 0.3s, transform 0.3s cubic-bezier(0.16,1,0.3,1), box-shadow 0.3s;
    }
    .mvv-card:hover, .strengths-card:hover, .str-block:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    }

    /* scroll indicator */
    .scroll-hint {
      position: absolute;
      bottom: 40px;
      left: 48px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--muted);
      z-index: 1;
    }
    .scroll-hint-line {
      width: 40px;
      height: 1px;
      background: var(--muted);
    }

    /* ── GRAIN OVERLAY ── */
    .grain-overlay {
      position: fixed;
      inset: -50%;
      width: 200%; height: 200%;
      z-index: 9995;
      pointer-events: none;
      opacity: 0.038;
      filter: url(#grain-filter);
      background: white;
      animation: grain-move 0.2s steps(1) infinite;
    }
    @keyframes grain-move {
      0%   { transform: translate3d(0%,    0%,    0); }
      10%  { transform: translate3d(-2%,  -3%,    0); }
      20%  { transform: translate3d(3%,    2%,    0); }
      30%  { transform: translate3d(-2%,   3%,    0); }
      40%  { transform: translate3d(2%,   -2%,    0); }
      50%  { transform: translate3d(-3%,   2%,    0); }
      60%  { transform: translate3d(3%,   -3%,    0); }
      70%  { transform: translate3d(-1%,   2%,    0); }
      80%  { transform: translate3d(2%,   -1%,    0); }
      90%  { transform: translate3d(-2%,   2%,    0); }
      100% { transform: translate3d(1%,   -1%,    0); }
    }

    /* ── HERO CANVAS + GLOW ── */
    #hero-canvas {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 2.5s ease;
    }
    #hero-canvas.active { opacity: 1; }
    .hero-glow {
      position: absolute;
      inset: 0;
      z-index: 0;
      pointer-events: none;
    }

    /* ── CLIP-PATH TITLE REVEAL ── */
    .clip-reveal {
      clip-path: inset(0 0 100% 0);
      transform: translateY(22px);
      transition: clip-path 1.0s cubic-bezier(0.16, 1, 0.3, 1),
                  transform 1.0s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .clip-reveal.visible {
      clip-path: inset(0 0 0% 0);
      transform: translateY(0);
    }

    /* ── CARD TILT (3-D) ── */
    .mvv-card, .mvv-block, .strengths-card, .str-block, .ro-pillar, .contact-block { will-change: transform; }
  </style>
</head>
<body class="lang-ja">

  <!-- GRAIN NOISE -->
  <svg style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="grain-filter">
        <feTurbulence type="fractalNoise" baseFrequency="0.72" numOctaves="4" stitchTiles="stitch"/>
        <feColorMatrix type="saturate" values="0"/>
      </filter>
    </defs>
  </svg>
  <div class="grain-overlay"></div>

  <!-- LOADER -->
  <div id="loader">
    <div class="loader-inner">
      <div class="loader-name">
        <span style="animation-delay:0.0s">Y</span><span style="animation-delay:0.05s">u</span><span style="animation-delay:0.10s">k</span><span style="animation-delay:0.15s">i</span><span style="animation-delay:0.22s">&nbsp;</span><span style="animation-delay:0.27s">S</span><span style="animation-delay:0.32s">u</span><span style="animation-delay:0.37s">g</span><span style="animation-delay:0.42s">a</span><span style="animation-delay:0.47s">w</span><span style="animation-delay:0.52s">a</span><span style="animation-delay:0.57s">r</span><span style="animation-delay:0.62s">a</span>
      </div>
      <div class="loader-bar"></div>
    </div>
  </div>

  <!-- SCROLL PROGRESS -->
  <div id="scroll-progress"></div>

  <!-- CUSTOM CURSOR -->
  <div id="cursor"></div>
  <div id="cursor-ring"></div>

  <!-- NAVIGATION BAR -->
  <nav class="nav-bar" id="nav-bar">
    <div class="nav-inner">
      <a href="#" class="nav-logo" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;"><img src="image/ysugawara_sign_inverted_v2.png" alt="Yuki Sugawara" class="nav-logo-img" /></a>
      <div class="nav-links" id="nav-links">
        <a href="#sec-news" class="nav-link" data-section="sec-news">
          <span class="nav-link-label" data-lang="ja">新着</span>
          <span class="nav-link-label" data-lang="en">News</span>
        </a>
        <a href="#sec-mvv" class="nav-link" data-section="sec-mvv">
          <span class="nav-link-label" data-lang="ja">MVV</span>
          <span class="nav-link-label" data-lang="en">MVV</span>
        </a>
        <a href="#sec-career" class="nav-link" data-section="sec-career">
          <span class="nav-link-label" data-lang="ja">経歴</span>
          <span class="nav-link-label" data-lang="en">Career</span>
        </a>
        <a href="#sec-research" class="nav-link" data-section="sec-research">
          <span class="nav-link-label" data-lang="ja">研究</span>
          <span class="nav-link-label" data-lang="en">Research</span>
        </a>
        <a href="#sec-publications" class="nav-link" data-section="sec-publications">
          <span class="nav-link-label" data-lang="ja">業績</span>
          <span class="nav-link-label" data-lang="en">Pubs</span>
        </a>
        <a href="#sec-projects" class="nav-link" data-section="sec-projects">
          <span class="nav-link-label" data-lang="ja">助成</span>
          <span class="nav-link-label" data-lang="en">Projects</span>
        </a>
        <a href="#sec-teaching" class="nav-link" data-section="sec-teaching">
          <span class="nav-link-label" data-lang="ja">授業</span>
          <span class="nav-link-label" data-lang="en">Teaching</span>
        </a>
        <a href="#sec-works" class="nav-link" data-section="sec-works">
          <span class="nav-link-label" data-lang="ja">制作</span>
          <span class="nav-link-label" data-lang="en">Works</span>
        </a>
        <a href="#sec-contact" class="nav-link" data-section="sec-contact">
          <span class="nav-link-label" data-lang="ja">連絡</span>
          <span class="nav-link-label" data-lang="en">Contact</span>
        </a>
      </div>
      <div class="nav-right">
        <div class="lang-toggle">
          <button data-target="ja" class="active" onclick="setLang('ja')">JA</button>
          <button data-target="en" onclick="setLang('en')">EN</button>
        </div>
        <button class="nav-hamburger" id="nav-hamburger" aria-label="Menu">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
    <div class="nav-progress" id="nav-progress"></div>
  </nav>

  <!-- HERO -->
  <div class="hero">
    <canvas id="hero-canvas"></canvas>
    <div class="hero-glow"></div>
    <div class="hero-content">
      <p class="hero-label">Researcher &amp; Educator</p>
      <h1 class="hero-name">
        <img src="image/ysugawara_sign_inverted_v2.png" alt="Yuki Sugawara"
             style="height: clamp(50px, 7vw, 90px); width: auto; display: block;">
      </h1>

      <div class="hero-affil" data-lang="ja">
        Graduate School of Humanities, University of Osaka<br>
        <span style="color:var(--accent)">Associate Professor (Lecturer)</span>
      </div>
      <div class="hero-affil" data-lang="en">
        Graduate School of Humanities, University of Osaka<br>
        <span style="color:var(--accent)">Associate Professor (Lecturer)</span>
      </div>

      <div class="hero-tags">
        <span class="hero-tag" data-tag="Digital STS">Digital STS</span>
        <span class="hero-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span>
        <span class="hero-tag" data-tag="Digital Anthropology">Digital Anthropology</span>
      </div>
    </div>
    <div class="scroll-hint">
      <span class="scroll-hint-line"></span>
      <span>Scroll</span>
    </div>
  </div>

  <!-- NEWS -->
  <section id="sec-news">
    <p class="sec-label">News</p>
    <h2 class="sec-title" data-lang="ja">新着情報</h2>
    <h2 class="sec-title" data-lang="en">News</h2>

    <div class="pub-list" style="margin-top: 40px;">

      <div class="pub-item news-entry" style="align-items:start; padding: 32px 0;">
        <span class="pub-year">2026.02.23</span>
        <div>
          <div class="pub-title" data-lang="ja" style="font-size:15px; font-weight:400; line-height:1.6;">【お知らせ】「デジタル人類学」リーディンググループ開始と参加者募集</div>
          <div class="pub-title" data-lang="en" style="font-size:15px; font-weight:400; line-height:1.6;">[News] Call for Participants: Digital Anthropology Reading Group</div>
          <div style="margin-top:8px;"><span class="topic-tag" data-tag="Digital Anthropology">Digital Anthropology</span></div>

          <div class="pub-detail">
            <!-- 日本語本文 -->
            <div data-lang="ja" style="font-size:13px; line-height:2; color:var(--text);">
              <p>グローバル日本学教育研究拠点のプロジェクト「デジタル人類学で拓く『デジタル日本学』教育のグローバル展開」（代表：菅原裕輝）の一環として、2025年10月より「デジタル人類学」のリーディンググループ（読書会）をスタートいたしました。</p>
              <p style="margin-top:12px;">デジタル環境における人間・社会・文化のあり方を問う新たな研究領域「デジタル人類学」。本グループでは、関連文献を講読しながら分野を越えた対話と議論を深め、研究の基盤となる視座を共有していきます。</p>
              <p style="margin-top:24px; font-size:11px; letter-spacing:0.1em; color:var(--accent);">■ 開催概要</p>
              <p style="margin-top:10px;">日時：毎月 第2木曜日 11:00–12:00</p>
              <p style="margin-top:4px;">対象：デジタル人類学に関心のある学生・研究者・社会人（学内外を問いません）</p>
              <p style="margin-top:4px;">形式：オンライン（Zoom）および Notionを活用した情報共有</p>
              <p style="margin-top:24px; font-size:11px; letter-spacing:0.1em; color:var(--accent);">■ 参加方法について</p>
              <p style="margin-top:10px;">まずは、下記のGoogleフォームよりお気軽にご登録ください。</p>
              <p style="margin-top:8px;"><a href="https://forms.gle/1AHmpgQyykCZotsM6" target="_blank" rel="noopener noreferrer" style="color:var(--accent); text-decoration:none; border-bottom:1px solid rgba(200,169,110,0.4); padding-bottom:1px;">🔗 参加登録フォームはこちら</a></p>
              <p style="margin-top:12px;">ご登録いただいた方には、文献リストや読書メモ、Zoomリンク、進め方などをまとめた「Notionページ」のリンクをメールにてご案内いたします。そちらの詳細をご確認いただいた上で、実際の参加をご判断いただけます（登録＝参加必須ではありません）。</p>
              <p style="margin-top:20px;">多様なバックグラウンドを持つ皆様との有意義な対話を楽しみにしています。心よりご登録をお待ちしております。</p>
            </div>

            <!-- English body -->
            <div data-lang="en" style="font-size:13px; line-height:2; color:var(--text);">
              <p>As part of the project "Global Expansion of 'Digital Japanese Studies' Education Pioneered by Digital Anthropology" (Project Leader: Yuki Sugawara), we launched the Digital Anthropology Reading Group in October 2025.</p>
              <p style="margin-top:12px;">Digital anthropology is an emerging field that explores human behavior, society, and culture within digital environments. In this group, we will read relevant literature, deepen our discussions across disciplines, and share foundational perspectives for future research.</p>
              <p style="margin-top:24px; font-size:11px; letter-spacing:0.1em; color:var(--accent);">■ Overview</p>
              <p style="margin-top:10px;">Schedule: 2nd Thursday of every month, 11:00–12:00 (JST)</p>
              <p style="margin-top:4px;">Target: Students, researchers, and professionals interested in digital anthropology (open to both internal and external participants)</p>
              <p style="margin-top:4px;">Format: Online (Zoom) with shared resources and collaboration via Notion</p>
              <p style="margin-top:24px; font-size:11px; letter-spacing:0.1em; color:var(--accent);">■ How to Join</p>
              <p style="margin-top:10px;">If you are interested, please register via the Google Form below:</p>
              <p style="margin-top:8px;"><a href="https://forms.gle/1AHmpgQyykCZotsM6" target="_blank" rel="noopener noreferrer" style="color:var(--accent); text-decoration:none; border-bottom:1px solid rgba(200,169,110,0.4); padding-bottom:1px;">🔗 Registration Form</a></p>
              <p style="margin-top:12px;">Upon registration, you will receive an email with a link to our Notion page containing all necessary details, including reading lists, memos, Zoom links, and procedures. You are welcome to review these materials first before officially deciding to participate.</p>
              <p style="margin-top:20px;">We look forward to engaging in meaningful dialogue with participants from diverse backgrounds!</p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- MISSION / VISION / VALUES -->
  <div id="sec-mvv" style="padding: 90px 0; border-bottom: 1px solid var(--line);">
    <div style="max-width:1100px; margin:0 auto; padding:0 48px;">
      <p class="sec-label">Mission, Vision and Values</p>
      <h2 class="sec-title" data-lang="ja">ミッション／ビジョン／バリュー</h2>
      <h2 class="sec-title" data-lang="en">Mission · Vision · Values</h2>
    </div>

    <div style="max-width:1100px; margin:0 auto; padding: 0 48px; margin-top: 56px;">
      <div class="mvv-stack">
        <!-- MISSION -->
        <div class="mvv-block" style="--mvv-color: #4dc4a8">
          <div class="mvv-block-header">
            <svg class="mvv-block-icon" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="18"/>
              <circle cx="24" cy="24" r="8"/>
              <line x1="24" y1="2" x2="24" y2="14"/>
              <line x1="24" y1="34" x2="24" y2="46"/>
              <line x1="2" y1="24" x2="14" y2="24"/>
              <line x1="34" y1="24" x2="46" y2="24"/>
            </svg>
            <div>
              <p class="mvv-block-label">Mission</p>
              <div class="mvv-block-title" data-lang="ja">日々果たすべき使命</div>
              <div class="mvv-block-title" data-lang="en">Daily Mission</div>
            </div>
          </div>
          <div class="mvv-block-body" data-lang="ja">
            人文学の伝統的・アナログな知見と、最先端のデジタル技術（AI、データ分析、Web・デザイン、動画編集等）を「実装」レベルで掛け合わせる。理論にとどまらず自ら手を動かすことで、次世代に向けた新たな研究手法と視座を社会に提示し、実践的なモデルを示す。
          </div>
          <div class="mvv-block-body" data-lang="en">
            To fuse the profound, analog insights of the humanities with cutting-edge digital technologies (such as AI, data analysis, web design, and video editing) at an implementation level. Moving beyond theory by actively building tools and platforms, my mission is to present society with innovative research methodologies and practical new perspectives.
          </div>
          <div class="mvv-block-tags">
            <span class="mvv-block-tag">Humanities × Digital</span>
            <span class="mvv-block-tag">Implementation</span>
            <span class="mvv-block-tag">Next-Gen Methods</span>
          </div>
        </div>
        <!-- VISION -->
        <div class="mvv-block" style="--mvv-color: var(--accent)">
          <div class="mvv-block-header">
            <svg class="mvv-block-icon" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <ellipse cx="24" cy="24" rx="22" ry="14"/>
              <circle cx="24" cy="24" r="8"/>
              <circle cx="24" cy="24" r="3"/>
            </svg>
            <div>
              <p class="mvv-block-label">Vision</p>
              <div class="mvv-block-title" data-lang="ja">実現したい未来</div>
              <div class="mvv-block-title" data-lang="en">Future Envisioned</div>
            </div>
          </div>
          <div class="mvv-block-body" data-lang="ja">
            先端技術の急速な発展と、人文学的な価値観が対立・乖離するのではなく、相互に共創し、より豊かな人間社会を形作る未来。誰もが自らの内なる「熱」を原動力に、テクノロジーを自在に操りながら本質的な思索を深められる社会の構築。
          </div>
          <div class="mvv-block-body" data-lang="en">
            A future where the rapid advancement of advanced technology and humanistic values do not conflict, but mutually co-create to shape a richer human society. I envision a world where everyone, driven by their own inner "passion," can freely leverage technology to deepen their essential contemplation.
          </div>
          <div class="mvv-block-tags">
            <span class="mvv-block-tag">Co-creation</span>
            <span class="mvv-block-tag">Technology × Humanity</span>
            <span class="mvv-block-tag">Society</span>
          </div>
        </div>
        <!-- VALUES -->
        <div class="mvv-block" style="--mvv-color: #e06878">
          <div class="mvv-block-header">
            <svg class="mvv-block-icon" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
              <polygon points="24,4 44,18 38,42 10,42 4,18"/>
              <polygon points="24,14 34,22 31,34 17,34 14,22"/>
            </svg>
            <div>
              <p class="mvv-block-label">Values</p>
              <div class="mvv-block-title" data-lang="ja">大切にしている価値観</div>
              <div class="mvv-block-title" data-lang="en">Core Values</div>
            </div>
          </div>
          <div class="mvv-values-list" data-lang="ja">
            <div class="mvv-values-item">
              <span class="mvv-values-num">01</span>
              <div>
                <div class="mvv-values-item-title">対話を重んじ、熱を連鎖させる</div>
                <div class="mvv-values-item-body">常に「対話」を中心に据え、純粋な探求心と「熱量」を共有できる人々と共に本質的な課題に取り組む。</div>
              </div>
            </div>
            <div class="mvv-values-item">
              <span class="mvv-values-num">02</span>
              <div>
                <div class="mvv-values-item-title">越境し、自ら形にする</div>
                <div class="mvv-values-item-body">分野の垣根を越えた協働を心から楽しみ、アイディアを単なる構想で終わらせず、プログラミングやデザインを通じて自らの手で形にする。</div>
              </div>
            </div>
            <div class="mvv-values-item">
              <span class="mvv-values-num">03</span>
              <div>
                <div class="mvv-values-item-title">デジタルとアナログの往復</div>
                <div class="mvv-values-item-body">テクノロジーの利便性をフル活用しながらも、人文学が培ってきた深くアナログな思考法を決して手放さない。</div>
              </div>
            </div>
          </div>
          <div class="mvv-values-list" data-lang="en">
            <div class="mvv-values-item">
              <span class="mvv-values-num">01</span>
              <div>
                <div class="mvv-values-item-title">Prioritizing Dialogue &amp; Chaining Passions</div>
                <div class="mvv-values-item-body">Always placing "dialogue" at the core, I tackle essential challenges alongside those who share a pure sense of curiosity and deep "passion."</div>
              </div>
            </div>
            <div class="mvv-values-item">
              <span class="mvv-values-num">02</span>
              <div>
                <div class="mvv-values-item-title">Crossing Borders &amp; Hands-on Implementation</div>
                <div class="mvv-values-item-body">Genuinely enjoying collaboration across disciplinary boundaries, I do not let ideas end as mere concepts; I shape them with my own hands through code and design.</div>
              </div>
            </div>
            <div class="mvv-values-item">
              <span class="mvv-values-num">03</span>
              <div>
                <div class="mvv-values-item-title">Traversing Analog and Digital</div>
                <div class="mvv-values-item-body">While fully utilizing the convenience of digital tools, I firmly hold onto the deep, analog analytical thinking cultivated by the humanities.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- STRENGTHS -->
  <div style="padding: 90px 0; border-bottom: 1px solid var(--line);">
    <div style="max-width:1100px; margin:0 auto; padding:0 48px 56px;">
      <p class="sec-label">Profile</p>
      <h2 class="sec-title" data-lang="ja">強み／仕事のスタイルと課題</h2>
      <h2 class="sec-title" data-lang="en">Strengths &amp; Working Style</h2>
    </div>
    <div style="max-width:1100px; margin:0 auto; padding:0 48px;">
      <div class="str-stack">

        <!-- Strengths Block -->
        <div class="str-block" style="--str-color:#7eb8c9">
          <div class="str-block-header">
            <svg class="str-block-icon" viewBox="0 0 48 48">
              <path d="M4 8h16v10c0 3.3-2.7 6-6 6s-6-2.7-6-6V8z"/>
              <path d="M24 8h20v10c0 3.3-2.7 6-6 6h-2c-3.3 0-6-2.7-6-6V8z"/>
              <path d="M20 24c0 3.3 2.7 6 6 6"/>
              <path d="M14 24v10c0 3.3 2.7 6 6 6h8c3.3 0 6-2.7 6-6V30"/>
            </svg>
            <div>
              <div class="str-block-label">Strengths</div>
              <div class="str-block-title" data-lang="ja">デジタルと人文学を架橋する「実践力」</div>
              <div class="str-block-title" data-lang="en">Bridging Digital &amp; Humanities</div>
            </div>
          </div>
          <div class="str-block-body" data-lang="ja">
            最先端のデジタル技術と、人文社会科学が大切にしてきたアナログな思考法を融合させるアプローチを得意としています。アイディアを形にし、社会に発信するまでのプロセスをワンストップで実行することができます。
          </div>
          <div class="str-block-body" data-lang="en">
            My primary strength lies in harmonizing cutting-edge digital tools with the deeply analytical, "analog" thinking foundational to the humanities. I can seamlessly execute from ideation through to public delivery in a one-stop workflow.
          </div>
          <div class="str-block-tags">
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7L12 12L22 7L12 2Z"/><path d="M2 17L12 22L22 17"/><path d="M2 12L12 17L22 12"/></svg></span>
              <span data-lang="ja">プログラミング</span><span data-lang="en">Programming</span>
            </span>
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2A15.3 15.3 0 0 1 15.54 12 15.3 15.3 0 0 1 12 22 15.3 15.3 0 0 1 8.46 12 15.3 15.3 0 0 1 12 2Z"/></svg></span>
              <span data-lang="ja">ウェブ開発</span><span data-lang="en">Web Dev</span>
            </span>
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="7.5 4.21 12 6.81 16.5 4.21"/><polyline points="7.5 19.79 7.5 14.6 3 12"/><polyline points="21 12 16.5 14.6 16.5 19.79"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg></span>
              <span data-lang="ja">AI・生成AI</span><span data-lang="en">AI / GenAI</span>
            </span>
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></span>
              <span data-lang="ja">データ分析</span><span data-lang="en">Data Analysis</span>
            </span>
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20H2"/><path d="M12 20V10"/><circle cx="12" cy="7" r="3"/><path d="M22 20H12"/><path d="M19 17V14"/><path d="M22 14H16"/></svg></span>
              <span data-lang="ja">デザイン</span><span data-lang="en">Design</span>
            </span>
            <span class="str-block-tag">
              <span class="str-block-tag-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg></span>
              <span data-lang="ja">SNS運用</span><span data-lang="en">Social Media</span>
            </span>
          </div>
        </div>

        <!-- Working Style Block -->
        <div class="str-block" style="--str-color:#b09ac8">
          <div class="str-block-header">
            <svg class="str-block-icon" viewBox="0 0 48 48">
              <path d="M24 44C24 44 4 32 4 18c0-5.5 4.5-10 10-10 3.8 0 7.2 2.1 8.8 5.3h2.4C26.8 10.1 30.2 8 34 8c5.5 0 10 4.5 10 10 0 14-20 26-20 26z"/>
              <path d="M24 18v8" stroke-width="2"/>
              <path d="M20 22h8" stroke-width="2"/>
            </svg>
            <div>
              <div class="str-block-label">Working Style</div>
              <div class="str-block-title" data-lang="ja">「欲」ではなく「熱」で駆動する</div>
              <div class="str-block-title" data-lang="en">Driven by Passion, Not Profit</div>
            </div>
          </div>
          <div class="str-block-body" data-lang="ja">
            <div class="str-section">
              <div class="str-section-label str-plus">Synergy &mdash; 熱量が合うとき</div>
              <div class="str-section-body">
                純粋な「熱（情熱）」を原動力として動きます。自分の心が動くテーマには爆発的なエネルギーを注ぎ、どこまでも頑張ることができます。「熱量」を共有できる方との協働では大きな相乗効果を生みます。
              </div>
            </div>
            <div class="str-divider"></div>
            <div class="str-section">
              <div class="str-section-label str-delta">Challenge &mdash; 課題</div>
              <div class="str-section-body">
                熱意を感じられない環境や、情熱を失ってしまった人との仕事では、正直なところ少し不器用になってしまう面があります。モチベーションの維持に苦労することも。
              </div>
            </div>
          </div>
          <div class="str-block-body" data-lang="en">
            <div class="str-section">
              <div class="str-section-label str-plus">Synergy &mdash; When Passion Aligns</div>
              <div class="str-section-body">
                I am driven by genuine passion. I pour boundless energy into projects that spark my curiosity, and I create strong synergy in collaborative environments with passionate individuals.
              </div>
            </div>
            <div class="str-divider"></div>
            <div class="str-section">
              <div class="str-section-label str-delta">Challenge &mdash; Areas for Growth</div>
              <div class="str-section-body">
                I struggle to maintain motivation for tasks that lack an internal spark, and find it challenging to work effectively in environments where enthusiasm has faded.
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- CAREER -->
  <section id="sec-career">
    <p class="sec-label">Career</p>
    <h2 class="sec-title" data-lang="ja">経歴</h2>
    <h2 class="sec-title" data-lang="en">Academic Career (Selected)</h2>

    <!-- Career Card List -->
    <div id="career-card-list" class="reveal">
      <div id="career-card-filters"></div>
      <div id="career-card-grid"></div>
    </div>

    <!-- Career Network -->
    <div id="career-network" class="network-wrap reveal">
      <p class="network-label">
        <span data-lang="ja">経歴トピックネットワーク</span>
        <span data-lang="en">Career Topic Network</span>
      </p>
      <p class="network-hint">
        <span data-lang="ja">ドラッグで移動 / ホイールでズーム / クリックでフィルタ</span>
        <span data-lang="en">Drag to move / Scroll to zoom / Click to filter</span>
      </p>
      <div id="career-network-container"><svg id="career-network-svg"></svg></div>
      <div id="career-network-tooltip"></div>
      <div id="career-network-legend"></div>
    </div>

    <div id="career-timeline-wrap" class="reveal" style="margin-top: 48px;">
      <p class="network-label">
        <span data-lang="ja">経歴タイムライン</span>
        <span data-lang="en">Career Timeline</span>
      </p>
      <div id="career-timeline" style="position: relative;">
        <svg id="career-timeline-svg"></svg>
        <div id="career-timeline-tooltip"></div>
      </div>
    </div>

    <div class="career-static-list">
    <div class="career-list" style="margin-top: 56px;">
      <div class="career-item" data-tenure-end="2053.03">
        <span class="career-period">2025.04 — <span data-lang="ja">現在</span><span data-lang="en">Present</span></span>
        <div>
          <div class="career-body">
            <span data-lang="ja">大阪大学 大学院人文学研究科 人文学林</span>
            <span data-lang="en">Interdisciplinary Network in the Humanities, Graduate School of Humanities, The University of Osaka</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">講師</span><span data-lang="en">Lecturer</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Humanities">Humanities</span>
            <span class="topic-tag" data-tag="Digital Humanities">Digital Humanities</span>
            <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
          </div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2022.04 — 2025.03</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">大阪大学 大学院人文学研究科 人文学林</span>
            <span data-lang="en">Interdisciplinary Network in the Humanities, Graduate School of Humanities, The University of Osaka</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">特任助教（常勤）</span><span data-lang="en">Specially Appointed Assistant Professor</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Humanities">Humanities</span>
            <span class="topic-tag" data-tag="Digital Humanities">Digital Humanities</span>
            <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
          </div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2022.04 — 2024.03</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">慶應義塾大学 理工学部</span>
            <span data-lang="en">Faculty of Science and Technology, Keio University</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">研究員（非常勤・兼任）</span><span data-lang="en">Researcher (Part-time)</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="STS">STS</span></div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2021.07 — 2022.03</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">慶應義塾大学 理工学部</span>
            <span data-lang="en">Faculty of Science and Technology, Keio University</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">研究員</span><span data-lang="en">Researcher</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="STS">STS</span></div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2020.05 — 2021.12</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">大阪大学 大学院人間科学研究科 基礎人間科学講座（科学技術と文化）</span>
            <span data-lang="en">Graduate School of Human Sciences, Osaka University</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">特任研究員</span><span data-lang="en">Specially Appointed Researcher</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="STS">STS</span>
            <span class="topic-tag" data-tag="Anthropology">Anthropology</span>
          </div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2017.04 — 2018.03</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">大阪大学 COデザインセンター</span>
            <span data-lang="en">Center for the Study of Co* Design, Osaka University</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">特任助教（常勤）</span><span data-lang="en">Specially Appointed Assistant Professor</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="STS">STS</span>
            <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
          </div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2015.08 — 2017.03</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">国立循環器病研究センター 研究開発基盤センター 医学倫理研究部</span>
            <span data-lang="en">Department of Medical Ethics, National Cerebral and Cardiovascular Center</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">研究員（非常勤）</span><span data-lang="en">Researcher (Part-time)</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Research Ethics">Research Ethics</span></div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2014.04 — 2015.07</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">日本学術振興会</span>
            <span data-lang="en">Japan Society for the Promotion of Science</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">特別研究員（DC2）</span><span data-lang="en">JSPS Research Fellow (DC2)</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
        </div>
      </div>
      <div class="career-item">
        <span class="career-period">2014.04 — 2014.07</span>
        <div>
          <div class="career-body">
            <span data-lang="ja">自然科学研究機構 基礎生物学研究所 光脳回路研究部門</span>
            <span data-lang="en">Division of Brain Circuit, National Institute for Basic Biology</span>
          </div>
          <div class="career-role">
            <span data-lang="ja">特別共同利用研究員</span><span data-lang="en">Visiting Scientist</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Neuroscience">Neuroscience</span></div>
        </div>
      </div>
    </div>

    <div style="margin-top: 64px;">
      <p class="sec-label" style="margin-bottom: 32px;">
        <span data-lang="ja">学位</span>
        <span data-lang="en">Degrees</span>
      </p>
      <div class="career-list">
        <div class="career-item">
          <span class="career-period">2022.03</span>
          <div class="career-body">
            <span data-lang="ja">博士（人間科学）— 大阪大学</span>
            <span data-lang="en">Ph.D. in Human Sciences — Osaka University</span>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2012.03</span>
          <div class="career-body">
            <span data-lang="ja">修士（情報科学）— 名古屋大学</span>
            <span data-lang="en">M.S. in Information Science — Nagoya University</span>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2010.03</span>
          <div class="career-body">
            <span data-lang="ja">学士（学術）— 岩手大学</span>
            <span data-lang="en">B.A. — Iwate University</span>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2008.03</span>
          <div class="career-body">
            <span data-lang="ja">準学士（工学）— 国立秋田高専</span>
            <span data-lang="en">Associate Degree in Engineering — Akita National College of Technology</span>
          </div>
        </div>
      </div>
    </div>

    <div style="margin-top: 64px;">
      <p class="sec-label" style="margin-bottom: 32px;">
        <span data-lang="ja">学歴</span>
        <span data-lang="en">Education</span>
      </p>
      <div class="career-list">
        <div class="career-item">
          <span class="career-period">2012.04 — 2015.03</span>
          <div>
            <div class="career-body">
              <span data-lang="ja"><a href="https://www.bun.kyoto-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">京都大学 大学院文学研究科</a> 現代文化学専攻 科学哲学科学史専修（博士後期課程）</span>
              <span data-lang="en">Doctoral Program, Dept. of Philosophy and History of Science, <a href="https://www.bun.kyoto-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">Graduate School of Letters, Kyoto University</a></span>
            </div>
            <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2010.04 — 2012.03</span>
          <div>
            <div class="career-body">
              <span data-lang="ja"><a href="https://www.is.nagoya-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">名古屋大学 大学院情報科学研究科</a> 社会システム情報学専攻（博士前期課程）</span>
              <span data-lang="en">Master's Program, Dept. of Social Systems and Informatics, <a href="https://www.is.nagoya-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">Graduate School of Information Science, Nagoya University</a></span>
            </div>
            <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
              <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
              <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
            </div>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2008.04 — 2010.03</span>
          <div>
            <div class="career-body">
              <span data-lang="ja"><a href="https://jinsha.iwate-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">岩手大学 人文社会科学部</a> 人間科学課程（学士課程）</span>
              <span data-lang="en">Undergraduate Program, Course in Human Sciences, <a href="https://jinsha.iwate-u.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">Faculty of Humanities and Social Sciences, Iwate University</a></span>
            </div>
            <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
              <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
              <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
            </div>
          </div>
        </div>
        <div class="career-item">
          <span class="career-period">2003.04 — 2008.03</span>
          <div>
            <div class="career-body">
              <span data-lang="ja"><a href="https://www.akita-nct.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">秋田工業高等専門学校</a> 環境都市工学科</span>
              <span data-lang="en">Dept. of Environmental and Civil Engineering, <a href="https://www.akita-nct.ac.jp" target="_blank" rel="noopener noreferrer" style="color:inherit; border-bottom:1px solid var(--line); text-decoration:none;">Akita National College of Technology</a></span>
            </div>
            <div style="margin-top:6px;"><span class="topic-tag" data-tag="Technology">Technology</span></div>
          </div>
        </div>
      </div>
    </div>
    </div><!-- /career-static-list -->
  </section>

  <!-- RESEARCH -->
  <section id="sec-research">
    <p class="sec-label">Research</p>
    <h2 class="sec-title" data-lang="ja">研究</h2>
    <h2 class="sec-title" data-lang="en">Research Overview</h2>

    <div style="margin-top: 56px;">

      <!-- Vision statement -->
      <div class="ro-vision">
        <div class="ro-vision-title" data-lang="ja">生成AI時代における「百学連環」の実現</div>
        <div class="ro-vision-title" data-lang="en">Implementing "Hyakugaku Renkan" in the Age of Generative AI</div>
        <div class="ro-vision-body" data-lang="ja">
          現代の複雑に絡み合う社会技術的現象を解き明かすためには、単一の専門分野に留まらない視座が必要です。私は「デジタルSTS」「デジタル科学哲学」「デジタル人類学」という3つの柱を軸に、多様な分野・方法・テーマを一つの輪として繋ぐ「一人学際」の立場で研究を進めています。AIが自律的に知を生成するこの時代において、分断された科学技術と知識構造を再び連環させること。そして、諸学問の繋がりを描いた「百学連環」を単なる歴史的思想として終わらせず、現代社会における具体的な「現象の分析」を通じて実現していくことが、私の目標です。
        </div>
        <div class="ro-vision-body" data-lang="en">
          To unravel the complex and intertwined socio-technical phenomena of today, a perspective that transcends any single discipline is essential. I conduct my research from the standpoint of "solo interdisciplinarity"—connecting diverse fields, methods, and themes into a single cohesive loop, built upon three core pillars: Digital STS, Digital Philosophy of Science, and Digital Anthropology. In this era where AI autonomously generates knowledge, my goal is to reconnect our fragmented scientific technologies and knowledge structures. Ultimately, I aim to realize "Hyakugaku-Renkan" (the interconnectedness of all disciplines)—not merely leaving it as a historical philosophy, but bringing it to life through the concrete "analysis of phenomena" in contemporary society.
        </div>
      </div>

      <!-- Concept Map -->
      <div id="concept-map-wrap" class="network-wrap reveal">
        <p class="network-label">
          <span data-lang="ja">百学連環マップ</span>
          <span data-lang="en">Hyakugaku Renkan Map</span>
        </p>
        <p class="network-hint">
          <span data-lang="ja">ホバーで説明 / ドラッグで移動 / ホイールでズーム</span>
          <span data-lang="en">Hover for details / Drag to move / Scroll to zoom</span>
        </p>
        <p class="network-hint" style="margin-top:2px; opacity:0.5;">
          <span data-lang="ja">● 分野　■ テーマ　◆ 方法</span>
          <span data-lang="en">● Field　■ Theme　◆ Method</span>
        </p>
        <div id="concept-map-container"><svg id="concept-map-svg"></svg></div>
        <div id="concept-map-tooltip"></div>
      </div>

      <!-- 3 Pillars -->
      <div class="ro-pillars">

        <div class="ro-pillar" style="--pillar-color:#4dc4a8; --pillar-glow:rgba(77,196,168,0.10)">
          <div class="ro-pillar-num">01</div>
          <span class="ro-pillar-tag" style="color:#4dc4a8; border-color:rgba(77,196,168,0.35)">Digital STS</span>
          <div class="ro-pillar-name" data-lang="ja">テクノロジーと社会の共創</div>
          <div class="ro-pillar-name" data-lang="en">Co-creating Technology &amp; Society</div>
          <div class="ro-pillar-body" data-lang="ja">
            AIを単なる効率化のツールとして消費するのではなく、テクノロジーと人間社会がどう共創し得るのか、その望ましい関係性を探求する。技術の開発・導入・運用をめぐる社会的動態をデジタル手法で分析し、科学技術と社会の接点を可視化する。
          </div>
          <div class="ro-pillar-body" data-lang="en">
            Rather than merely consuming AI as a tool for efficiency, exploring how technology and human society can co-create and what desirable relationships look like. Analyzing social dynamics around technology through digital methods to visualize the intersection of science, technology, and society.
          </div>
        </div>

        <div class="ro-pillar" style="--pillar-color:#8e7fd4; --pillar-glow:rgba(142,127,212,0.10)">
          <div class="ro-pillar-num">02</div>
          <span class="ro-pillar-tag" style="color:#8e7fd4; border-color:rgba(142,127,212,0.35)">Digital Philosophy of Science</span>
          <div class="ro-pillar-name" data-lang="ja">知識構造の俯瞰と再編</div>
          <div class="ro-pillar-name" data-lang="en">Surveying &amp; Reorganizing Knowledge</div>
          <div class="ro-pillar-body" data-lang="ja">
            高度に専門化した知識構造を俯瞰し、機械学習やコーパス分析を用いて科学の概念的基盤を再検討する。分野横断的な知の地図を描き出し、生成AI時代にふさわしい学問連携の新たなモデルを構築する。
          </div>
          <div class="ro-pillar-body" data-lang="en">
            Surveying highly specialized knowledge structures and re-examining the conceptual foundations of science through machine learning and corpus analysis. Mapping interdisciplinary knowledge to build new models of academic collaboration for the age of Generative AI.
          </div>
        </div>

        <div class="ro-pillar" style="--pillar-color:#c8a96e; --pillar-glow:rgba(200,169,110,0.10)">
          <div class="ro-pillar-num">03</div>
          <span class="ro-pillar-tag" style="color:#c8a96e; border-color:rgba(200,169,110,0.35)">Digital Anthropology</span>
          <div class="ro-pillar-name" data-lang="ja">デジタル空間の人類学的探究</div>
          <div class="ro-pillar-name" data-lang="en">Anthropological Inquiry in Digital Spaces</div>
          <div class="ro-pillar-body" data-lang="ja">
            被災地移住者のデジタル空間における生活実践を記録し、ハイパーリンク・エスノグラフィなど新たな方法論で人間の経験を描き出す。デジタルとフィジカルが交差する現場で、テクノロジーがもたらす社会変容を人類学的に捉える。
          </div>
          <div class="ro-pillar-body" data-lang="en">
            Documenting digital practices of disaster-area migrants and depicting human experiences through novel methodologies like hyperlink ethnography. Capturing the social transformations brought by technology from an anthropological perspective at the intersection of digital and physical worlds.
          </div>
        </div>

      </div>

      <!-- Implementation highlight -->
      <div class="ro-impl">
        <div class="ro-impl-label" data-lang="ja">実装する人文学</div>
        <div class="ro-impl-label" data-lang="en">Humanities in Practice</div>
        <div class="ro-impl-body" data-lang="ja">
          人文学的な深い思索にとどまらず、自らプログラミングやデータ分析、生成AIの活用を行い、デザインやウェブ構築を通じて「実装」する。AIが答えを出せる時代だからこそ、人文学が培ってきた「アナログな思考」と「本質的な問い」を実践的に融合させ、異なる分野の知を繋ぐ新たな対話のプラットフォームを構築しています。
        </div>
        <div class="ro-impl-body" data-lang="en">
          Beyond deep humanistic contemplation, I actively bring ideas to life through programming, data analysis, the practical application of generative AI, design, and web development. Precisely because we live in an age where AI can readily provide answers, I practically fuse the "analog thinking" and "essential questioning" cultivated by the humanities to build new interactive platforms that bridge knowledge across diverse disciplines.
        </div>
      </div>

    </div>
  </section>

  <!-- PUBLICATIONS -->
  <section id="sec-publications">
    <p class="sec-label">Publications</p>
    <h2 class="sec-title" data-lang="ja">業績</h2>
    <h2 class="sec-title" data-lang="en">Selected Publications</h2>

    <div id="pub-stats" class="reveal">
      <div class="proj-stats-grid">
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="14">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">業績</span>
            <span data-lang="en">Publications</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="11">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">論文</span>
            <span data-lang="en">Papers</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="3">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">著書・翻訳</span>
            <span data-lang="en">Books</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num proj-stat-range" data-from="2013" data-to="2025">2013–2025</div>
          <div class="proj-stat-label">
            <span data-lang="ja">出版期間</span>
            <span data-lang="en">Period</span>
          </div>
        </div>
      </div>
      <div id="pub-tag-dist">
        <p class="network-label">
          <span data-lang="ja">トピック分布</span>
          <span data-lang="en">Topic Distribution</span>
        </p>
        <div id="pub-tag-bars"></div>
      </div>
    </div>

    <div id="pub-card-list" class="reveal">
      <div id="pub-card-filters"></div>
      <div id="pub-card-grid"></div>
    </div>

    <div id="pub-network" class="network-wrap reveal">
      <p class="network-label">
        <span data-lang="ja">業績トピックネットワーク</span>
        <span data-lang="en">Publication Topic Network</span>
      </p>
      <p class="network-hint">
        <span data-lang="ja">ドラッグで移動 / ホイールでズーム / クリックでフィルタ</span>
        <span data-lang="en">Drag to move / Scroll to zoom / Click to filter</span>
      </p>
      <div id="pub-network-container"><svg id="pub-network-svg"></svg></div>
      <div id="pub-network-tooltip"></div>
      <div id="pub-network-legend"></div>
    </div>

    <div id="pub-timeline-wrap" class="reveal" style="margin-top: 48px;">
      <p class="network-label">
        <span data-lang="ja">業績タイムライン</span>
        <span data-lang="en">Publication Timeline</span>
      </p>
      <div id="pub-timeline" style="position: relative;">
        <svg id="pub-timeline-svg"></svg>
        <div id="pub-timeline-tooltip"></div>
      </div>
    </div>

    <div id="pub-static-list">
    <!-- 論文 -->
    <p class="grant-group-label" data-lang="ja" style="margin-top: 56px;">論文</p>
    <p class="grant-group-label" data-lang="en" style="margin-top: 56px;">Papers</p>
    <div class="pub-list" style="margin-top: 16px;">

      <div class="pub-item">
        <span class="pub-year">2025.04</span>
        <div>
          <a href="https://www.jstage.jst.go.jp/article/jjcanth/89/4/89_581/_article/-char/ja" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">デジタル空間の多重性：被災地移住のデジタル人類学</div>
            <div class="pub-title" data-lang="en">The Multiplicity of Digital Space: A Digital Anthropology of Disaster-Area Migration</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">菅原裕輝 / 『文化人類学』89(4)</span>
            <span data-lang="en">Yuki Sugawara / <i>Japanese Journal of Cultural Anthropology</i> 89(4)</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Anthropology">Digital Anthropology</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.02</span>
        <div>
          <a href="https://f-gakkai.net/wp-content/uploads/2025/02/25-06.pdf" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">津波被災地域における期待の調整：南三陸町の資源循環型復興ビジョンと移住者のビジョン</div>
            <div class="pub-title" data-lang="en">Adjusting Expectations in Tsunami-Affected Areas: Recovery Vision and Migrants' Vision in Minamisanriku</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">菅原裕輝, 山﨑真帆 / 『日本災害復興学会論文集』25, pp.36–47</span>
            <span data-lang="en">Yuki Sugawara, Maho Yamazaki / <i>Journal of Japan Society for Disaster Resilience</i> 25, pp.36–47</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Anthropology">Anthropology</span>
            <span class="topic-tag" data-tag="STS">STS</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2024.03</span>
        <div>
          <a href="https://www.jstage.jst.go.jp/article/jaecslex/6/0/6_71/_article" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title">Revisiting Semantic Prosody of Cause: A Sentiment Analysis</div>
          </a>
          <div class="pub-detail">Yuki Sugawara, Kazuho Kambara / <i>Journal of Corpus-based Lexicology Studies</i> 6, pp.71–92</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2023.10</span>
        <div>
          <a href="https://www.jstage.jst.go.jp/article/jafpos/32/0/32_23/_article/-char/ja" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title">The Many Uses of Explain: Quantitative Corpus Method and Philosophy of Science</div>
          </a>
          <div class="pub-detail">Yuki Sugawara, Kazuho Kambara / <i>Annals of the Japan Association for Philosophy of Science</i> 32(2), pp.23–46</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2023.10</span>
        <div>
          <a href="https://www.jstage.jst.go.jp/article/jafpos/32/0/32_17/_article/-char/ja" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title">Philosophy with and for Data Science: Setting the Scene</div>
          </a>
          <div class="pub-detail">Yuki Sugawara / <i>Annals of the Japan Association for Philosophy of Science</i> 32(2), pp.17–22</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.12</span>
        <div>
          <div class="pub-title">How 'empirical' is corpus linguistics?: A meta-analysis using formal concept analysis</div>
          <div class="pub-detail">Kazuho Kambara, Yuki Sugawara, Norihisa Takahashi / <i>Proceedings of the 39th Pacific Asia Conference on Language, Information and Computation</i>, pp.635–645</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2023.05</span>
        <div>
          <a href="https://ir.library.osaka-u.ac.jp/repo/ouka/all/91699/" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">南三陸の復興に関するハイパーリンク・エスノグラフィ</div>
            <div class="pub-title" data-lang="en">Hyperlink Ethnography Regarding Reconstruction in Minamisanriku</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">菅原裕輝 / 『テクストマイニングとデジタルヒューマニティーズ』2022, pp.5–18</span>
            <span data-lang="en">Yuki Sugawara / <i>Text Mining and Digital Humanities</i> 2022, pp.5–18</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Anthropology">Digital Anthropology</span></div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2017.11</span>
        <div>
          <a href="http://www.tamagawa-up.jp/book/b326026.html" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">誰をオーサーにするべきか？：「オリジナリティー」の分野特性を考慮した自律的オーサーシップの提案</div>
            <div class="pub-title" data-lang="en">Who Should Be an Author?: A Proposal for Autonomous Authorship Considering Field-Specific Characteristics of "Originality"</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">菅原裕輝, 松井健志 / 『科学技術社会論研究』(14), pp.77–89</span>
            <span data-lang="en">Yuki Sugawara, Kenji Matsui / <i>Science, Technology and Society Studies</i> (14), pp.77–89</span>
          </div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="STS">STS</span>
            <span class="topic-tag" data-tag="Research Ethics">Research Ethics</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2015.10</span>
        <div>
          <div class="pub-title">What is New with the New Mechanistic Philosophy? Comments on <i>In search of Mechanisms: Discoveries across the Life Sciences</i></div>
          <div class="pub-detail">Yuki Sugawara, Hisashi Nakao / <i>Taiwanese Journal for Science, Technology and Medicine</i> 21, pp.233–240</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
            <span class="topic-tag" data-tag="Neuroscience">Neuroscience</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2014.12</span>
        <div>
          <a href="http://kiss.kstudy.com/journal/thesis_name.asp?tname=kiss2002&key=3292054" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title">Causal Mechanisms in Neurosciences</div>
          </a>
          <div class="pub-detail">Yuki Sugawara / <i>Korean Journal for the Philosophy of Science</i> 17(3), pp.53–68</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
            <span class="topic-tag" data-tag="Neuroscience">Neuroscience</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2013.02</span>
        <div>
          <a href="https://repository.kulib.kyoto-u.ac.jp/dspace/bitstream/2433/203249/1/capes_1_50.pdf" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title">Mechanistic stance: An epistemic norm among scientists</div>
          </a>
          <div class="pub-detail">Yuki Sugawara, Hisashi Nakao / <i>Proceedings of CAPE International Workshops, 2012</i>, pp.50–59</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span>
            <span class="topic-tag" data-tag="Neuroscience">Neuroscience</span>
          </div>
        </div>
      </div>

    </div>

    <!-- 著書・翻訳 -->
    <p class="grant-group-label" data-lang="ja" style="margin-top: 56px;">著書・翻訳</p>
    <p class="grant-group-label" data-lang="en" style="margin-top: 56px;">Books &amp; Translations</p>
    <div style="display:flex; flex-direction:column; gap:0; border: 1px solid var(--line); margin-top: 16px;">

      <div class="pub-item-book" style="border-bottom: 1px solid var(--line); padding: 32px 0;">
        <a href="https://www.nakanishiya.co.jp/book/b10081169.html" target="_blank" rel="noopener noreferrer">
          <img src="image/book_kagaku.jpg" alt="入門 科学技術と社会" class="pub-book-cover" />
        </a>
        <div>
          <div class="pub-type-badge pub-type-book" data-lang="ja">著書（分担執筆）</div>
          <div class="pub-type-badge pub-type-book" data-lang="en">Book (Contributing Author)</div>
          <a href="https://www.nakanishiya.co.jp/book/b10081169.html" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">入門 科学技術と社会</div>
            <div class="pub-title" data-lang="en">Introduction to Science, Technology and Society</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">標葉隆馬・見上公一（編） / ナカニシヤ出版 / 2024年5月10日 / ISBN: 978-4-7795-1779-2</span>
            <span data-lang="en">Eds. Takuma Shineha, Koichi Mikami / Nakanishiya Shuppan / 10 May 2024 / ISBN: 978-4-7795-1779-2</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="STS">STS</span></div>
        </div>
      </div>

      <div class="pub-item-book" style="border-bottom: 1px solid var(--line); padding: 32px 0;">
        <a href="https://www.unp.or.jp/ISBN/ISBN978-4-8158-0807-5.html" target="_blank" rel="noopener noreferrer">
          <img src="image/book_seishin.jpg" alt="精神医学の科学哲学" class="pub-book-cover" />
        </a>
        <div>
          <div class="pub-type-badge pub-type-trans" data-lang="ja">翻訳（共訳）</div>
          <div class="pub-type-badge pub-type-trans" data-lang="en">Translation (co-trans.)</div>
          <a href="https://www.unp.or.jp/ISBN/ISBN978-4-8158-0807-5.html" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">精神医学の科学哲学</div>
            <div class="pub-title" data-lang="en">Psychiatry and Philosophy of Science</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">レイチェル・クーパー 著 / 伊勢田哲治・村井俊哉・植野仙経・中尾央・川島啓嗣・菅原裕輝 訳 / 名古屋大学出版会 / 2015年6月19日 / ISBN: 978-4-8158-0807-4</span>
            <span data-lang="en">Rachel Cooper (auth.) / trans. Tetsuji Iseda, Toshiya Murai, Sennyo Ueno, Hisashi Nakao, Keiji Kawashima, Yuki Sugawara / Nagoya University Press / 19 Jun 2015 / ISBN: 978-4-8158-0807-4</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
        </div>
      </div>

      <div class="pub-item-book" style="padding: 32px 0;">
        <a href="https://www.keisoshobo.co.jp/book/b146467.html" target="_blank" rel="noopener noreferrer">
          <img src="image/book_shinka.jpg" alt="進化の弟子" class="pub-book-cover" />
        </a>
        <div>
          <div class="pub-type-badge pub-type-trans" data-lang="ja">翻訳（共訳）</div>
          <div class="pub-type-badge pub-type-trans" data-lang="en">Translation (co-trans.)</div>
          <a href="https://www.keisoshobo.co.jp/book/b146467.html" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">進化の弟子：ヒトは学んで人になった</div>
            <div class="pub-title" data-lang="en">Apprenticed to Evolution: Schooling and the Origins of Mind</div>
          </a>
          <div class="pub-detail">
            <span data-lang="ja">キム・ステレルニー 著 / 田中泉吏・中尾央・源河亨・菅原裕輝 訳 / 勁草書房 / 2013年12月26日 / ISBN: 978-4-326-19964-9</span>
            <span data-lang="en">Kim Sterelny (auth.) / trans. Izuri Tanaka, Hisashi Nakao, Toru Genka, Yuki Sugawara / Keiso Shobo / 26 Dec 2013 / ISBN: 978-4-326-19964-9</span>
          </div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
        </div>
      </div>

    </div>
    </div><!-- /pub-static-list -->

    <div style="margin-top: 40px;">
      <a href="https://researchmap.jp/yukisugawara" target="_blank" rel="noopener noreferrer" style="font-size: 12px; letter-spacing: 0.12em; color: var(--accent); text-decoration: none; border-bottom: 1px solid var(--accent); padding-bottom: 2px; text-transform: uppercase;">
        <span data-lang="ja">researchmap で全業績を見る →</span>
        <span data-lang="en">View full list on researchmap →</span>
      </a>
    </div>
  </section>

  <!-- RESEARCH PROJECTS -->
  <section id="sec-projects">
    <p class="sec-label">Grants &amp; Projects</p>
    <h2 class="sec-title" data-lang="ja">研究プロジェクト</h2>
    <h2 class="sec-title" data-lang="en">Research Projects &amp; Grants</h2>

    <div id="proj-stats" class="reveal">
      <div class="proj-stats-grid">
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="17">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">研究プロジェクト</span>
            <span data-lang="en">Projects</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="10">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">代表者</span>
            <span data-lang="en">PI</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="7">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">分担者</span>
            <span data-lang="en">Co-PI</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num proj-stat-range" data-from="2013" data-to="2030">2013–2030</div>
          <div class="proj-stat-label">
            <span data-lang="ja">活動期間</span>
            <span data-lang="en">Period</span>
          </div>
        </div>
      </div>
      <div id="proj-tag-dist">
        <p class="network-label">
          <span data-lang="ja">トピック分布</span>
          <span data-lang="en">Topic Distribution</span>
        </p>
        <div id="proj-tag-bars"></div>
      </div>
    </div>

    <div id="proj-card-list" class="reveal">
      <div id="proj-card-filters"></div>
      <div id="proj-card-grid"></div>
    </div>

    <div id="research-network" class="network-wrap reveal">
      <p class="network-label">
        <span data-lang="ja">研究トピックネットワーク</span>
        <span data-lang="en">Research Topic Network</span>
      </p>
      <p class="network-hint">
        <span data-lang="ja">ドラッグで移動 / ホイールでズーム / クリックでフィルタ</span>
        <span data-lang="en">Drag to move / Scroll to zoom / Click to filter</span>
      </p>
      <div id="network-container"><svg id="network-svg"></svg></div>
      <div id="network-tooltip"></div>
      <div id="network-legend"></div>
    </div>

    <div id="project-timeline-wrap" class="reveal" style="margin-top: 48px;">
      <p class="network-label">
        <span data-lang="ja">プロジェクトタイムライン</span>
        <span data-lang="en">Project Timeline</span>
      </p>
      <div id="project-timeline" style="position: relative;">
        <svg id="timeline-svg"></svg>
        <div id="timeline-tooltip"></div>
      </div>
    </div>

    <div id="grant-static-list">
    <!-- 代表者 -->
    <p class="grant-group-label" data-lang="ja">代表者</p>
    <p class="grant-group-label" data-lang="en">Principal Investigator</p>
    <div class="pub-list" style="margin-top: 16px;">

      <div class="pub-item">
        <span class="pub-year">2025.08—2028.03</span>
        <div>
          <a href="https://www.gjs.osaka-u.ac.jp/project/2025b/" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">デジタル人類学で拓く「デジタル日本学」教育のグローバル展開</div>
            <div class="pub-title" data-lang="en">Global Development of "Digital Japanese Studies" Education through Digital Anthropology</div>
          </a>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Anthropology">Digital Anthropology</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">大阪大学グローバル日本学教育研究拠点 拠点形成プロジェクト</span>
            <span class="grant-tag" data-lang="en">Osaka University Global Japanese Studies Education and Research Hub Project</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.04—2027.10</span>
        <div>
          <div class="pub-title" data-lang="ja">深層学習を用いた社会技術的現象の分析</div>
          <div class="pub-title" data-lang="en">Analysis of Sociotechnical Phenomena Using Deep Learning</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital STS">Digital STS</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">栢森情報科学振興財団 2024年度研究助成</span>
            <span class="grant-tag" data-lang="en">Kayamori Foundation of Informational Science Advancement, Research Grant 2024</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.08—2026.03</span>
        <div>
          <div class="pub-title" data-lang="ja">機械学習を用いた知識構造と社会技術的現象の俯瞰的分析</div>
          <div class="pub-title" data-lang="en">Panoramic Analysis of Knowledge Structures and Sociotechnical Phenomena Using Machine Learning</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span>
            <span class="topic-tag" data-tag="Digital STS">Digital STS</span>
          </div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">大阪大学D3センター 学際共創プロジェクト</span>
            <span class="grant-tag" data-lang="en">Osaka University D3 Center Interdisciplinary Co-Creation Project</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2024.04—2026.03</span>
        <div>
          <div class="pub-title" data-lang="ja">津波被災地域の持続可能なまちづくりへ向けたグローカルな未来像の分析</div>
          <div class="pub-title" data-lang="en">Analysis of Glocal Visions for Sustainable Community Development in Tsunami-Affected Areas</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Anthropology">Anthropology</span>
            <span class="topic-tag" data-tag="STS">STS</span>
          </div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">鹿島学術振興財団 2024年度一般研究助成</span>
            <span class="grant-tag" data-lang="en">Kajima Foundation, General Research Grant 2024</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2024.03—2026.02</span>
        <div>
          <div class="pub-title" data-lang="ja">津波被災自治体移住者の語りの記録と分析を基にした共生型地域社会のモデル構築</div>
          <div class="pub-title" data-lang="en">Building a Model of Inclusive Local Communities Based on Documentation and Analysis of Narratives from Migrants in Tsunami-Affected Municipalities</div>
          <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap;">
            <span class="topic-tag" data-tag="Anthropology">Anthropology</span>
            <span class="topic-tag" data-tag="STS">STS</span>
          </div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">上廣倫理財団 研究助成</span>
            <span class="grant-tag" data-lang="en">Uehiro Foundation on Ethics and Education, Research Grant</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2024.04—2025.03</span>
        <div>
          <div class="pub-title" data-lang="ja">ゲノム合成分野におけるバイオベンチャーの動向に関する調査研究</div>
          <div class="pub-title" data-lang="en">Research on Trends in Bio-ventures in the Field of Genome Synthesis</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="STS">STS</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">新技術振興渡辺記念会 科学技術調査研究助成</span>
            <span class="grant-tag" data-lang="en">Watanabe Memorial Foundation for the Advancement of Technology, Research Grant</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2024.08—2025.03</span>
        <div>
          <div class="pub-title" data-lang="ja">機械学習を用いた学際分野の俯瞰的分析</div>
          <div class="pub-title" data-lang="en">Panoramic Analysis of Interdisciplinary Fields Using Machine Learning</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">大阪大学 IDS 学際共創プロジェクト</span>
            <span class="grant-tag" data-lang="en">Osaka University IDS Interdisciplinary Co-Creation Project</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2023.02—2024.01</span>
        <div>
          <div class="pub-title" data-lang="ja">機械学習を用いた学術分野の俯瞰的分析</div>
          <div class="pub-title" data-lang="en">Panoramic Analysis of Academic Fields Using Machine Learning</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Philosophy of Science">Digital Philosophy of Science</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">中部科学技術センター 人工知能研究助成</span>
            <span class="grant-tag" data-lang="en">Chubu Science and Technology Center, AI Research Grant</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2014.04—2016.03</span>
        <div>
          <div class="pub-title" data-lang="ja">神経科学の哲学の基盤構築</div>
          <div class="pub-title" data-lang="en">Foundations of the Philosophy of Neuroscience</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">日本学術振興会 特別研究員奨励費（DC2）</span>
            <span class="grant-tag" data-lang="en">JSPS Research Fellowship for Young Scientists (DC2)</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2013.04—2014.03</span>
        <div>
          <div class="pub-title" data-lang="ja">神経科学の哲学の基盤構築</div>
          <div class="pub-title" data-lang="en">Foundations of the Philosophy of Neuroscience</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Philosophy of Science">Philosophy of Science</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">サントリー文化財団 チャレンジ研究助成</span>
            <span class="grant-tag" data-lang="en">Suntory Foundation, Challenge Research Grant</span>
          </div>
        </div>
      </div>

    </div>

    <!-- 分担者 -->
    <p class="grant-group-label" data-lang="ja" style="margin-top: 56px;">分担者</p>
    <p class="grant-group-label" data-lang="en" style="margin-top: 56px;">Co-Investigator</p>
    <div class="pub-list" style="margin-top: 16px;">

      <div class="pub-item">
        <span class="pub-year">2025.09—2026.03</span>
        <div>
          <a href="https://www.mext.go.jp/a_menu/shotou/zyouhou/detail/1416148_00009.htm" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">学びの充実など教育課題の解決に向けた教育分野特化の生成AIの実証研究事業</div>
            <div class="pub-title" data-lang="en">Demonstration Research Project on Generative AI Specialized in Education for Solving Educational Challenges</div>
          </a>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Technology">Digital Technology</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">文部科学省（令和6年度補正予算事業）/ 富士通Japan株式会社受託</span>
            <span class="grant-tag" data-lang="en">MEXT (FY2024 Supplementary Budget) / Commissioned by Fujitsu Japan Ltd.</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">推進委員長：櫻井 千穂 / 副委員長：小島 祥美, 佐野 愛子 / 委員：清水 政明, 筒井 佐代, 酒井 裕美, 菅原 由美, 村上 忠良, 横井 幸子, 江口 清子, 大塚 行誠, 矢元 貴美, 近藤 美佳, 鳥越 慎太郎, 菅原 裕輝, 他41名</span>
              <span data-lang="en">Chair: Chiho Sakurai / Vice-Chairs: Yoshimi Kojima, Aiko Sano / Members: Masaaki Shimizu, Sayo Tsutsui, Hiromi Sakai, Yumi Sugawara, Tadayoshi Murakami, Sachiko Yokoi, Kiyoko Eguchi, Gyosei Otsuka, Takami Yamoto, Mika Kondo, Shintaro Torigoe, Yuki Sugawara, and 41 others</span>
            </span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.06—2026.03</span>
        <div>
          <a href="https://www.osaka-u.ac.jp/ja/guide/public-relations/press_release/6e1h2u/ftis5q/20250630_01" target="_blank" rel="noopener noreferrer" class="pub-title-link">
            <div class="pub-title" data-lang="ja">生成AIによる「多文化多言語の子ども」への教育支援システムの共同研究事業</div>
            <div class="pub-title" data-lang="en">Joint Research on Generative AI-Based Educational Support Systems for Multicultural and Multilingual Children</div>
          </a>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Technology">Digital Technology</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">富士通Japan株式会社 共同研究 / 大阪大学大学院人文学研究科附属複言語・複文化共存社会研究センター</span>
            <span class="grant-tag" data-lang="en">Fujitsu Japan Ltd. Joint Research / Osaka University Research Center for Multilingual and Multicultural Coexistence</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">代表者：櫻井 千穂 / 共同研究者：清水 政明, 筒井 佐代, 酒井 裕美, 菅原 由美, 村上 忠良, 横井 幸子, 江口 清子, 大塚 行誠, 矢元 貴美, 近藤 美佳, 鳥越 慎太郎, 菅原 裕輝</span>
              <span data-lang="en">PI: Chiho Sakurai / Co-Researchers: Masaaki Shimizu, Sayo Tsutsui, Hiromi Sakai, Yumi Sugawara, Tadayoshi Murakami, Sachiko Yokoi, Kiyoko Eguchi, Gyosei Otsuka, Takami Yamoto, Mika Kondo, Shintaro Torigoe, Yuki Sugawara</span>
            </span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2025.04—2030.03</span>
        <div>
          <a href="https://kaken.nii.ac.jp/ja/grant/KAKENHI-PROJECT-25K00467/" target="_blank" rel="noopener noreferrer" class="pub-title-link" data-lang="ja"><div class="pub-title" data-lang="ja">文化的言語的に多様な子どもの複数言語アセスメントの実証研究</div></a>
          <a href="https://kaken.nii.ac.jp/en/grant/KAKENHI-PROJECT-25K00467/" target="_blank" rel="noopener noreferrer" class="pub-title-link" data-lang="en"><div class="pub-title" data-lang="en">Empirical Research on Multilingual Assessment of Culturally and Linguistically Diverse Children</div></a>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Technology">Digital Technology</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">日本学術振興会 科学研究費助成事業 基盤研究(B)</span>
            <span class="grant-tag" data-lang="en">JSPS Grant-in-Aid for Scientific Research (B)</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">代表者：櫻井 千穂　/ 分担者：小島 祥美, 佐野 愛子, 近藤 美佳, 矢元 貴美, 江口 清子, 菅原 裕輝</span>
              <span data-lang="en">PI: Chiho Sakurai / Co-I: Yoshimi Kojima, Aiko Sano, Mika Kondo, Takami Yamoto, Kiyoko Eguchi, Yuki Sugawara</span>
            </span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2021.04—2024.07</span>
        <div>
          <a href="https://rri.ed.ac.uk/project/future-organisms/" target="_blank" rel="noopener noreferrer" class="pub-title-link"><div class="pub-title">Future Organisms: Synthetic Genomics and Responsible Innovation in the UK, the USA and Japan</div></a>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="STS">STS</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag">UKRI / Economic and Social Research Council (ESRC) — International Research Grant</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">Jane Calvert, Erika Szymanski, Koichi Mikami, Robert Smith, Yuki Sugawara, Maya Hey, Tomohiro Inokuchi, Cookie Egre</span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2020.04—2023.03</span>
        <div>
          <div class="pub-title" data-lang="ja">東日本大震災の復興過程に関する公共人類学的研究－レジリエントな社会モデルの構築</div>
          <div class="pub-title" data-lang="en">Public Anthropological Research on the Recovery Process of the Great East Japan Earthquake: Building a Resilient Social Model</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Digital Anthropology">Digital Anthropology</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">日本学術振興会 科学研究費助成事業 基盤研究(B)</span>
            <span class="grant-tag" data-lang="en">JSPS Grant-in-Aid for Scientific Research (B)</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">代表者：関谷 雄一 / 分担者：木村 周平, 市野澤 潤平, 内尾 太一, 田中 孝枝, 山下 晋司, 菅原 裕輝</span>
              <span data-lang="en">PI: Yuichi Sekiya / Co-I: Shuhei Kimura, Junpei Ichinozawa, Taichi Uchio, Takae Tanaka, Shinji Yamashita, Yuki Sugawara</span>
            </span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2016.04—2019.03</span>
        <div>
          <div class="pub-title" data-lang="ja">哲学分野における男女共同参画と若手研究者育成に関する理論・実践的研究</div>
          <div class="pub-title" data-lang="en">Theoretical and Practical Research on Gender Equality and Early-Career Researcher Development in Philosophy</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Research Ethics">Research Ethics</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">日本学術振興会 科学研究費助成事業 基盤研究(B)</span>
            <span class="grant-tag" data-lang="en">JSPS Grant-in-Aid for Scientific Research (B)</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">代表者：和泉 ちえ / 分担者：森 一郎, 飯田 隆, 小手川 正二郎, 秋葉 剛史, 河野 哲也, 笠木 雅史, 池田 喬, 鈴木 伸国, 村上 祐子, 大河内 泰樹, 佐藤 靜, 加藤 泰史, 吉原 雅子, 小島 優子, 菅原 裕輝, 金澤 修, 筒井 晴香</span>
              <span data-lang="en">PI: Chie Izumi / Co-I: Ichiro Mori, Takashi Iida, Shojiro Kotegawa, Takeshi Akiba, Tetsuya Kono, Masafumi Kasagi, Takashi Ikeda, Nobukuni Suzuki, Yuko Murakami, Taiki Okochi, Shizuka Sato, Yasushi Kato, Masako Yoshihara, Yuko Kojima, Yuki Sugawara, Osamu Kanazawa, Haruka Tsutsui</span>
            </span>
          </div>
        </div>
      </div>

      <div class="pub-item">
        <span class="pub-year">2015.04—2019.03</span>
        <div>
          <div class="pub-title" data-lang="ja">研究倫理の質向上、機能強化、支援促進のための共有・共通基盤の整備に関する研究</div>
          <div class="pub-title" data-lang="en">Research on Developing Shared and Common Infrastructure for Improving Quality, Strengthening Functions, and Promoting Support of Research Ethics</div>
          <div style="margin-top:6px;"><span class="topic-tag" data-tag="Research Ethics">Research Ethics</span></div>
          <div class="grant-info" style="margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; align-items:center;">
            <span class="grant-tag" data-lang="ja">日本学術振興会 科学研究費助成事業 基盤研究(A)</span>
            <span class="grant-tag" data-lang="en">JSPS Grant-in-Aid for Scientific Research (A)</span>
          </div>
          <div class="member-info" style="margin-top:6px;">
            <span class="grant-tag" style="font-size:11px; color:var(--muted);">
              <span data-lang="ja">代表者：松井 健志 / 分担者：田代 志門, 井上 悠輔, 丸 祐一, 大北 全俊, 伊吹 友秀, 會澤 久仁子, 武藤 香織, 菅原 裕輝, 遠矢 和希</span>
              <span data-lang="en">PI: Takeshi Matsui / Co-I: Shimon Tashiro, Yusuke Inoue, Yuichi Maru, Masatoshi Okita, Tomohide Ibuki, Kuniko Aizawa, Kaori Muto, Yuki Sugawara, Kazuki Toya</span>
            </span>
          </div>
        </div>
      </div>

    </div>

    <div style="margin-top: 40px;">
      <a href="https://researchmap.jp/yukisugawara" target="_blank" rel="noopener noreferrer" style="font-size: 12px; letter-spacing: 0.12em; color: var(--accent); text-decoration: none; border-bottom: 1px solid var(--accent); padding-bottom: 2px; text-transform: uppercase;">
        <span data-lang="ja">researchmap で全研究プロジェクトを見る →</span>
        <span data-lang="en">View all projects on researchmap →</span>
      </a>
    </div>
    </div><!-- /grant-static-list -->

    <div style="margin-top: 40px;">
      <a href="https://researchmap.jp/yukisugawara" target="_blank" rel="noopener noreferrer" style="font-size: 12px; letter-spacing: 0.12em; color: var(--accent); text-decoration: none; border-bottom: 1px solid var(--accent); padding-bottom: 2px; text-transform: uppercase;">
        <span data-lang="ja">researchmap で全研究プロジェクトを見る →</span>
        <span data-lang="en">View all projects on researchmap →</span>
      </a>
    </div>
  </section>

  <!-- TEACHING -->
  <section id="sec-teaching">
    <p class="sec-label">Teaching</p>
    <h2 class="sec-title" data-lang="ja">授業</h2>
    <h2 class="sec-title" data-lang="en">Courses Currently Taught</h2>

    <div id="teaching-stats" class="reveal">
      <div class="proj-stats-grid">
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="5">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">開講科目</span>
            <span data-lang="en">Courses</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="2">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">担当機関</span>
            <span data-lang="en">Institutions</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num proj-stat-range" data-from="2021" data-to="2025">2021–2025</div>
          <div class="proj-stat-label">
            <span data-lang="ja">開講期間</span>
            <span data-lang="en">Period</span>
          </div>
        </div>
        <div class="proj-stat-card">
          <div class="proj-stat-num" data-target="2">0</div>
          <div class="proj-stat-label">
            <span data-lang="ja">対象課程</span>
            <span data-lang="en">Levels</span>
          </div>
        </div>
      </div>
    </div>

    <div class="teaching-grid">

      <!-- 1. DH基礎演習 -->
      <div class="teaching-card" style="--tc-color:#38b0e8">
        <div class="tc-num">01</div>
        <span class="tc-year">2025 &mdash;</span>
        <div class="tc-title" data-lang="ja">デジタルヒューマニティーズ基礎演習</div>
        <div class="tc-title" data-lang="en">Introductory Seminar in Digital Humanities</div>
        <div class="tc-meta">
          <span class="tc-level" data-lang="ja">学部</span>
          <span class="tc-level" data-lang="en">Undergraduate</span>
          <span class="tc-dot"></span>
          <span class="tc-inst" data-lang="ja">大阪大学 文学部</span>
          <span class="tc-inst" data-lang="en">School of Letters, Osaka University</span>
        </div>
        <div class="tc-tags"><span class="topic-tag" data-tag="Digital Humanities">Digital Humanities</span></div>
      </div>

      <!-- 2. デジタルツール -->
      <div class="teaching-card" style="--tc-color:#38b0e8">
        <div class="tc-num">02</div>
        <span class="tc-year">2025 &mdash;</span>
        <div class="tc-title" data-lang="ja">外国語学部生のためのデジタルツール</div>
        <div class="tc-title" data-lang="en">Digital Tools for Students of Foreign Languages</div>
        <div class="tc-meta">
          <span class="tc-level" data-lang="ja">学部</span>
          <span class="tc-level" data-lang="en">Undergraduate</span>
          <span class="tc-dot"></span>
          <span class="tc-inst" data-lang="ja">大阪大学 外国語学部</span>
          <span class="tc-inst" data-lang="en">School of Foreign Studies, Osaka University</span>
        </div>
        <div class="tc-tags">
          <span class="topic-tag" data-tag="Humanities">Humanities</span>
          <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
        </div>
      </div>

      <!-- 3. 人文学とデジタル技術 -->
      <div class="teaching-card" style="--tc-color:#8e7fd4">
        <div class="tc-num">03</div>
        <span class="tc-year">2025 &mdash;</span>
        <div class="tc-title" data-lang="ja">人文学とデジタル技術</div>
        <div class="tc-title" data-lang="en">Humanities and Digital Technologies</div>
        <div class="tc-meta">
          <span class="tc-level" data-lang="ja">大学院</span>
          <span class="tc-level" data-lang="en">Graduate</span>
          <span class="tc-dot"></span>
          <span class="tc-inst" data-lang="ja">大阪大学 大学院人文学研究科</span>
          <span class="tc-inst" data-lang="en">Graduate School of Humanities, Osaka University</span>
        </div>
        <div class="tc-tags">
          <span class="topic-tag" data-tag="Humanities">Humanities</span>
          <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
        </div>
      </div>

      <!-- 4. 人文学基礎 -->
      <div class="teaching-card" style="--tc-color:#8e7fd4">
        <div class="tc-num">04</div>
        <span class="tc-year">2022 &mdash;</span>
        <div class="tc-title" data-lang="ja">人文学基礎（人文学と対話）</div>
        <div class="tc-title" data-lang="en">Foundations of the Humanities (Humanities and Dialogue)</div>
        <div class="tc-meta">
          <span class="tc-level" data-lang="ja">大学院</span>
          <span class="tc-level" data-lang="en">Graduate</span>
          <span class="tc-dot"></span>
          <span class="tc-inst" data-lang="ja">大阪大学 大学院人文学研究科</span>
          <span class="tc-inst" data-lang="en">Graduate School of Humanities, Osaka University</span>
        </div>
        <div class="tc-tags"><span class="topic-tag" data-tag="Humanities">Humanities</span></div>
      </div>

      <!-- 5. コーパス演習 -->
      <div class="teaching-card" style="--tc-color:#38b0e8">
        <div class="tc-num">05</div>
        <span class="tc-year">2021 &mdash;</span>
        <div class="tc-title" data-lang="ja">コーパス演習</div>
        <div class="tc-title" data-lang="en">Corpus Studies Practicum</div>
        <div class="tc-meta">
          <span class="tc-level" data-lang="ja">学部</span>
          <span class="tc-level" data-lang="en">Undergraduate</span>
          <span class="tc-dot"></span>
          <span class="tc-inst" data-lang="ja">同志社女子大学 学芸学部</span>
          <span class="tc-inst" data-lang="en">Faculty of Liberal Arts, Doshisha Women's College of Liberal Arts</span>
        </div>
        <div class="tc-tags">
          <span class="topic-tag" data-tag="Humanities">Humanities</span>
          <span class="topic-tag" data-tag="Digital Technology">Digital Technology</span>
        </div>
      </div>

    </div>

    <div style="margin-top: 40px;">
      <a href="https://researchmap.jp/yukisugawara" target="_blank" rel="noopener noreferrer" style="font-size: 12px; letter-spacing: 0.12em; color: var(--accent); text-decoration: none; border-bottom: 1px solid var(--accent); padding-bottom: 2px; text-transform: uppercase;">
        <span data-lang="ja">researchmap で全授業を見る &rarr;</span>
        <span data-lang="en">View all courses on researchmap &rarr;</span>
      </a>
    </div>
  </section>

  <!-- WORKS -->
  <section id="sec-works">
    <p class="sec-label">Works</p>
    <h2 class="sec-title" data-lang="ja">制作物</h2>
    <h2 class="sec-title" data-lang="en">Digital Works</h2>

    <div class="works-grid">

      <!-- Shizugawa Nostalgia Map -->
      <div class="works-card" data-works="shizugawa-map">
        <img src="image/shizugawa-map.png" alt="志津川なつかしマップ・デジタル" class="works-card-img" />
        <div class="works-card-overlay">
          <div class="works-card-label" data-lang="ja">デジタル人類学</div>
          <div class="works-card-label" data-lang="en">Digital Anthropology</div>
          <div class="works-card-name" data-lang="ja">志津川なつかしマップ・デジタル</div>
          <div class="works-card-name" data-lang="en">Shizugawa Nostalgia Map</div>
          <div class="works-card-tech">Leaflet / Firebase</div>
          <div class="works-card-desc" data-lang="ja">東日本大震災前の志津川の記憶を、住民の声と共にデジタル地図上に記録するプロジェクト。</div>
          <div class="works-card-desc" data-lang="en">A community-driven digital map preserving memories of Shizugawa before the 2011 Great East Japan Earthquake.</div>
        </div>
        <span class="works-card-arrow">&nearr;</span>
      </div>

      <!-- MinimalQDA -->
      <div class="works-card" data-works="minimal-qda">
        <img src="image/minimal-qda.png" alt="MinimalQDA" class="works-card-img" />
        <div class="works-card-overlay">
          <div class="works-card-label" data-lang="ja">研究ツール</div>
          <div class="works-card-label" data-lang="en">Research Tool</div>
          <div class="works-card-name" data-lang="ja">MinimalQDA</div>
          <div class="works-card-name" data-lang="en">MinimalQDA</div>
          <div class="works-card-tech">JavaScript / Web App</div>
          <div class="works-card-desc" data-lang="ja">軽量でブラウザ完結型の質的データ分析（QDA）ツール。コーディング・メモ・カラーラベル機能を搭載。</div>
          <div class="works-card-desc" data-lang="en">A lightweight, browser-based qualitative data analysis tool with coding, memo, and color-label features.</div>
        </div>
        <span class="works-card-arrow">&nearr;</span>
      </div>

    </div>
  </section>

  <!-- WORKS MODALS -->
  <div class="works-modal-backdrop" id="works-modal-shizugawa-map">
    <div class="works-modal">
      <div class="works-modal-hero">
        <img src="image/shizugawa-map.png" alt="志津川なつかしマップ・デジタル" />
        <div class="works-modal-hero-gradient"></div>
        <button class="works-modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="works-modal-body">
        <div class="works-modal-label" data-lang="ja">デジタル人類学プロジェクト</div>
        <div class="works-modal-label" data-lang="en">Digital Anthropology Project</div>
        <div class="works-modal-title" data-lang="ja">志津川なつかしマップ・デジタル</div>
        <div class="works-modal-title" data-lang="en">Shizugawa Nostalgia Map ─ Digital Edition</div>
        <div class="works-modal-desc" data-lang="ja">宮城県南三陸町志津川の震災前の街並みを、住民の記憶とともにデジタル地図上に記録する参加型プロジェクトです。手描きイラストによる「懐かしの地図」と現在の地図を切り替えながら、場所に紐づいた思い出をピンとして共有できます。写真の添付やアルバム機能も備え、コミュニティの集合的記憶をアーカイブするデジタル・メモリアルとして機能します。</div>
        <div class="works-modal-desc" data-lang="en">A participatory project that records the pre-earthquake streetscapes of Shizugawa, Minami-Sanriku Town, Miyagi Prefecture, alongside residents' memories on a digital map. Users can switch between a hand-drawn "nostalgia" illustration and a present-day map, pinning and sharing recollections tied to specific locations. With photo attachments and an album feature, it serves as a digital memorial archiving the community's collective memory.</div>
        <div class="works-modal-tags">
          <span class="works-modal-tag">Leaflet</span>
          <span class="works-modal-tag">Firebase</span>
          <span class="works-modal-tag">Community Memory</span>
          <span class="works-modal-tag">Digital Anthropology</span>
        </div>
        <a class="works-modal-link" data-lang="ja" href="https://yukisugawara.github.io/shizugawa-map/" target="_blank" rel="noopener noreferrer">サイトを見る &rarr;</a>
        <a class="works-modal-link" data-lang="en" href="https://yukisugawara.github.io/shizugawa-map/" target="_blank" rel="noopener noreferrer">Visit Site &rarr;</a>
      </div>
    </div>
  </div>

  <div class="works-modal-backdrop" id="works-modal-minimal-qda">
    <div class="works-modal">
      <div class="works-modal-hero">
        <img src="image/minimal-qda.png" alt="MinimalQDA" />
        <div class="works-modal-hero-gradient"></div>
        <button class="works-modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="works-modal-body">
        <div class="works-modal-label" data-lang="ja">研究ツール</div>
        <div class="works-modal-label" data-lang="en">Research Tool</div>
        <div class="works-modal-title" data-lang="ja">MinimalQDA ─ 軽量質的データ分析ツール</div>
        <div class="works-modal-title" data-lang="en">MinimalQDA ─ Lightweight Qualitative Data Analysis</div>
        <div class="works-modal-desc" data-lang="ja">ブラウザだけで完結する軽量な質的データ分析（QDA）ツールです。テキストへのコーディング、カラーラベルによる分類、メモ機能、ファイル管理など、質的研究に必要な基本機能をミニマルなインターフェースで提供します。インストール不要で、データはローカルに保持されるため、プライバシーを確保しながら手軽に分析を始めることができます。</div>
        <div class="works-modal-desc" data-lang="en">A lightweight, browser-based qualitative data analysis (QDA) tool that requires no installation. It provides essential features for qualitative research — text coding, color-label classification, memo management, and file organization — through a minimal interface. All data is stored locally, ensuring privacy while enabling researchers to begin analysis effortlessly.</div>
        <div class="works-modal-tags">
          <span class="works-modal-tag">JavaScript</span>
          <span class="works-modal-tag">LocalStorage</span>
          <span class="works-modal-tag">Qualitative Research</span>
          <span class="works-modal-tag">Text Analysis</span>
        </div>
        <a class="works-modal-link" data-lang="ja" href="https://yukisugawara.github.io/minimal-qda/" target="_blank" rel="noopener noreferrer">サイトを見る &rarr;</a>
        <a class="works-modal-link" data-lang="en" href="https://yukisugawara.github.io/minimal-qda/" target="_blank" rel="noopener noreferrer">Visit Site &rarr;</a>
      </div>
    </div>
  </div>

  <!-- INSTAGRAM -->
  <section>
    <p class="sec-label">Social</p>
    <h2 class="sec-title" data-lang="ja">Instagram</h2>
    <h2 class="sec-title" data-lang="en">Instagram</h2>

    <div class="ig-grid" style="margin-top: 56px;">

      <!-- 個人 -->
      <a href="https://www.instagram.com/ysugawara1218/" target="_blank" rel="noopener noreferrer" class="ig-card">
        <div class="ig-ring">
          <img src="image/ysugawara-instagram.jpg" alt="菅原裕輝 Instagram" class="ig-account-icon" />
        </div>
        <div class="ig-type" data-lang="ja">個人</div>
        <div class="ig-type" data-lang="en">Personal</div>
        <div class="ig-handle">@ysugawara1218</div>
        <div class="ig-name" data-lang="ja">Yuki Sugawara</div>
        <div class="ig-name" data-lang="en">Yuki Sugawara</div>
        <div class="ig-desc" data-lang="ja">研究活動や日常の記録</div>
        <div class="ig-desc" data-lang="en">Documenting research and daily life</div>
        <span class="ig-arrow">→</span>
      </a>

      <!-- 運用 -->
      <a href="https://www.instagram.com/jinbungakurin_uosaka/" target="_blank" rel="noopener noreferrer" class="ig-card">
        <div class="ig-ring">
          <img src="image/jinbungakurin-instagram.jpg" alt="人文学林 Instagram" class="ig-account-icon" />
        </div>
        <div class="ig-type" data-lang="ja">運用</div>
        <div class="ig-type" data-lang="en">Managed</div>
        <div class="ig-handle">@jinbungakurin_uosaka</div>
        <div class="ig-name" data-lang="ja">大阪大学大学院人文学研究科 人文学林</div>
        <div class="ig-name" data-lang="en">Jinbungakurin, Osaka University</div>
        <div class="ig-desc" data-lang="ja">人文学林の活動紹介・イベント情報</div>
        <div class="ig-desc" data-lang="en">Activities and events at Jinbungakurin</div>
        <span class="ig-arrow">→</span>
      </a>

    </div>
  </section>

  <!-- CONTACT -->
  <section id="sec-contact">
    <p class="sec-label">Contact</p>
    <h2 class="sec-title" data-lang="ja">連絡先</h2>
    <h2 class="sec-title" data-lang="en">Get in Touch</h2>

    <div class="contact-stack">
      <!-- Email -->
      <a class="contact-block" href="mailto:ysugawara.hmt@osaka-u.ac.jp" style="--contact-color:#4dc4a8">
        <div class="contact-block-header">
          <svg class="contact-block-icon" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="4" y="10" width="40" height="28" rx="3"/>
            <path d="M4 14l20 13 20-13"/>
          </svg>
          <div class="contact-block-text">
            <span class="contact-block-label">Email</span>
            <span class="contact-block-value">ysugawara.hmt [at] osaka-u.ac.jp</span>
          </div>
        </div>
        <span class="contact-block-action">
          <span data-lang="ja">メールを送る &rarr;</span>
          <span data-lang="en">Send email &rarr;</span>
        </span>
      </a>
      <!-- researchmap -->
      <a class="contact-block" href="https://researchmap.jp/yukisugawara" target="_blank" rel="noopener noreferrer" style="--contact-color:#c8a96e">
        <div class="contact-block-header">
          <svg class="contact-block-icon" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="24" cy="24" r="18"/>
            <ellipse cx="24" cy="24" rx="8" ry="18"/>
            <line x1="6" y1="18" x2="42" y2="18"/>
            <line x1="6" y1="30" x2="42" y2="30"/>
          </svg>
          <div class="contact-block-text">
            <span class="contact-block-label">researchmap</span>
            <span class="contact-block-value">researchmap.jp/yukisugawara</span>
          </div>
        </div>
        <span class="contact-block-action">
          <span data-lang="ja">プロフィールを見る &rarr;</span>
          <span data-lang="en">View profile &rarr;</span>
        </span>
      </a>
      <!-- Affiliation -->
      <a class="contact-block" href="https://jinbungakurin.hmt.osaka-u.ac.jp" target="_blank" rel="noopener noreferrer" style="--contact-color:#e06878">
        <div class="contact-block-header">
          <svg class="contact-block-icon" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="8" y="6" width="32" height="38" rx="2"/>
            <line x1="8" y1="14" x2="40" y2="14"/>
            <line x1="16" y1="22" x2="32" y2="22"/>
            <line x1="16" y1="28" x2="32" y2="28"/>
            <rect x="19" y="34" width="10" height="10"/>
          </svg>
          <div class="contact-block-text">
            <span class="contact-block-label">
              <span data-lang="ja">所属</span>
              <span data-lang="en">Affiliation</span>
            </span>
            <span class="contact-block-value">
              <span data-lang="ja">大阪大学 大学院人文学研究科 人文学林</span>
              <span data-lang="en">Interdisciplinary Network in the Humanities, Graduate School of Humanities, The University of Osaka</span>
            </span>
          </div>
        </div>
        <span class="contact-block-action">
          <span data-lang="ja">ウェブサイトを見る &rarr;</span>
          <span data-lang="en">Visit website &rarr;</span>
        </span>
      </a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <span>© 2026 Yuki Sugawara</span>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script>
    /* ── LANGUAGE ── */
    function setLang(lang) {
      document.body.className = document.body.className.replace(/lang-\w+/, '') + ' lang-' + lang;
      document.documentElement.lang = lang === 'ja' ? 'ja' : 'en';
      document.querySelectorAll('.lang-toggle button').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.target === lang);
      });
      localStorage.setItem('lang', lang);
    }
    const saved = localStorage.getItem('lang');
    if (saved === 'en') setLang('en');

    /* ── LOADER ── */
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
      }, 1600);
    });

    /* ── NAV BAR LOGIC ── */
    (function() {
      const navBar = document.getElementById('nav-bar');
      const navProgress = document.getElementById('nav-progress');
      const navLinks = document.querySelectorAll('.nav-link');
      const hamburger = document.getElementById('nav-hamburger');
      const navLinksContainer = document.getElementById('nav-links');

      // Hamburger toggle
      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('open');
        navLinksContainer.classList.toggle('open');
      });

      // Close mobile menu on link click
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          hamburger.classList.remove('open');
          navLinksContainer.classList.remove('open');
        });
      });

      // Section IDs for tracking
      const sectionIds = ['sec-news','sec-mvv','sec-career','sec-research','sec-publications','sec-projects','sec-teaching','sec-works','sec-contact'];

      function onScroll() {
        const scrolled = window.scrollY;
        const maxScroll = document.documentElement.scrollHeight - window.innerHeight;

        // Progress bar
        navProgress.style.width = (scrolled / maxScroll * 100) + '%';

        // Scrolled state (background blur)
        if (scrolled > 60) {
          navBar.classList.add('scrolled');
        } else {
          navBar.classList.remove('scrolled');
        }

        // Active section tracking
        let currentId = '';
        for (let i = sectionIds.length - 1; i >= 0; i--) {
          const sec = document.getElementById(sectionIds[i]);
          if (sec && sec.getBoundingClientRect().top <= 120) {
            currentId = sectionIds[i];
            break;
          }
        }
        navLinks.forEach(link => {
          if (link.getAttribute('data-section') === currentId) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });
      }

      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
    })();

    /* ── CUSTOM CURSOR ── */
    const cursor     = document.getElementById('cursor');
    const cursorRing = document.getElementById('cursor-ring');
    let mouseX = 0, mouseY = 0;
    let ringX  = 0, ringY  = 0;

    document.addEventListener('mousemove', e => {
      mouseX = e.clientX;
      mouseY = e.clientY;
      cursor.style.left = mouseX + 'px';
      cursor.style.top  = mouseY + 'px';
    });

    function animateRing() {
      ringX += (mouseX - ringX) * 0.12;
      ringY += (mouseY - ringY) * 0.12;
      cursorRing.style.left = ringX + 'px';
      cursorRing.style.top  = ringY + 'px';
      requestAnimationFrame(animateRing);
    }
    animateRing();

    document.querySelectorAll('a, button, .mvv-card, .mvv-block, .strengths-card, .str-block, .ig-card, .works-card').forEach(el => {
      el.addEventListener('mouseenter', () => document.body.classList.add('cursor-hover'));
      el.addEventListener('mouseleave', () => document.body.classList.remove('cursor-hover'));
    });

    /* ── SCROLL REVEAL ── */
    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          revealObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -48px 0px' });

    // Observe section labels
    document.querySelectorAll('.sec-label').forEach(el => {
      el.classList.add('reveal');
      revealObserver.observe(el);
    });

    // Observe section titles — clip-path reveal
    document.querySelectorAll('.sec-title, .sec-title-jp').forEach(el => {
      el.classList.add('clip-reveal');
      revealObserver.observe(el);
    });

    // Observe MVV cards with stagger
    document.querySelectorAll('.mvv-card').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe MVV blocks (new stack layout) with stagger
    document.querySelectorAll('.mvv-block').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe strengths cards with stagger
    document.querySelectorAll('.strengths-card').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });
    document.querySelectorAll('.str-block').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe pub-items with stagger
    document.querySelectorAll('.pub-item, .pub-item-book').forEach((el, i) => {
      el.classList.add('reveal-left', `stagger-${Math.min(i % 6 + 1, 6)}`);
      revealObserver.observe(el);
    });

    // Observe career items
    document.querySelectorAll('.career-item').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${Math.min(i + 1, 6)}`);
      revealObserver.observe(el);
    });

    // Observe grant group items
    document.querySelectorAll('.grant-group-label').forEach(el => {
      el.classList.add('reveal');
      revealObserver.observe(el);
    });

    // Observe Works cards
    document.querySelectorAll('.works-card').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe Instagram cards
    document.querySelectorAll('.ig-card').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe research overview
    document.querySelectorAll('.ro-vision, .ro-pillar, .ro-impl').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe contact items
    document.querySelectorAll('.contact-block').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe teaching cards with stagger
    document.querySelectorAll('.teaching-card').forEach((el, i) => {
      el.classList.add('reveal', `stagger-${i + 1}`);
      revealObserver.observe(el);
    });

    // Observe teaching stats
    const teachingStatsEl = document.getElementById('teaching-stats');
    if (teachingStatsEl) revealObserver.observe(teachingStatsEl);

    /* ── SCROLL HINT BOUNCE ── */
    const scrollHint = document.querySelector('.scroll-hint-line');
    if (scrollHint) {
      setInterval(() => {
        scrollHint.style.transform = 'scaleX(1.4)';
        setTimeout(() => { scrollHint.style.transform = 'scaleX(1)'; }, 300);
      }, 2500);
    }

    /* ── WORKS MODAL ── */
    (function() {
      const cards = document.querySelectorAll('.works-card');
      const backdrops = document.querySelectorAll('.works-modal-backdrop');

      function openModal(id) {
        const modal = document.getElementById('works-modal-' + id);
        if (!modal) return;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function closeModal(backdrop) {
        backdrop.classList.remove('active');
        document.body.style.overflow = '';
      }

      cards.forEach(card => {
        card.addEventListener('click', () => {
          const id = card.getAttribute('data-works');
          openModal(id);
        });
      });

      backdrops.forEach(backdrop => {
        backdrop.addEventListener('click', (e) => {
          if (e.target === backdrop) closeModal(backdrop);
        });
        const closeBtn = backdrop.querySelector('.works-modal-close');
        if (closeBtn) closeBtn.addEventListener('click', () => closeModal(backdrop));
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          backdrops.forEach(backdrop => {
            if (backdrop.classList.contains('active')) closeModal(backdrop);
          });
        }
      });
    })();

    /* ── HERO CANVAS (constellation) ── */
    (function() {
      const canvas = document.getElementById('hero-canvas');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const N = 55;
      let pts = [];

      function resize() {
        canvas.width  = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
      }
      resize();
      window.addEventListener('resize', resize, { passive: true });

      for (let i = 0; i < N; i++) {
        pts.push({
          x:  Math.random() * canvas.width,
          y:  Math.random() * canvas.height,
          vx: (Math.random() - 0.5) * 0.25,
          vy: (Math.random() - 0.5) * 0.25,
          r:  Math.random() * 1.2 + 0.4
        });
      }

      function tick() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        pts.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          if (p.x < 0) p.x = canvas.width;
          if (p.x > canvas.width)  p.x = 0;
          if (p.y < 0) p.y = canvas.height;
          if (p.y > canvas.height) p.y = 0;
        });
        const MAX = 150;
        for (let i = 0; i < N; i++) {
          for (let j = i + 1; j < N; j++) {
            const dx = pts[i].x - pts[j].x;
            const dy = pts[i].y - pts[j].y;
            const d  = Math.sqrt(dx*dx + dy*dy);
            if (d < MAX) {
              ctx.strokeStyle = `rgba(200,169,110,${(1 - d/MAX) * 0.10})`;
              ctx.lineWidth = 0.5;
              ctx.beginPath();
              ctx.moveTo(pts[i].x, pts[i].y);
              ctx.lineTo(pts[j].x, pts[j].y);
              ctx.stroke();
            }
          }
        }
        pts.forEach(p => {
          ctx.fillStyle = 'rgba(200,169,110,0.30)';
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        });
        requestAnimationFrame(tick);
      }
      tick();
      setTimeout(() => canvas.classList.add('active'), 100);
    })();

    /* ── PROJECT STATS DASHBOARD ── */
    (function() {
      const statsWrap = document.getElementById('proj-stats');
      if (!statsWrap) return;

      const TAG_COLORS = {
        'Anthropology':                 '#c87a5e',
        'Digital Anthropology':         '#c8a96e',
        'STS':                          '#6ab08a',
        'Digital STS':                  '#4dc4a8',
        'Philosophy of Science':        '#a87cb0',
        'Digital Philosophy of Science':'#8e7fd4',
        'Humanities':                   '#4868a8',
        'Digital Humanities':           '#38b0e8',
        'Digital Technology':           '#78a8e0',
        'Technology':                   '#6890c0',
        'Neuroscience':                 '#e06878',
        'Research Ethics':              '#d4a84b'
      };

      /* ── count tags from grant-static-list ── */
      const tagCounts = {};
      document.querySelectorAll('#grant-static-list .topic-tag[data-tag]').forEach(t => {
        const tag = t.dataset.tag;
        tagCounts[tag] = (tagCounts[tag] || 0) + 1;
      });
      const sorted = Object.entries(tagCounts).sort((a, b) => b[1] - a[1]);
      const maxCount = sorted.length ? sorted[0][1] : 1;

      /* ── build bar chart ── */
      const barsEl = document.getElementById('proj-tag-bars');
      if (barsEl && sorted.length) {
        sorted.forEach(([tag, count]) => {
          const color = TAG_COLORS[tag] || '#888';
          const pct = (count / maxCount * 100).toFixed(1);
          const row = document.createElement('div');
          row.className = 'proj-tag-bar-row';
          row.innerHTML =
            '<div class="proj-tag-bar-label">' + tag + '</div>' +
            '<div class="proj-tag-bar-track"><div class="proj-tag-bar-fill" data-pct="' + pct + '" style="background:' + color + ';"></div></div>' +
            '<div class="proj-tag-bar-count">' + count + '</div>';
          barsEl.appendChild(row);
        });
      }

      /* ── animate on scroll ── */
      let animated = false;
      const statsObs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !animated) {
            animated = true;
            statsObs.unobserve(statsWrap);

            /* counter animation */
            statsWrap.querySelectorAll('.proj-stat-num[data-target]').forEach(el => {
              const target = parseInt(el.dataset.target, 10);
              const start = performance.now();
              const duration = 1200;
              function tick(now) {
                const t = Math.min((now - start) / duration, 1);
                const ease = 1 - Math.pow(1 - t, 3);
                el.textContent = Math.round(ease * target);
                if (t < 1) requestAnimationFrame(tick);
              }
              requestAnimationFrame(tick);
            });

            /* bar animation with stagger */
            statsWrap.querySelectorAll('.proj-tag-bar-fill').forEach((bar, i) => {
              setTimeout(() => {
                bar.style.width = bar.dataset.pct + '%';
              }, i * 80);
            });
          }
        });
      }, { threshold: 0.15 });
      statsObs.observe(statsWrap);

      if (typeof revealObserver !== 'undefined') revealObserver.observe(statsWrap);
    })();

    /* ── PUBLICATION STATS DASHBOARD ── */
    (function() {
      const statsWrap = document.getElementById('pub-stats');
      if (!statsWrap) return;

      const TAG_COLORS = {
        'Anthropology':                 '#c87a5e',
        'Digital Anthropology':         '#c8a96e',
        'STS':                          '#6ab08a',
        'Digital STS':                  '#4dc4a8',
        'Philosophy of Science':        '#a87cb0',
        'Digital Philosophy of Science':'#8e7fd4',
        'Humanities':                   '#4868a8',
        'Digital Humanities':           '#38b0e8',
        'Digital Technology':           '#78a8e0',
        'Technology':                   '#6890c0',
        'Neuroscience':                 '#e06878',
        'Research Ethics':              '#d4a84b'
      };

      /* count tags from pub-static-list */
      const tagCounts = {};
      document.querySelectorAll('#pub-static-list .topic-tag[data-tag]').forEach(t => {
        const tag = t.dataset.tag;
        tagCounts[tag] = (tagCounts[tag] || 0) + 1;
      });
      const sorted = Object.entries(tagCounts).sort((a, b) => b[1] - a[1]);
      const maxCount = sorted.length ? sorted[0][1] : 1;

      /* build bar chart */
      const barsEl = document.getElementById('pub-tag-bars');
      if (barsEl && sorted.length) {
        sorted.forEach(([tag, count]) => {
          const color = TAG_COLORS[tag] || '#888';
          const pct = (count / maxCount * 100).toFixed(1);
          const row = document.createElement('div');
          row.className = 'proj-tag-bar-row';
          row.innerHTML =
            '<div class="proj-tag-bar-label">' + tag + '</div>' +
            '<div class="proj-tag-bar-track"><div class="proj-tag-bar-fill" data-pct="' + pct + '" style="background:' + color + ';"></div></div>' +
            '<div class="proj-tag-bar-count">' + count + '</div>';
          barsEl.appendChild(row);
        });
      }

      /* animate on scroll */
      let animated = false;
      const statsObs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !animated) {
            animated = true;
            statsObs.unobserve(statsWrap);

            /* counter animation */
            statsWrap.querySelectorAll('.proj-stat-num[data-target]').forEach(el => {
              const target = parseInt(el.dataset.target, 10);
              const start = performance.now();
              const duration = 1200;
              function tick(now) {
                const t = Math.min((now - start) / duration, 1);
                const ease = 1 - Math.pow(1 - t, 3);
                el.textContent = Math.round(ease * target);
                if (t < 1) requestAnimationFrame(tick);
              }
              requestAnimationFrame(tick);
            });

            /* bar animation with stagger */
            statsWrap.querySelectorAll('.proj-tag-bar-fill').forEach((bar, i) => {
              setTimeout(() => {
                bar.style.width = bar.dataset.pct + '%';
              }, i * 80);
            });
          }
        });
      }, { threshold: 0.15 });
      statsObs.observe(statsWrap);

      if (typeof revealObserver !== 'undefined') revealObserver.observe(statsWrap);
    })();

    /* ── TEACHING STATS COUNTER ── */
    (function() {
      const teachStats = document.getElementById('teaching-stats');
      if (!teachStats) return;

      let animated = false;
      const teachStatsObs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !animated) {
            animated = true;
            teachStatsObs.unobserve(teachStats);

            teachStats.querySelectorAll('.proj-stat-num[data-target]').forEach(el => {
              const target = parseInt(el.dataset.target, 10);
              const start = performance.now();
              const duration = 1200;
              function tick(now) {
                const t = Math.min((now - start) / duration, 1);
                const ease = 1 - Math.pow(1 - t, 3);
                el.textContent = Math.round(ease * target);
                if (t < 1) requestAnimationFrame(tick);
              }
              requestAnimationFrame(tick);
            });
          }
        });
      }, { threshold: 0.15 });
      teachStatsObs.observe(teachStats);
    })();

    /* ── CONCEPT MAP (D3 Force) ── */
    (function() {
      const svgEl = document.getElementById('concept-map-svg');
      const container = document.getElementById('concept-map-container');
      const tooltip = document.getElementById('concept-map-tooltip');
      const wrap = document.getElementById('concept-map-wrap');
      if (!svgEl || !container) return;

      const isJa = () => document.body.classList.contains('lang-ja');
      const typeLabel = {
        field: { ja: '分野', en: 'Field' }, theme: { ja: 'テーマ', en: 'Theme' },
        method: { ja: '方法', en: 'Method' }, impl: { ja: '実装', en: 'Impl.' }
      };

      /* ── nodes ── */
      const nodes = [
        /* ─ Fields ─ Digital (large) */
        { id: 'dsts', type: 'field', r: 18, color: '#4dc4a8', label: { ja: 'デジタルSTS', en: 'Digital STS' },
          desc: { ja: 'デジタルSTSは、科学技術社会論（STS）の分析枠組みや批判的視点を、アルゴリズム、ビッグデータ、巨大プラットフォームといった現代のデジタル技術に適用する分野です。データ収集やAIによる自動意思決定が、いかにして社会的なバイアスや差別を内包し、既存の権力構造を再生産しているかを解明します。同時に、ネットワーク分析やデータマイニングといった計算論的アプローチを調査手法として活用します。', en: 'Digital STS applies STS analytical frameworks to modern digital technologies, including algorithms, big data, and digital platforms. It critically examines how data collection and automated decision-making by AI embed social biases and reproduce existing power structures, while incorporating computational approaches such as data mining and network analysis into its research methodologies.' }, scrollTo: '.ro-pillar:nth-child(1)' },
        { id: 'dps', type: 'field', r: 18, color: '#8e7fd4', label: { ja: 'デジタル科学哲学', en: 'Digital Phil. of Science' },
          desc: { ja: 'デジタル科学哲学は、伝統的な科学哲学の問いに対して、情報技術やデータサイエンスの手法を用いてアプローチする新興の学際分野です。テキストマイニング、ネットワーク分析、コンピュータ・シミュレーションなどの計算論的手法を活用し、膨大な科学論文や歴史的データを計量的に分析することで、科学理論の変遷や研究コミュニティの動態を実証的に解明します。', en: 'Digital Philosophy of Science is an emerging interdisciplinary field that addresses traditional philosophical questions about science using computational methods. By utilizing text mining, network analysis, and computer simulations, researchers quantitatively analyze vast amounts of scientific literature to empirically trace the evolution of scientific theories and community dynamics.' }, scrollTo: '.ro-pillar:nth-child(2)' },
        { id: 'da', type: 'field', r: 18, color: '#c8a96e', label: { ja: 'デジタル人類学', en: 'Digital Anthropology' },
          desc: { ja: 'デジタル人類学は、インターネット、SNS、スマートフォン、人工知能、メタバースなどのデジタル技術が、人間の日常生活、文化、社会関係、アイデンティティの形成にどのような影響を与えているかを研究する新しい領域です。オンライン空間でのフィールドワーク（デジタル・エスノグラフィ）などの手法を用いて、サイバースペースにおける人間の行動やコミュニケーションの変容を分析します。', en: 'Digital Anthropology investigates how digital technologies — such as the internet, social media, smartphones, AI, and the metaverse — affect human daily life, culture, social relationships, and identity formation. Utilizing methods like digital ethnography, researchers observe and analyze behavioral patterns and transformations in communication within cyberspace.' }, scrollTo: '.ro-pillar:nth-child(3)' },
        /* ─ Fields ─ Base (medium) */
        { id: 'sts', type: 'field', r: 13, color: '#6ab08a', label: { ja: 'STS', en: 'STS' },
          desc: { ja: '科学技術社会論。科学的知識や技術が社会・文化・政治と相互作用しながら形成される過程を研究する学際分野', en: 'Science & Technology Studies — studying how science and technology shape and are shaped by society' } },
        { id: 'pos', type: 'field', r: 13, color: '#a87cb0', label: { ja: '科学哲学', en: 'Phil. of Science' },
          desc: { ja: '科学的知識の性質・基礎・方法論を哲学的に探求する分野。「科学とは何か」という根本的な問いを扱う', en: 'Exploring the nature, foundations, and methodology of scientific knowledge' } },
        { id: 'anth', type: 'field', r: 13, color: '#c87a5e', label: { ja: '人類学', en: 'Anthropology' },
          desc: { ja: '人間の文化・社会・言語を研究し、フィールドワークを通じて人間社会の多様性と普遍性を探求する学問', en: 'The study of human cultures through fieldwork, exploring diversity and universality' } },

        /* ─ Themes ─ DSTS / STS */
        { id: 'climate', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts','sts'], label: { ja: '気候変動', en: 'Climate Change' },
          desc: { ja: '気候変動と社会の関係をデジタル手法で分析', en: 'Analyzing climate change and society through digital methods' } },
        { id: 'algobias', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts'], label: { ja: 'アルゴリズムバイアス', en: 'Algorithmic Bias' },
          desc: { ja: 'AIアルゴリズムに内在する社会的バイアスの検出と批判的分析', en: 'Detecting and critically analyzing social biases embedded in AI algorithms' } },
        { id: 'platform', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts'], label: { ja: 'プラットフォーム経済', en: 'Platform Economy' },
          desc: { ja: 'デジタルプラットフォームが経済・労働・社会関係に与える影響', en: 'Impact of digital platforms on economy, labor, and social relations' } },
        { id: 'diggov', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts','sts'], label: { ja: 'デジタルガバナンス', en: 'Digital Governance' },
          desc: { ja: 'デジタル技術を通じた統治と市民参加の変容', en: 'Transformation of governance and civic participation through digital technology' } },
        { id: 'surveil', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts','sts'], label: { ja: '監視社会', en: 'Surveillance Society' },
          desc: { ja: 'デジタル監視技術がプライバシーと自由に与える影響', en: 'Impact of digital surveillance on privacy and freedom' } },
        { id: 'opensc', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','dsts'], label: { ja: 'オープンサイエンス', en: 'Open Science' },
          desc: { ja: '科学知識のオープンアクセスと市民科学の推進', en: 'Open access to scientific knowledge and citizen science' } },
        { id: 'scicomm', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts'], label: { ja: '科学コミュニケーション', en: 'Sci. Communication' },
          desc: { ja: '科学者と市民の間の対話と知識伝達', en: 'Dialogue and knowledge transfer between scientists and the public' } },
        { id: 'rri', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','dsts'], label: { ja: '責任あるイノベーション', en: 'Responsible Innovation' },
          desc: { ja: '社会的影響を考慮した研究・技術開発のあり方', en: 'Research and technology development considering societal impacts' } },
        { id: 'synbio', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','dsts'], label: { ja: '合成生物学', en: 'Synthetic Biology' },
          desc: { ja: 'ゲノム合成技術と社会的受容の問題', en: 'Genome synthesis technology and issues of social acceptance' } },
        { id: 'datapri', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts'], label: { ja: 'データプライバシー', en: 'Data Privacy' },
          desc: { ja: 'ビッグデータ時代の個人情報保護と権利', en: 'Personal data protection and rights in the age of big data' } },
        { id: 'stpolicy', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts'], label: { ja: '科学技術政策', en: 'S&T Policy' },
          desc: { ja: '科学技術に関する政策形成と評価', en: 'Science and technology policy formation and assessment' } },
        { id: 'aiethics', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts','sts'], label: { ja: 'AI倫理', en: 'AI Ethics' },
          desc: { ja: '人工知能の開発・運用における倫理的課題', en: 'Ethical challenges in AI development and deployment' } },
        { id: 'infra', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','dsts'], label: { ja: 'インフラストラクチャー', en: 'Infrastructure' },
          desc: { ja: '社会を支える技術的・制度的基盤の研究', en: 'Studies of technological and institutional foundations of society' } },
        { id: 'pubeng', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts'], label: { ja: '市民参加', en: 'Public Engagement' },
          desc: { ja: '科学技術政策への市民参加とパブリック・エンゲージメント', en: 'Citizen participation in science and technology decision-making' } },
        { id: 'genai', type: 'theme', r: 9, color: '#38b0e8', connects: ['dsts','dps','da'], label: { ja: '生成AI', en: 'Generative AI' },
          desc: { ja: '生成AIの社会的影響と知の再構築', en: "Generative AI's societal impact and knowledge restructuring" } },
        { id: 'digdiv', type: 'theme', r: 9, color: '#4dc4a8', connects: ['dsts','da'], label: { ja: 'デジタルデバイド', en: 'Digital Divide' },
          desc: { ja: '情報格差と技術へのアクセス不平等', en: 'Information gap and unequal access to technology' } },

        /* ─ Themes ─ DPoS / PoS */
        { id: 'neuro', type: 'theme', r: 9, color: '#8e7fd4', connects: ['dps','pos'], label: { ja: '神経科学', en: 'Neuroscience' },
          desc: { ja: '脳・神経系の構造と機能の解明。科学哲学から説明モデルの多元性を探究', en: 'Study of the nervous system — exploring explanatory model plurality' } },
        { id: 'paradigm', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos'], label: { ja: 'パラダイムシフト', en: 'Paradigm Shift' },
          desc: { ja: '科学革命における知のパラダイム転換', en: 'Transformations of knowledge paradigms in scientific revolutions' } },
        { id: 'realism', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos'], label: { ja: '科学的実在論', en: 'Scientific Realism' },
          desc: { ja: '科学理論が実在を正しく記述しているかという問い', en: 'Whether scientific theories accurately describe reality' } },
        { id: 'causal', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos','dps'], label: { ja: '因果推論', en: 'Causal Inference' },
          desc: { ja: '科学における因果関係の推論と正当化', en: 'Inference and justification of causal relations in science' } },
        { id: 'interdisc', type: 'theme', r: 9, color: '#8e7fd4', connects: ['dps','pos'], label: { ja: '学際性', en: 'Interdisciplinarity' },
          desc: { ja: '分野横断的な知の連携と統合', en: 'Cross-disciplinary collaboration and knowledge integration' } },
        { id: 'mechanism', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos','dps'], label: { ja: 'メカニズム', en: 'Mechanisms' },
          desc: { ja: '科学的説明におけるメカニズム概念の役割', en: 'Role of mechanism concepts in scientific explanation' } },
        { id: 'sciexp', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos'], label: { ja: '科学的説明', en: 'Scientific Explanation' },
          desc: { ja: '科学はいかにして現象を説明するのか', en: 'How science explains phenomena' } },
        { id: 'knowstr', type: 'theme', r: 9, color: '#8e7fd4', connects: ['dps'], label: { ja: '知識構造', en: 'Knowledge Structure' },
          desc: { ja: '学術分野の構造と知識の体系化', en: 'Structure of academic fields and knowledge systematization' } },
        { id: 'scirev', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos'], label: { ja: '科学革命', en: 'Scientific Revolution' },
          desc: { ja: '科学史における革命的変化の分析', en: 'Analysis of revolutionary changes in the history of science' } },
        { id: 'natkind', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos'], label: { ja: '自然種', en: 'Natural Kinds' },
          desc: { ja: '科学的分類における「自然な」カテゴリーの存在', en: 'Existence of "natural" categories in scientific classification' } },
        { id: 'scival', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos','sts'], label: { ja: '科学と価値', en: 'Science & Values' },
          desc: { ja: '科学的営みにおける価値判断の役割', en: 'Role of value judgments in scientific practice' } },
        { id: 'knowprod', type: 'theme', r: 9, color: '#8e7fd4', connects: ['dps','sts'], label: { ja: '知識生産', en: 'Knowledge Production' },
          desc: { ja: '知識が生産・流通・消費される社会的プロセス', en: 'Social processes of knowledge production and dissemination' } },
        { id: 'rethics', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','pos'], label: { ja: '研究倫理', en: 'Research Ethics' },
          desc: { ja: '研究の誠実性と倫理的規範', en: 'Research integrity and ethical norms' } },
        { id: 'bioethics', type: 'theme', r: 9, color: '#6ab08a', connects: ['sts','pos'], label: { ja: 'バイオエシックス', en: 'Bioethics' },
          desc: { ja: '生命科学・医療技術の倫理的課題', en: 'Ethical issues in life sciences and medical technology' } },
        { id: 'posthum', type: 'theme', r: 9, color: '#a87cb0', connects: ['pos','da'], label: { ja: 'ポスト・ヒューマン', en: 'Post-Human' },
          desc: { ja: '技術による人間の拡張と人間性の再定義', en: 'Human enhancement through technology and redefining humanity' } },

        /* ─ Themes ─ DA / Anth */
        { id: 'disaster', type: 'theme', r: 9, color: '#c8a96e', connects: ['da','anth'], label: { ja: '災害復興', en: 'Disaster Recovery' },
          desc: { ja: '東日本大震災からの復興過程の人類学的研究', en: 'Anthropological research on recovery from the Great East Japan Earthquake' } },
        { id: 'onlinecom', type: 'theme', r: 9, color: '#c8a96e', connects: ['da'], label: { ja: 'オンラインコミュニティ', en: 'Online Communities' },
          desc: { ja: 'デジタル空間における共同体の形成と実践', en: 'Community formation and practices in digital spaces' } },
        { id: 'migration', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth','da'], label: { ja: '移住と定住', en: 'Migration' },
          desc: { ja: '被災地移住者の生活実践と定住プロセス', en: 'Living practices and settlement processes of disaster-area migrants' } },
        { id: 'glocal', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth'], label: { ja: 'グローカリゼーション', en: 'Glocalization' },
          desc: { ja: 'ローカルな価値とグローバルな視点の共存', en: 'Coexistence of local values and global perspectives' } },
        { id: 'coexist', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth','da'], label: { ja: '共生社会', en: 'Coexistence' },
          desc: { ja: '多様な人々が共に生きる社会モデルの構築', en: 'Building social models where diverse people coexist' } },
        { id: 'digid', type: 'theme', r: 9, color: '#c8a96e', connects: ['da'], label: { ja: 'デジタルアイデンティティ', en: 'Digital Identity' },
          desc: { ja: 'オンライン空間におけるアイデンティティの構築', en: 'Identity construction in online spaces' } },
        { id: 'multiling', type: 'theme', r: 9, color: '#c8a96e', connects: ['da','anth'], label: { ja: '多言語教育', en: 'Multilingual Ed.' },
          desc: { ja: '文化的言語的に多様な子どもの教育支援', en: 'Educational support for culturally and linguistically diverse children' } },
        { id: 'cultdiv', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth'], label: { ja: '文化的多様性', en: 'Cultural Diversity' },
          desc: { ja: '多文化共存と文化間理解の促進', en: 'Multicultural coexistence and intercultural understanding' } },
        { id: 'medanth', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth'], label: { ja: '医療人類学', en: 'Medical Anth.' },
          desc: { ja: '医療実践と健康を文化的文脈から分析', en: 'Analyzing medical practice and health from cultural contexts' } },
        { id: 'envanth', type: 'theme', r: 9, color: '#c87a5e', connects: ['anth'], label: { ja: '環境人類学', en: 'Environmental Anth.' },
          desc: { ja: '人間と自然環境の関係を人類学的に研究', en: 'Anthropological study of human-environment relations' } },

        /* ─ Methods ─ DSTS */
        { id: 'nw', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts'], label: { ja: 'ネットワーク分析', en: 'Network Analysis' },
          desc: { ja: '引用・共著ネットワークの構造分析', en: 'Structural analysis of citation/co-authorship networks' } },
        { id: 'socio', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts'], label: { ja: '社会技術的分析', en: 'Sociotechnical Analysis' },
          desc: { ja: 'テクノロジーの社会的影響分析', en: 'Analysis of social impacts of technology' } },
        { id: 'datamine', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts','dps'], label: { ja: 'データマイニング', en: 'Data Mining' },
          desc: { ja: '大規模データからのパターン抽出', en: 'Extracting patterns from large-scale datasets' } },
        { id: 'webscrape', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts'], label: { ja: 'ウェブスクレイピング', en: 'Web Scraping' },
          desc: { ja: 'ウェブ上のデータ自動収集', en: 'Automated data collection from the web' } },
        { id: 'sentanal', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts'], label: { ja: '感情分析', en: 'Sentiment Analysis' },
          desc: { ja: 'テキストから感情・意見を計量的に分析', en: 'Quantitative analysis of emotions and opinions from text' } },
        { id: 'socsim', type: 'method', r: 8, color: '#4dc4a8', connects: ['dsts'], label: { ja: '社会シミュレーション', en: 'Social Simulation' },
          desc: { ja: 'エージェントベースの社会動態モデリング', en: 'Agent-based modeling of social dynamics' } },
        /* ─ Methods ─ DPoS */
        { id: 'ml', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: '機械学習', en: 'Machine Learning' },
          desc: { ja: 'テキスト分類・トピックモデリング', en: 'Text classification and topic modeling' } },
        { id: 'corpus', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'コーパス分析', en: 'Corpus Analysis' },
          desc: { ja: '大規模テキストの計量的分析', en: 'Quantitative analysis of large text corpora' } },
        { id: 'topicmod', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'トピックモデリング', en: 'Topic Modeling' },
          desc: { ja: '文書集合からの潜在トピック抽出', en: 'Extracting latent topics from document collections' } },
        { id: 'nlp', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: '自然言語処理', en: 'NLP' },
          desc: { ja: 'テキストデータの計算論的処理', en: 'Computational processing of text data' } },
        { id: 'textmine', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'テキストマイニング', en: 'Text Mining' },
          desc: { ja: 'テキストからの知識発見', en: 'Knowledge discovery from text' } },
        { id: 'distread', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: '遠読', en: 'Distant Reading' },
          desc: { ja: '大規模テキストの俯瞰的読解', en: 'Panoramic reading of large-scale texts' } },
        { id: 'deepl', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps','dsts'], label: { ja: '深層学習', en: 'Deep Learning' },
          desc: { ja: 'ニューラルネットワークによる高次特徴抽出', en: 'Higher-order feature extraction with neural networks' } },
        { id: 'datavis', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps','dsts'], label: { ja: 'データ可視化', en: 'Data Visualization' },
          desc: { ja: 'データの視覚的表現と探索', en: 'Visual representation and exploration of data' } },
        { id: 'gnn', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'GNN', en: 'GNN' },
          desc: { ja: 'グラフニューラルネットワーク', en: 'Graph Neural Networks' } },
        { id: 'bertopic', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'BERTopic', en: 'BERTopic' },
          desc: { ja: 'BERT埋め込みベースのトピックモデリング', en: 'BERT-based topic modeling' } },
        { id: 'xai', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'XAI', en: 'XAI' },
          desc: { ja: '説明可能AI', en: 'Explainable AI' } },
        { id: 'cv', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps'], label: { ja: 'コンピュータビジョン', en: 'Computer Vision' },
          desc: { ja: '画像認識・画像分析', en: 'Image recognition and visual analysis' } },
        { id: 'biblio', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps','dsts'], label: { ja: '計量書誌学', en: 'Bibliometrics' },
          desc: { ja: '論文・引用の計量的分析', en: 'Quantitative analysis of publications and citations' } },
        { id: 'statsan', type: 'method', r: 8, color: '#8e7fd4', connects: ['dps','dsts'], label: { ja: '統計分析', en: 'Statistical Analysis' },
          desc: { ja: 'データの統計的検定と推論', en: 'Statistical testing and inference' } },
        /* ─ Methods ─ DA */
        { id: 'dethno', type: 'method', r: 8, color: '#c8a96e', connects: ['da'], label: { ja: 'デジタル・エスノグラフィ', en: 'Digital Ethnography' },
          desc: { ja: 'オンラインコミュニティの参与観察', en: 'Participant observation in online communities' } },
        { id: 'hethno', type: 'method', r: 8, color: '#c8a96e', connects: ['da'], label: { ja: 'ハイパーリンク・エスノグラフィ', en: 'Hyperlink Ethno.' },
          desc: { ja: 'ウェブリンク構造からの文化分析', en: 'Cultural analysis from web link structures' } },
        { id: 'digarc', type: 'method', r: 8, color: '#c8a96e', connects: ['da'], label: { ja: 'デジタルアーカイブ', en: 'Digital Archiving' },
          desc: { ja: '文化資源のデジタル保存と公開', en: 'Digital preservation and publication of cultural resources' } },
        { id: 'gis', type: 'method', r: 8, color: '#c8a96e', connects: ['da','anth'], label: { ja: 'GIS', en: 'GIS' },
          desc: { ja: '地理情報システムによる空間分析', en: 'Spatial analysis using Geographic Information Systems' } },
        /* ─ Methods ─ STS */
        { id: 'contanal', type: 'method', r: 8, color: '#6ab08a', connects: ['sts','dsts'], label: { ja: 'コンテンツ分析', en: 'Content Analysis' },
          desc: { ja: 'メディア・テキストの体系的分析', en: 'Systematic analysis of media and text content' } },
        { id: 'discourse', type: 'method', r: 8, color: '#6ab08a', connects: ['sts'], label: { ja: '言説分析', en: 'Discourse Analysis' },
          desc: { ja: '言語使用と権力関係の分析', en: 'Analysis of language use and power relations' } },
        { id: 'compan', type: 'method', r: 8, color: '#6ab08a', connects: ['sts'], label: { ja: '比較分析', en: 'Comparative Analysis' },
          desc: { ja: '異なる文脈・事例間の体系的比較', en: 'Systematic comparison across contexts and cases' } },
        { id: 'interview', type: 'method', r: 8, color: '#6ab08a', connects: ['sts','anth'], label: { ja: 'インタビュー調査', en: 'Interview Research' },
          desc: { ja: '半構造化インタビューによるデータ収集', en: 'Data collection through semi-structured interviews' } },
        { id: 'ant', type: 'method', r: 8, color: '#6ab08a', connects: ['sts'], label: { ja: 'アクターネットワーク理論', en: 'ANT' },
          desc: { ja: '人間と非人間のアクターが形成するネットワーク', en: 'Networks formed by human and non-human actors' } },
        { id: 'grounded', type: 'method', r: 8, color: '#6ab08a', connects: ['sts'], label: { ja: 'グラウンデッドセオリー', en: 'Grounded Theory' },
          desc: { ja: 'データに根差した理論構築', en: 'Theory building grounded in data' } },
        { id: 'qual', type: 'method', r: 8, color: '#6ab08a', connects: ['anth','sts'], label: { ja: '質的分析', en: 'Qualitative Analysis' },
          desc: { ja: 'インタビュー・語りの質的データ分析', en: 'Qualitative data analysis of interviews and narratives' } },
        /* ─ Methods ─ PoS */
        { id: 'conceptan', type: 'method', r: 8, color: '#a87cb0', connects: ['pos'], label: { ja: '概念分析', en: 'Conceptual Analysis' },
          desc: { ja: '哲学的概念の精密な分析と再構築', en: 'Precise analysis and reconstruction of philosophical concepts' } },
        { id: 'logican', type: 'method', r: 8, color: '#a87cb0', connects: ['pos'], label: { ja: '論理分析', en: 'Logical Analysis' },
          desc: { ja: '論理的構造の形式的分析', en: 'Formal analysis of logical structures' } },
        { id: 'thoughtex', type: 'method', r: 8, color: '#a87cb0', connects: ['pos'], label: { ja: '思考実験', en: 'Thought Experiment' },
          desc: { ja: '仮想的シナリオによる概念的探究', en: 'Conceptual inquiry through hypothetical scenarios' } },
        /* ─ Methods ─ Anth */
        { id: 'fw', type: 'method', r: 8, color: '#c87a5e', connects: ['anth'], label: { ja: 'フィールドワーク', en: 'Fieldwork' },
          desc: { ja: '現地調査・参与観察', en: 'Field research and participant observation' } },
        { id: 'partobs', type: 'method', r: 8, color: '#c87a5e', connects: ['anth'], label: { ja: '参与観察', en: 'Participant Obs.' },
          desc: { ja: '対象コミュニティへの参加による調査', en: 'Research through participation in the target community' } },
        { id: 'lifehist', type: 'method', r: 8, color: '#c87a5e', connects: ['anth'], label: { ja: 'ライフヒストリー', en: 'Life History' },
          desc: { ja: '個人の生活史の記録と分析', en: 'Recording and analyzing personal life histories' } },
        { id: 'narrative', type: 'method', r: 8, color: '#c87a5e', connects: ['anth','da'], label: { ja: 'ナラティブ分析', en: 'Narrative Analysis' },
          desc: { ja: '語りの構造と意味の分析', en: 'Analysis of narrative structures and meanings' } },
        { id: 'visethno', type: 'method', r: 8, color: '#c87a5e', connects: ['anth','da'], label: { ja: '映像エスノグラフィ', en: 'Visual Ethnography' },
          desc: { ja: '映像メディアを用いた民族誌的記録', en: 'Ethnographic documentation using visual media' } },
        { id: 'multisite', type: 'method', r: 8, color: '#c87a5e', connects: ['anth'], label: { ja: 'マルチサイテッド・エスノグラフィ', en: 'Multi-sited Ethno.' },
          desc: { ja: '複数のフィールドを横断する民族誌', en: 'Ethnography across multiple field sites' } },

        /* ─ Impl ─ */
        { id: 'impl', type: 'impl', r: 15, color: '#c8a96e',
          label: { ja: '実装', en: 'Impl.' },
          desc: { ja: '実装する人文学', en: 'Implementing Humanities' }, scrollTo: '.ro-impl' }
      ];

      /* ── links ── */
      /* structural links (hand-defined) */
      const links = [
        { source: 'dsts', target: 'sts',  color: '#6ab08a', width: 1, dash: '4,3' },
        { source: 'dps',  target: 'pos',  color: '#a87cb0', width: 1, dash: '4,3' },
        { source: 'da',   target: 'anth', color: '#c87a5e', width: 1, dash: '4,3' },
        { source: 'impl', target: 'dsts', color: '#c8a96e', width: 1, dash: '2,3' },
        { source: 'impl', target: 'dps',  color: '#c8a96e', width: 1, dash: '2,3' },
        { source: 'impl', target: 'da',   color: '#c8a96e', width: 1, dash: '2,3' },
        { source: 'sts',  target: 'pos',  color: '#555', width: 0.5, dash: '2,4' },
        { source: 'sts',  target: 'anth', color: '#555', width: 0.5, dash: '2,4' },
        { source: 'pos',  target: 'anth', color: '#555', width: 0.5, dash: '2,4' }
      ];
      /* auto-generate links from connects[] property */
      const nodeMap = {};
      nodes.forEach(n => { nodeMap[n.id] = n; });
      nodes.forEach(n => {
        if (!n.connects) return;
        n.connects.forEach(fid => {
          const f = nodeMap[fid];
          if (!f) return;
          links.push({
            source: fid, target: n.id,
            color: f.color,
            width: n.type === 'theme' ? 0.8 : 0.7,
            dash: n.type === 'theme' ? '6,3' : null
          });
        });
      });

      /* ── cross-links: theme↔theme, method↔method, theme↔method ── */
      const crossDefs = [
        /* theme ↔ theme */
        ['algobias','aiethics'], ['genai','aiethics'], ['genai','knowstr'],
        ['genai','posthum'], ['platform','surveil'], ['datapri','surveil'],
        ['diggov','datapri'], ['opensc','scicomm'], ['opensc','knowprod'],
        ['rri','rethics'], ['rri','aiethics'], ['paradigm','scirev'],
        ['causal','mechanism'], ['sciexp','mechanism'], ['realism','natkind'],
        ['interdisc','knowstr'], ['interdisc','knowprod'],
        ['scival','rethics'], ['bioethics','rethics'], ['bioethics','medanth'],
        ['disaster','migration'], ['disaster','coexist'],
        ['migration','multiling'], ['coexist','cultdiv'],
        ['onlinecom','digid'], ['stpolicy','pubeng'], ['stpolicy','rri'],
        ['scicomm','pubeng'], ['climate','envanth'],
        /* method ↔ method */
        ['ml','deepl'], ['ml','nlp'], ['nlp','textmine'], ['nlp','corpus'],
        ['nlp','sentanal'], ['corpus','distread'], ['topicmod','bertopic'],
        ['deepl','gnn'], ['deepl','cv'], ['nw','biblio'], ['nw','datavis'],
        ['datamine','textmine'], ['datamine','webscrape'],
        ['fw','partobs'], ['fw','visethno'], ['dethno','hethno'],
        ['interview','qual'], ['interview','narrative'],
        ['discourse','contanal'], ['conceptan','logican'],
        ['lifehist','narrative'], ['statsan','biblio'], ['grounded','qual'],
        /* theme ↔ method */
        ['algobias','xai'], ['genai','deepl'], ['genai','nlp'],
        ['knowstr','biblio'], ['knowstr','nw'], ['knowprod','biblio'],
        ['onlinecom','dethno'], ['digid','dethno'],
        ['disaster','fw'], ['disaster','narrative'],
        ['causal','statsan'], ['climate','socsim'], ['climate','datavis'],
        ['neuro','cv'], ['paradigm','distread'],
        ['migration','lifehist'], ['cultdiv','fw'],
        ['medanth','qual'], ['envanth','gis'],
        ['surveil','webscrape'], ['datapri','datamine'],
        ['pubeng','interview'], ['scicomm','contanal']
      ];
      crossDefs.forEach(([a, b]) => {
        if (nodeMap[a] && nodeMap[b]) {
          links.push({ source: a, target: b, cross: true, color: '#555', width: 0.4, dash: '1,3' });
        }
      });

      /* ── adjacency map ── */
      const adj = {};
      nodes.forEach(n => { adj[n.id] = new Set(); });
      links.forEach(l => {
        const s = typeof l.source === 'object' ? l.source.id : l.source;
        const t = typeof l.target === 'object' ? l.target.id : l.target;
        adj[s].add(t); adj[t].add(s);
      });

      /* ── D3 setup ── */
      const width = container.clientWidth;
      const height = container.clientHeight;
      const svg = d3.select(svgEl);
      svg.attr('viewBox', [0, 0, width, height]);
      const g = svg.append('g');

      const zoom = d3.zoom().scaleExtent([0.3, 4])
        .on('zoom', (event) => g.attr('transform', event.transform));
      svg.call(zoom);

      /* edges */
      const linkG = g.selectAll('.cmap-edge-g').data(links).enter().append('line')
        .attr('class', d => 'cmap-edge cmap-entering' + (d.dash && !d.cross ? ' cmap-edge-flow' : ''))
        .attr('stroke', d => d.color)
        .attr('stroke-width', d => d.width)
        .attr('stroke-dasharray', d => d.dash || 'none')
        .attr('stroke-opacity', d => d.cross ? 0.25 : null);

      /* node groups */
      const nodeG = g.selectAll('.cmap-node-g').data(nodes).enter().append('g')
        .attr('class', d => 'cmap-node cmap-type-' + d.type + ' cmap-entering')
        .style('cursor', d => d.scrollTo ? 'pointer' : 'default');

      /* draw shapes per type */
      nodeG.each(function(d, i) {
        const el = d3.select(this);
        var shape;
        if (d.type === 'field') {
          shape = el.append('circle').attr('r', d.r)
            .attr('fill', d.color).attr('fill-opacity', 0.18)
            .attr('stroke', d.color).attr('stroke-width', d.r >= 16 ? 1.5 : 1);
          /* pulse: stagger phase per field node */
          shape.classed('cmap-shape-pulse', true)
            .style('animation-delay', (i * 0.6) + 's');
        } else if (d.type === 'theme') {
          var w = d.r * 2.4, h = d.r * 1.4;
          shape = el.append('rect').attr('width', w).attr('height', h)
            .attr('x', -w/2).attr('y', -h/2).attr('rx', 4).attr('ry', 4)
            .attr('fill', d.color).attr('fill-opacity', 0.18)
            .attr('stroke', d.color).attr('stroke-width', 1);
        } else if (d.type === 'method') {
          var s = d.r * 1.5;
          shape = el.append('rect').attr('width', s).attr('height', s)
            .attr('x', -s/2).attr('y', -s/2).attr('transform', 'rotate(45)')
            .attr('rx', 2).attr('fill', d.color).attr('fill-opacity', 0.15)
            .attr('stroke', d.color).attr('stroke-width', 0.8);
        } else if (d.type === 'impl') {
          shape = el.append('circle').attr('r', d.r)
            .attr('fill', d.color).attr('fill-opacity', 0.25)
            .attr('stroke', d.color).attr('stroke-width', 1.5);
          shape.classed('cmap-shape-pulse', true)
            .style('animation-delay', '1.8s');
        }
      });

      /* labels */
      nodeG.append('text')
        .attr('text-anchor', 'middle')
        .attr('dy', d => {
          if (d.type === 'theme') return d.r * 0.7 + 11;
          if (d.type === 'method') return d.r * 1.1 + 12;
          return d.r + 13;
        })
        .attr('fill', d => d.color)
        .attr('font-size', d => d.type === 'method' ? 7.5 : d.type === 'theme' ? 8 : (d.type === 'field' && d.r < 16) ? 9 : 10)
        .attr('font-weight', 300)
        .attr('opacity', d => (d.type === 'field' || d.type === 'impl') ? 1 : 0.7)
        .text(d => isJa() ? d.label.ja : d.label.en);

      /* update labels on lang switch */
      const langObserver = new MutationObserver(() => {
        nodeG.select('text').text(d => isJa() ? d.label.ja : d.label.en);
      });
      langObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });

      /* ── hover ── */
      nodeG.on('mouseenter', function(event, d) {
        svgEl.classList.add('has-hover');
        d3.select(this).classed('node-active', true);
        adj[d.id].forEach(nid => {
          nodeG.filter(n => n.id === nid).classed('node-active', true);
        });
        linkG.each(function(l) {
          const sid = typeof l.source === 'object' ? l.source.id : l.source;
          const tid = typeof l.target === 'object' ? l.target.id : l.target;
          if (sid === d.id || tid === d.id) d3.select(this).classed('edge-active', true);
        });
        const lang = isJa() ? 'ja' : 'en';
        const tl = typeLabel[d.type] ? typeLabel[d.type][lang] : '';
        tooltip.innerHTML = '<strong>' + d.label[lang] + '</strong>' +
          (tl ? '<span style="display:inline-block;font-size:9px;color:#c05b8a;border:1px solid rgba(192,91,138,0.3);border-radius:2px;padding:1px 6px;margin-left:8px;letter-spacing:0.1em;vertical-align:middle;">' + tl + '</span>' : '') +
          '<br><span style="display:block;margin-top:6px;opacity:0.85;">' + d.desc[lang] + '</span>';
        tooltip.classList.add('visible');
        const rect = container.getBoundingClientRect();
        tooltip.style.left = (event.clientX - rect.left + 14) + 'px';
        tooltip.style.top = (event.clientY - rect.top - 10) + 'px';
      })
      .on('mousemove', function(event) {
        const rect = container.getBoundingClientRect();
        tooltip.style.left = (event.clientX - rect.left + 14) + 'px';
        tooltip.style.top = (event.clientY - rect.top - 10) + 'px';
      })
      .on('mouseleave', function() {
        svgEl.classList.remove('has-hover');
        nodeG.classed('node-active', false);
        linkG.classed('edge-active', false);
        tooltip.classList.remove('visible');
      });

      /* ── click to scroll ── */
      nodeG.on('click', function(event, d) {
        if (!d.scrollTo) return;
        const target = document.querySelector(d.scrollTo);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
          target.style.transition = 'box-shadow 0.4s';
          target.style.boxShadow = '0 0 0 2px ' + d.color;
          setTimeout(() => { target.style.boxShadow = 'none'; }, 1500);
        }
      });

      /* ── drag ── */
      nodeG.call(d3.drag()
        .on('start', (event, d) => {
          if (!event.active) sim.alphaTarget(0.3).restart();
          d.fx = d.x; d.fy = d.y;
        })
        .on('drag', (event, d) => { d.fx = event.x; d.fy = event.y; })
        .on('end', (event, d) => {
          if (!event.active) sim.alphaTarget(0);
          d.fx = null; d.fy = null;
        })
      );

      /* ── force simulation ── */
      const sim = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d => d.id)
          .distance(d => {
            if (d.cross) return 55;
            if (d.dash === '4,3') return 110;
            if (d.dash === '2,3') return 120;
            if (d.dash === '2,4') return 90;
            if (d.dash === '6,3') return 80;
            return 70;
          })
          .strength(d => d.cross ? 0.15 : 0.4))
        .force('charge', d3.forceManyBody().strength(d => {
          if (d.type === 'field' && d.r >= 16) return -260;
          if (d.type === 'field') return -190;
          if (d.type === 'impl') return -210;
          if (d.type === 'theme') return -100;
          return -85;
        }))
        .force('center', d3.forceCenter(width / 2, height / 2))
        .force('collision', d3.forceCollide().radius(d => {
          if (d.type === 'theme') return d.r * 1.5 + 16;
          if (d.type === 'method') return d.r * 1.5 + 16;
          return d.r + 20;
        }).strength(0.9))
        .velocityDecay(0.55)
        .alphaMin(0.005)
        .alphaDecay(0.003)
        .on('tick', () => {
          linkG
            .attr('x1', d => d.source.x).attr('y1', d => d.source.y)
            .attr('x2', d => d.target.x).attr('y2', d => d.target.y);
          nodeG.attr('transform', d => 'translate(' + d.x + ',' + d.y + ')');
        });

      /* gentle perpetual drift — keeps the graph alive */
      function keepAlive() {
        if (sim.alpha() < 0.02) {
          sim.alpha(0.03).restart();
        }
        requestAnimationFrame(keepAlive);
      }

      /* ── lazy start with staggered reveal ── */
      sim.stop();
      function staggeredReveal() {
        sim.alpha(1).restart();
        /* reveal order: field → impl → theme → method */
        const delays = { field: 0, impl: 200, theme: 400, method: 700 };
        nodeG.each(function(d, i) {
          const el = d3.select(this);
          const base = delays[d.type] || 400;
          const jitter = Math.random() * 300;
          setTimeout(() => {
            el.classed('cmap-entering', false).classed('cmap-entered', true);
          }, base + jitter);
        });
        /* edges fade in after nodes start appearing */
        linkG.each(function(d, i) {
          setTimeout(() => {
            d3.select(this).classed('cmap-entering', false).classed('cmap-entered', true);
          }, 500 + Math.random() * 600);
        });
        /* start perpetual drift after initial layout settles */
        setTimeout(keepAlive, 2500);
      }
      const mapObs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) { staggeredReveal(); mapObs.unobserve(wrap); }
        });
      }, { threshold: 0.1 });
      if (wrap) mapObs.observe(wrap);
      if (typeof revealObserver !== 'undefined' && wrap) revealObserver.observe(wrap);
    })();

    /* ── RESEARCH TOPIC NETWORK ── */
    (function() {
      const svgEl = document.getElementById('network-svg');
      const container = document.getElementById('network-container');
      const tooltip = document.getElementById('network-tooltip');
      const legendEl = document.getElementById('network-legend');
      if (!svgEl || !container) return;

      /* ── colour map (matches .topic-tag CSS) ── */
      const TAG_COLORS = {
        'Anthropology':                 '#c87a5e',
        'Digital Anthropology':         '#c8a96e',
        'STS':                          '#6ab08a',
        'Digital STS':                  '#4dc4a8',
        'Philosophy of Science':        '#a87cb0',
        'Digital Philosophy of Science':'#8e7fd4',
        'Humanities':                   '#4868a8',
        'Digital Humanities':           '#38b0e8',
        'Digital Technology':           '#78a8e0',
        'Technology':                   '#6890c0',
        'Neuroscience':                 '#e06878',
        'Research Ethics':              '#d4a84b'
      };

      /* ── tag descriptions (ja / en) ── */
      const TAG_DESCS = {
        'Philosophy of Science': {
          ja: '科学哲学',
          descJa: '科学哲学は、科学的知識の性質、科学の基礎、およびその方法論を哲学的な視点から探求する学問分野です。「科学とは何か」「科学的知識はどのようにして正当化されるのか」といった根本的な問いを扱います。科学理論が現実をどのように記述しているのか、因果関係や推論の妥当性、理論と観察の関係、そして科学の発展メカニズム（パラダイムシフトなど）を考察します。科学の客観性や権威の本質を解き明かし、科学が現代社会や倫理に与える影響をメタ的な視点から批判的に分析する役割を担っています。',
          descEn: 'Philosophy of Science is a branch of philosophy that critically examines the foundations, methods, and implications of scientific inquiry. It addresses fundamental questions such as "What is science?" and "How is scientific knowledge justified?" This field explores how scientific theories describe reality, analyzing concepts like causality, the validity of scientific reasoning, and the mechanisms of scientific development, such as paradigm shifts. By unpacking the essence of scientific objectivity and authority, it plays a crucial role in providing a meta-perspective on how science influences modern society, culture, and ethics.'
        },
        'Digital Philosophy of Science': {
          ja: 'デジタル科学哲学',
          descJa: 'デジタル科学哲学は、伝統的な科学哲学の問いに対して、情報技術やデータサイエンスの手法を用いてアプローチする新興の学際分野です。テキストマイニング、ネットワーク分析、コンピュータ・シミュレーションなどの計算論的手法を活用し、膨大な科学論文や歴史的データを計量的に分析することで、科学理論の変遷や研究コミュニティの動態を実証的に解明します。さらに、人工知能（AI）やビッグデータを用いたデータ駆動型の研究手法が、科学的知識の客観性や正当性にどのような影響を与えるかといった現代的な課題も考察します。',
          descEn: 'Digital Philosophy of Science is an emerging interdisciplinary field that addresses traditional philosophical questions about science using computational methods and digital tools. By utilizing techniques such as text mining, network analysis, and computer simulations, researchers quantitatively analyze vast amounts of scientific literature to empirically trace the evolution of scientific theories and community dynamics. Furthermore, it investigates the unique epistemological and ethical challenges of the modern era, questioning how data-driven research methods, artificial intelligence, and algorithmic decision-making impact the objectivity and justification of scientific knowledge.'
        },
        'Anthropology': {
          ja: '人類学',
          descJa: '人類学は、人間の進化、行動、文化、社会、言語を時間的・空間的に幅広く研究し、「人間とは何か」という根源的な問いに挑む総合的な学問分野です。大きく分けて、生物学的な進化を探求する自然人類学と、社会構造や多様な文化を研究する文化人類学などがあります。特に文化人類学では、研究対象となるコミュニティに長期間滞在する「フィールドワーク（参与観察）」を重視します。多様な人々の生活様式や価値観を内側から深く理解することで、自文化の常識を相対化し、人間社会の多様性と普遍性を探求します。',
          descEn: 'Anthropology is the comprehensive study of human evolution, behavior, culture, society, and language across time and space, fundamentally seeking to answer what it means to be human. It is primarily divided into physical anthropology, which explores human biological evolution, and cultural anthropology, which investigates diverse social structures and lifestyles. Cultural anthropology, in particular, emphasizes fieldwork and participant observation, where researchers immerse themselves in communities for extended periods. By understanding diverse values from an insider\'s perspective, anthropology relativizes our own cultural assumptions and explores both the vast diversity and underlying universality of human societies.'
        },
        'Digital Anthropology': {
          ja: 'デジタル人類学',
          descJa: 'デジタル人類学は、インターネット、SNS、スマートフォン、人工知能、メタバースなどのデジタル技術が、人間の日常生活、文化、社会関係、アイデンティティの形成にどのような影響を与えているかを研究する新しい領域です。オンライン空間でのフィールドワーク（デジタル・エスノグラフィ）などの手法を用いて、サイバースペースにおける人間の行動やコミュニケーションの変容を分析します。オンラインとオフラインの境界が曖昧になる現代社会において、テクノロジーがいかに文化実践を再構築しているかを解明する学問です。',
          descEn: 'Digital Anthropology is a relatively new subfield of anthropology that investigates how digital technologies\u2014such as the internet, social media, smartphones, artificial intelligence, and the metaverse\u2014affect human daily life, culture, social relationships, and identity formation. Utilizing methods like digital ethnography, researchers observe and analyze behavioral patterns and transformations in communication within cyberspace. In a contemporary society where the boundary between online and offline worlds is increasingly blurred, this vital discipline illuminates how the ubiquitous presence of technology continuously reshapes our cultural practices and redefines what it means to be human in the digital age.'
        },
        'STS': {
          ja: '科学技術社会論',
          descJa: 'STS（Science and Technology Studies）は、科学的知識や技術的イノベーションが、社会、文化、政治、歴史の文脈とどのように相互作用しながら形成されているかを研究する学際的な分野です。科学や技術を単なる客観的な真理や中立的な道具としてではなく、人間の価値観、経済的利益、権力関係が複雑に絡み合った「社会的な構築物」として捉えます。気候変動、生命倫理、新技術の社会的受容など、現代社会が直面する複雑な課題に対し批判的な視点を提供し、専門家と市民の対話のあり方や民主的な科学技術政策の構築を模索します。',
          descEn: 'STS (Science and Technology Studies) is an interdisciplinary field that investigates how scientific knowledge and technological innovations are shaped by, and in turn shape, society, culture, politics, and history. Instead of viewing science and technology as purely objective truths or neutral tools, STS understands them as "social constructs" intricately entangled with human values, economic interests, and power dynamics. The field provides critical perspectives on complex contemporary challenges such as climate change, bioethics, and the societal acceptance of new technologies, striving to foster better dialogue between experts and citizens and to build more democratic science and technology policies.'
        },
        'Digital STS': {
          ja: 'デジタルSTS',
          descJa: 'デジタルSTSは、科学技術社会論（STS）の分析枠組みや批判的視点を、アルゴリズム、ビッグデータ、巨大プラットフォームといった現代のデジタル技術に適用する分野です。データ収集やAIによる自動意思決定が、いかにして社会的なバイアスや差別を内包し、既存の権力構造を再生産しているかを解明します。同時に、ネットワーク分析やデータマイニングといった計算論的アプローチを調査手法として活用します。見えにくいデジタルインフラのブラックボックスを解体し、データ駆動型社会における倫理やガバナンスを問い直します。',
          descEn: 'Digital STS is a specialized branch of Science and Technology Studies that applies STS analytical frameworks specifically to modern digital technologies, including algorithms, big data, and digital platforms. It critically examines how data collection and automated decision-making by AI embed social biases and reproduce existing power structures and inequalities. Simultaneously, it actively incorporates computational approaches\u2014such as data mining and network analysis\u2014into its research methodologies. By unpacking the opaque "black boxes" of digital infrastructures, this advanced research area fundamentally questions the ethics, governance, and societal impacts inherent in our increasingly data-driven society.'
        },
        'Humanities': {
          ja: '人文学',
          descJa: '人文学（ヒューマニティーズ）は、文学、歴史学、哲学、言語学、宗教学、芸術学などの多様なアプローチを通じて、人間の思想、文化、歴史、精神的所産を深く理解しようとする学問領域の総称です。自然科学が客観的なデータに基づく普遍的な法則の発見を目指すのに対し、人文学は人間の主観的な経験、価値観の多様性、そして意味の解釈に重きを置きます。過去から受け継がれてきたテキストや史料の批判的な読解を通じて人類の営みを詳細に分析し、「私たちは何者なのか」「どう生きるべきか」という根源的な問いに向き合い続けます。',
          descEn: 'The Humanities encompass a broad group of academic disciplines\u2014including literature, history, philosophy, linguistics, religious studies, and the arts\u2014dedicated to the profound understanding of human thought, culture, history, and spiritual endeavors. While the natural sciences strive to objectively discover universal laws, the humanities emphasize subjective human experiences, the diversity of values, and the critical interpretation of meaning. Through the meticulous analysis of historical texts, primary documents, and artistic works inherited from the past, the humanities continuously address fundamental questions about human existence, exploring "who we are" and "how we ought to live."'
        },
        'Digital Technology': {
          ja: 'デジタルテクノロジー',
          descJa: 'デジタルテクノロジー（デジタル技術）は、音声や画像、テキストなどの連続的なアナログ情報を「0」と「1」の離散的な二進数データに変換して処理、保存、通信を行う技術体系全般を指します。コンピュータ科学や情報工学を基盤とし、ソフトウェア開発、インターネット、人工知能（AI）、クラウドコンピューティング、IoTなどが含まれます。膨大なデータを高速かつ正確に処理できる点が特徴であり、現代のあらゆる産業やインフラを根底から支え、社会課題の解決とイノベーションを牽引する極めて実践的な分野です。',
          descEn: 'Digital Technology refers to the comprehensive system of technologies that process, store, and transmit continuous analog information by converting it into discrete binary data (zeros and ones). Rooted in computer science and information engineering, this field encompasses software development, the internet, artificial intelligence (AI), cloud computing, and the Internet of Things (IoT). Characterized by its unprecedented ability to process massive amounts of data rapidly and accurately, digital technology forms the indispensable backbone of all modern industries and societal infrastructures, driving innovation and providing practical solutions to complex contemporary challenges.'
        },
        'Technology': {
          ja: 'テクノロジー / 技術・工学',
          descJa: 'テクノロジー（技術・工学）は、科学的な知識や実証的な経験則を応用して、人間の生活を向上させ、社会的な課題を解決するための手段、道具、機械、システムを創出する分野です。学術的なタグとしては、機械、電子、材料、土木、バイオテクノロジーなどの工学領域全般を包含します。新しいハードウェアの開発やインフラの構築にとどまらず、製造プロセスの最適化、エネルギー効率の向上、技術革新が環境や社会構造に与える影響の評価なども重要なテーマです。理論を現実世界で安全かつ効果的に機能する形へと変換する実践的な領域です。',
          descEn: 'Technology, often categorized under engineering and applied sciences, is the broad field dedicated to applying scientific knowledge and empirical principles to create tools, machines, and systems that improve human life and solve practical societal challenges. As an academic tag, it encompasses a vast array of disciplines, including mechanical, electrical, civil, and biotechnology engineering. Important themes extend beyond developing new hardware to include optimizing manufacturing processes, enhancing energy efficiency, and rigorously assessing the environmental and social impacts of innovations. It is a highly practical domain focused on translating theories into functional and effective real-world applications.'
        },
        'Digital Humanities': {
          ja: 'デジタル人文学',
          descJa: 'デジタルヒューマニティーズ（デジタル人文学）は、歴史学や文学といった伝統的な人文学の研究手法に、最新のデジタル技術や計算論的アプローチを融合させた革新的な学際分野です。歴史的文書や芸術作品などの膨大な文化資源をデジタルデータ化し、テキストマイニング、ネットワーク分析、地理情報システム（GIS）、3Dモデリングなどを用いて解析します。これにより、人間の目視だけでは発見できなかった大規模なパターン（遠読）や新たな知見を抽出し、人文学の知識生産のあり方を革新し、可能性を大きく広げています。',
          descEn: 'Digital Humanities is an innovative, interdisciplinary field that merges traditional humanistic research\u2014such as history and literature\u2014with cutting-edge digital technologies and computational approaches. Researchers digitize vast collections of cultural resources, including historical manuscripts and artworks, and analyze them using advanced techniques like text mining, network analysis, Geographic Information Systems (GIS), and 3D modeling. This computational power enables scholars to engage in "distant reading," extracting new insights and uncovering large-scale patterns impossible to detect through manual analysis alone. By synergizing technological capabilities with humanistic insight, it revolutionizes knowledge production in the humanities.'
        },
        'Research Ethics': {
          ja: '研究倫理',
          descJa: '研究倫理は、科学的探求や学術活動において研究者が遵守すべき行動規範や道徳的原則を探求・実践する分野です。研究の誠実性（インテグリティ）を確保し、科学に対する社会の信頼を維持・構築することを最大の目的としています。具体的には、データの捏造、改ざん、盗用といった研究不正行為の防止をはじめ、研究データの適切な取り扱い、論文の正当な著者資格（オーサーシップ）、資金提供元との利益相反の透明化など、研究活動全般に関わる規範を扱います。また、人間を対象とする医学や社会科学の研究においては、インフォームド・コンセントの取得やプライバシーの保護といった被験者の人権・尊厳への配慮が極めて重要視されます。実験動物の福祉（苦痛の軽減など）も主要なテーマです。近年では、生命科学技術の進歩に伴う生命倫理的ジレンマや、人工知能（AI）・ビッグデータを活用した研究におけるアルゴリズムのバイアス、個人情報の保護など、新たな課題にも直面しています。研究倫理は、単なるルールの遵守にとどまらず、研究者が社会に対する責任を自覚し、健全で持続可能な科学の発展を導くための不可欠な基盤となる領域です。',
          descEn: 'Research Ethics is an academic field that explores and implements the codes of conduct and moral principles that researchers must observe in their scientific inquiry and scholarly activities. Its primary objective is to ensure research integrity and maintain public trust in science. Specifically, it addresses norms related to overall research practices, including the prevention of research misconduct—such as fabrication, falsification, and plagiarism—as well as proper data management, fair authorship allocation, and the transparent disclosure of conflicts of interest. Furthermore, in medical and social science research involving human subjects, ethical considerations such as obtaining informed consent and protecting the privacy and dignity of participants are of paramount importance. The welfare and ethical treatment of laboratory animals, including the minimization of suffering, is also a major theme. In recent years, the field has faced new challenges, such as bioethical dilemmas arising from rapid advances in the life sciences, as well as algorithmic bias and data privacy concerns in research utilizing artificial intelligence (AI) and big data. Rather than merely enforcing compliance with rules, research ethics serves as an indispensable foundation that encourages researchers to recognize their social responsibilities and guides the sound advancement of science.'
        },
        'Neuroscience': {
          ja: '神経科学',
          descJa: '神経科学は、脳、脊髄、末梢神経からなる神経系の構造、機能、発達、および病理を解明しようとする学際的な学問分野です。遺伝子やタンパク質、神経細胞（ニューロン）が連携するミクロなレベルの働きから、複雑な神経回路のネットワーク、さらには知覚、学習、記憶、感情、意思決定、そして「意識」といったマクロな精神活動に至るまで、幅広いスケールで「物質である脳がいかにして心や行動を生み出すのか」という根源的な問いに挑みます。生物学や医学、心理学を研究の基盤としつつも、現在では物理学、数学、情報工学など多様な分野の知見と融合している点が大きな特徴です。fMRI（機能的磁気共鳴画像法）や光遺伝学といった最先端のテクノロジーを駆使することで、活動中の生きた脳を精緻に観察・操作することが可能になりました。この分野の成果は、アルツハイマー病などの神経変性疾患やうつ病などの精神疾患のメカニズム解明と新たな治療法開発に直結しています。さらに、脳の仕組みを模倣した人工知能（AI）の構築やブレイン・マシン・インターフェース（BMI）の開発など、未来のテクノロジーの進化をも牽引する極めて重要な最前線の領域となっています。',
          descEn: 'Neuroscience is an interdisciplinary academic field dedicated to uncovering the structure, function, development, and pathology of the nervous system, encompassing the brain, spinal cord, and peripheral nerves. It tackles the fundamental question of how the physical brain generates the mind and behavior across a vast spectrum of scales. This ranges from the microscopic workings of genes, proteins, and neurons, to complex neural networks, and ultimately to macroscopic mental phenomena such as perception, learning, memory, emotion, decision-making, and consciousness. A defining characteristic of modern neuroscience is its integration of diverse disciplines. While firmly rooted in biology, medicine, and psychology, it actively synthesizes insights from physics, mathematics, and computer science. By utilizing cutting-edge technologies like functional magnetic resonance imaging (fMRI) and optogenetics, researchers can now precisely observe and manipulate the dynamic, living brain in action. The discoveries in this field are directly linked to unraveling the mechanisms of neurodegenerative and psychiatric disorders, such as Alzheimer\'s disease, and developing novel treatments. Furthermore, neuroscience significantly drives the evolution of future technologies, inspiring the architecture of artificial intelligence (AI) and the advancement of brain-machine interfaces (BMI), making it a crucially important domain at the forefront of science.'
        }
      };

      /* ── project summaries ── */
      /* Key = jaTitle, or "jaTitle||grantJa" for disambiguation */
      const PROJ_SUMMARIES = {
        '神経科学の哲学の基盤構築||サントリー文化財団 チャレンジ研究助成': {
          ja: '物理学をモデルとした従来の科学哲学に対し、私は神経科学の実践に即した新たな基盤の構築を目指しました。神経科学は普遍的な法則ではなく「メカニズム」の記述によって現象を説明します。本プロジェクトでは、科学者の実際の認識論的規範である「メカニズム的スタンス」に着目し、極端な脳の局在論を排した多元的・非還元的な理解を提示しました。専門家のみならず社会全体が神経科学の成果を正しく理解するための野心的な研究プロジェクトです。',
          en: 'In contrast to traditional philosophy of science modeled on physics, I aimed to build a new foundation grounded in the actual practices of neuroscience. Rather than relying on universal laws, neuroscience explains phenomena by describing "mechanisms". In this project, by focusing on the "mechanistic stance" as a practical norm among scientists, I proposed a pluralistic and non-reductive understanding of the brain, rejecting extreme localization. I believe this ambitious research bridges the gap between specialists and the public, enabling society to accurately comprehend the implications of neuroscientific discoveries.'
        },
        '神経科学の哲学の基盤構築||日本学術振興会 特別研究員奨励費（DC2）': {
          ja: '物理学を前提とした従来の科学哲学を見直し、私は神経科学の実践に即した新たな説明モデルの構築に取り組みました。神経科学で重視される「メカニズム」による説明は理論的な限界を抱えていますが、これを「モデル」の一種と捉え直すことで文脈依存的な理解が可能になります。本プロジェクトでは、脳のネットワーク構造を重視する「トポロジカルな説明」を提示し、神経科学における説明の多様性と多元性を明らかにすることを目指しました。',
          en: 'Reevaluating traditional philosophy of science modeled on physics, I worked on constructing a new explanatory framework tailored to actual neuroscientific practices. While the widely accepted "mechanistic explanations" face certain theoretical limitations, reframing them as a type of "model" enables a more flexible, context-dependent understanding. In this project, I proposed "topological explanations" that emphasize the brain\'s network structures, successfully revealing the profound diversity and plurality of scientific explanations in neuroscience.'
        },
        'Future Organisms: Synthetic Genomics and Responsible Innovation in the UK, the USA and Japan': {
          ja: '合成ゲノミクスは、全ゲノム規模でDNAを設計・構築し、未知の生命体を世界にもたらす可能性を秘めた新興分野です。本プロジェクトは、英国、米国、日本の3カ国を舞台に、この先端科学に対する社会科学的調査を実施し、「責任ある研究・イノベーション（RRI）」の新たなアプローチを開発することを目的とします。科学者や政策立案者、アーティストなど多様なステークホルダーを巻き込んだ実験的ワークショップを通じ、未来の生命創造を巡る根源的な対話と議論を社会に開く野心的な試みです。',
          en: 'Synthetic genomics is an emerging field capable of designing DNA at the whole-genome scale, potentially bringing unprecedented organisms into the world. This project conducts a social scientific investigation into this frontier science across the UK, the USA, and Japan to pioneer new approaches to Responsible Research and Innovation (RRI). By collaborating with diverse stakeholders—including scientists, policymakers, and artists—through experimental workshops, this ambitious initiative aims to actively foster and open up crucial public debates surrounding the creation of future life forms.'
        },
        '機械学習を用いた学術分野の俯瞰的分析': {
          ja: '人文学分野では伝統的に「概念分析」や「事例研究」が重視されてきましたが、私はこれらに潜む分析者のバイアスや事例の偏りという課題に着目しました。本プロジェクトでは、スタンフォード哲学百科事典（SEP）などをコーパスとして活用し、機械学習技術による「俯瞰的分析（遠読）」を試みています。人間の処理能力を超える大規模データを計算的に処理し可視化することで、学術分野の構造を客観的かつダイナミックに解き明かす研究です。',
          en: 'While the humanities have traditionally emphasized qualitative methods like "concept analysis" and "case studies," I focused on addressing the inherent limitations of researcher bias and case selection. In this project, utilizing platforms like the Stanford Encyclopedia of Philosophy (SEP) as text corpora, I apply machine learning techniques to conduct "panoramic analysis" (distant reading). By computationally processing and visualizing massive datasets beyond human capacity, I believe this research objectively and dynamically reveals the hidden structures of academic disciplines.'
        },
        '津波被災自治体移住者の語りの記録と分析を基にした共生型地域社会のモデル構築': {
          ja: '東日本大震災の被災地では、ハード面の復旧が進む一方で、ソフト面（社会活動など）の復興が課題となっています。私は、南三陸町や陸前高田市などの地域において、地元住民だけでなく「移住者」が復興の重要な担い手であることに着目しました。本プロジェクトでは、マルチサイテッド・エスノグラフィの手法を用い、移住者の語りをデジタルアーカイブ化して分析しています。被災者中心の一面的な復興観を問い直し、移住者と地域社会が共に生きる「共生的な地域社会モデル」の構築を目指す研究です。',
          en: 'While physical infrastructure recovery has progressed in tsunami-affected areas of the Great East Japan Earthquake, the revitalization of social and economic activities remains a challenge. I focused on the crucial role that "migrants"—not just original residents—play in the recovery of municipalities like Minamisanriku and Rikuzentakata. In this project, using multi-sited ethnography, I record and digitally archive the narratives of these migrants for qualitative analysis. I believe this research challenges the conventional victim-centered view of recovery and aims to construct a new "coexistent community model" where migrants and local residents thrive together.'
        },
        '津波被災地域の持続可能なまちづくりへ向けたグローカルな未来像の分析': {
          ja: '東日本大震災から時が経ち、被災地の目標は元の生活に戻る「復興」から「持続可能な未来」へとシフトしています。私は、復興の新たな担い手である「移住者」に着目しました。彼らは単なる田園回帰ではなく、地域のビジョンに共鳴しつつ現実的な「未来像」を抱いています。本プロジェクトでは、南三陸町などでの長期フィールドワークを通じ、ローカルな価値とグローバルな視点が共存する「グローカル」な未来像を分析しています。被災地の希望あるまちづくりに寄与する実践的な研究です。',
          en: 'As time has passed since the Great East Japan Earthquake, the goals of affected areas have shifted from mere "recovery" to building a "sustainable future". I focused on "migrants" as the new key players in this process. Rather than simply seeking a rural retreat, they hold realistic "future visions" that resonate with the local communities\' goals. Through long-term fieldwork in towns like Minamisanriku, this project analyzes these "glocal" visions—where local values coexist with global perspectives. I believe this practical research significantly contributes to the hopeful and sustainable urban development of disaster-affected areas.'
        },
        'ゲノム合成分野におけるバイオベンチャーの動向に関する調査研究': {
          ja: '近年、全ゲノム規模でのDNA合成が可能となり、国内外でバイオベンチャーが急増しています。私は科学技術社会論の視点から、この最先端産業において科学者がどのような役割を果たし、社会からどのような「期待」を集めているかを調査しています。本プロジェクトでは、日本と米国の動向を比較分析することで、単なる技術の追随ではなく、日本の歴史や文脈を踏まえたバイオベンチャーの理想的なあり方と、その実現に向けた方向性を提示することを目指しています。',
          en: 'With recent advancements enabling whole-genome DNA synthesis, bio-ventures are rapidly emerging globally. From the perspective of Science and Technology Studies (STS), I am investigating the evolving roles of scientists within this cutting-edge industry and the societal "expectations" surrounding them. By conducting a comparative analysis between Japan and the USA, this project aims to go beyond merely following technological trends. Instead, it proposes an ideal model for Japanese bio-ventures and strategies for its realization, grounded in Japan\'s unique historical and cultural context.'
        },
        '機械学習を用いた学際分野の俯瞰的分析': {
          ja: '科学技術の急速な発展に伴い、学際分野の全容を人間が把握することは困難になっています。本プロジェクトでは、最先端の情報科学（機械学習、自然言語処理、コンピュータビジョン）と「科学技術社会論（STS）」の知見を融合させる共創研究を行いました。学術論文の「テキスト」「図」「引用関係」を紐づけて大規模に収集・分類・可視化することで、人間の処理能力を超えた俯瞰的な理解を可能にし、デジタル人文学の新たな次元を切り拓く挑戦です。',
          en: 'As science and technology rapidly advance, it has become exceedingly difficult for humans to grasp the entirety of interdisciplinary fields. In this project, I initiated collaborative research that integrates cutting-edge information science (machine learning, natural language processing, and computer vision) with the profound insights of Science and Technology Studies (STS). By linking, classifying, and visualizing massive amounts of "texts," "figures," and "citation relationships" from academic papers, this ambitious challenge transcends human processing limits, offering a comprehensive panoramic understanding and pioneering a new dimension in the digital humanities.'
        },
        '深層学習を用いた社会技術的現象の分析': {
          ja: '科学技術と社会が複雑に絡み合う「社会技術的現象」を、私は最新の機械学習（特に深層学習）を用いて解明することに挑んでいます。本プロジェクトでは、災害復興や技術革新に関する大量のテキストデータと画像データを収集し、BERTopicによるトピック抽出や、説明可能AI（XAI）を用いた画像キャプション生成を行いました。これらを統合的に分析することで、従来の人文学的アプローチでは捉えきれなかった社会のダイナミクスを定量的かつ質的に描き出す、科学技術社会論（STS）の新たな枠組みを提案します。',
          en: 'I am tackling the complex "socio-technical phenomena" where science, technology, and society intertwine by utilizing cutting-edge machine learning, specifically deep learning. In this project, I collected massive amounts of text and image data related to disaster recovery and technological innovation. I then applied BERTopic for topic extraction and Explainable AI (XAI) for generating image captions. By integrating these analyses, I propose a new framework for Science and Technology Studies (STS) that quantitatively and qualitatively depicts social dynamics that traditional humanistic approaches could not fully capture.'
        },
        'デジタル人類学で拓く「デジタル日本学」教育のグローバル展開': {
          ja: 'データサイエンスの素養が必須となる現代において、私は伝統的な人文学とデジタル技術の架け橋となる教育基盤の構築に取り組んでいます。本プロジェクトでは、基礎的なITツールから「デジタル人類学」の高度な分析手法までを体系化した教育コンテンツを開発します。欧州屈指の拠点であるアムステルダム大学と連携し、学内外の教員や学生が実践的に学べる国際水準の教材を広く共有することで、デジタル人文学教育を牽引します。',
          en: 'As data science literacy becomes increasingly essential, I am working to build an educational foundation that bridges traditional humanities and digital technology. In this project, I am developing comprehensive educational content that ranges from basic IT tools to advanced analytical methods in "digital anthropology." By collaborating with the University of Amsterdam, a leading hub in Europe, I aim to create and widely share world-class, practical learning materials with educators and students, thereby leading the advancement of digital humanities education.'
        },
        '機械学習を用いた知識構造と社会技術的現象の俯瞰的分析': {
          ja: '気候変動や地域社会における「ローカルな抵抗」といった複雑な社会技術的課題に対し、私はデータサイエンスの最先端手法を用いて挑んでいます。本プロジェクトでは、大規模なテキスト・画像・ネットワークデータをGNN（グラフニューラルネットワーク）やCNNなどの機械学習で統合的に解析します。人文学の質的深さと情報科学の量的俯瞰を高度に融合させ、グローバルな科学知とローカルな生活世界の分断を埋める、新たな学際研究のモデルを構築する挑戦です。',
          en: 'To address complex socio-technical challenges such as climate change and "local resistance" within communities, I am applying cutting-edge data science methodologies. In this project, I comprehensively analyze massive text, visual, and network datasets using advanced machine learning models like GNNs and CNNs. By deeply integrating the qualitative depth of the humanities with the quantitative panorama of information science, this ambitious endeavor aims to bridge the disconnect between global scientific knowledge and local lifeworlds, pioneering a new model for interdisciplinary research.'
        },
        '文化的言語的に多様な子どもの複数言語アセスメントの実証研究': {
          ja: '日本で急増する「文化的言語的に多様な子ども（CLD児）」に対し、従来の日本語中心の能力評価は教育的不平等を招いています。私たちはこの課題を解決すべく、子どもが持つ全ての言語リソースを測る「複数言語評価モデル」の実証研究に挑んでいます。全国の教育現場でのアセスメント検証、家庭・地域と連携した支援法の開発、そしてそれらを統合したWebプラットフォームの公開を通じ、言語的マイノリティの公正な教育機会を保障する新たな実践モデルを社会に実装します。',
          en: 'For the rapidly increasing number of Culturally and Linguistically Diverse (CLD) children in Japan, traditional Japanese-centric assessments have caused educational inequalities. To resolve this, our research team is conducting empirical research on a "Multilingual Assessment Model" that comprehensively evaluates all of a child\'s linguistic resources. By verifying assessments in educational settings nationwide, developing support methods in collaboration with families and communities, and launching an integrated Web platform, we aim to implement a new practical model in society that ensures fair educational opportunities for linguistic minorities.'
        },
        '学びの充実など教育課題の解決に向けた教育分野特化の生成AIの実証研究事業': {
          ja: '文部科学省の令和6年度補正予算事業として、教育分野に特化した生成AIの実証研究に取り組んでいます。文化的言語的に多様な子どもたちの学びを支援するため、生成AIを活用した教育ツールの開発と実証を行い、教育現場における言語的障壁の解消と学習機会の公平な保障を目指しています。富士通Japan株式会社が受託し、全国の研究者・教育者が参画する大規模プロジェクトです。',
          en: 'As part of MEXT\'s FY2024 supplementary budget initiative, we are conducting demonstration research on generative AI specialized in education. To support the learning of culturally and linguistically diverse children, we are developing and testing AI-powered educational tools, aiming to eliminate language barriers in educational settings and ensure equitable learning opportunities. This large-scale project, commissioned to Fujitsu Japan Ltd., involves researchers and educators from across the country.'
        },
        '生成AIによる「多文化多言語の子ども」への教育支援システムの共同研究事業': {
          ja: '富士通Japan株式会社と大阪大学大学院人文学研究科附属複言語・複文化共存社会研究センターによる共同研究プロジェクトです。文化的言語的に多様な子どもたちの教育支援に向けて、デジタルテクノロジーを活用した実践的な研究を推進しています。産学連携による知見の社会実装を目指す取り組みです。',
          en: 'This is a joint research project between Fujitsu Japan Ltd. and Osaka University\'s Research Center for Multilingual and Multicultural Coexistence. We are advancing practical research leveraging digital technology to support the education of culturally and linguistically diverse children. This industry-academia collaboration aims to implement research findings into society.'
        },
        '東日本大震災の復興過程に関する公共人類学的研究－レジリエントな社会モデルの構築': {
          ja: '東日本大震災からの復興過程を公共人類学の視点から総合的に研究するプロジェクトです。被災地のコミュニティが災害からどのように立ち直り、社会的な絆を再構築してきたかを長期的なフィールドワークを通じて記録・分析しています。復興の多様な経験から「レジリエントな社会モデル」を構築し、将来の災害に対する社会的備えに貢献することを目指しています。',
          en: 'This project comprehensively investigates the recovery process from the Great East Japan Earthquake through the lens of public anthropology. Through long-term fieldwork, we document and analyze how affected communities have rebuilt and restored social bonds after the disaster. By drawing on diverse recovery experiences, the project aims to construct a "resilient social model" that contributes to societal preparedness for future disasters.'
        },
        '哲学分野における男女共同参画と若手研究者育成に関する理論・実践的研究': {
          ja: '哲学分野における男女共同参画の現状と課題を理論的・実践的に研究するプロジェクトです。日本の哲学研究コミュニティにおけるジェンダー不均衡の構造的要因を分析し、若手研究者の育成環境の改善に向けた具体的な提言を行っています。研究倫理やダイバーシティの観点から、学問の健全な発展に不可欠な包括的な研究環境の構築を目指しています。',
          en: 'This project conducts both theoretical and practical research on gender equality and early-career researcher development in the field of philosophy. By analyzing the structural factors behind gender imbalance in Japan\'s philosophical research community, the project provides concrete recommendations for improving the development environment for early-career researchers. From the perspectives of research ethics and diversity, it aims to build an inclusive research environment essential for the sound advancement of scholarship.'
        },
        '研究倫理の質向上、機能強化、支援促進のための共有・共通基盤の整備に関する研究': {
          ja: '研究倫理の実効性を高めるための共有・共通基盤の整備に取り組むプロジェクトです。日本の研究機関における倫理審査体制の現状を調査し、質の向上と機能強化のための方策を検討しています。研究倫理委員会の運営支援ツールの開発や、倫理審査の標準化に向けたガイドラインの策定を通じ、研究者が安心して研究に取り組める環境づくりを目指しています。',
          en: 'This project works to develop shared and common infrastructure for enhancing the effectiveness of research ethics. By investigating the current state of ethics review systems in Japanese research institutions, it examines measures for quality improvement and functional strengthening. Through the development of operational support tools for research ethics committees and the formulation of guidelines for standardizing ethics reviews, the project aims to create an environment where researchers can pursue their work with confidence.'
        }
      };

      /* ── extract data from DOM ── */
      const section = container.closest('section');
      const pubItems = section.querySelectorAll('.pub-item');
      const projects = [];
      const tagSet = new Set();

      pubItems.forEach((el, i) => {
        const titleJa = el.querySelector('.pub-title[data-lang="ja"]');
        const titleEn = el.querySelector('.pub-title[data-lang="en"]');
        const titleOnly = el.querySelector('.pub-title:not([data-lang])');
        const year = el.querySelector('.pub-year');
        const tags = [];
        el.querySelectorAll('.topic-tag[data-tag]').forEach(t => {
          tags.push(t.dataset.tag);
          tagSet.add(t.dataset.tag);
        });
        const yearText = year ? year.textContent.trim() : '';
        function toYmFrac(s) {
          if (!s) return 0;
          const m = s.match(/(\d{4})\.(\d{2})/);
          if (m) return parseInt(m[1]) + (parseInt(m[2]) - 1) / 12;
          const y = s.match(/(\d{4})/);
          return y ? parseInt(y[1]) : 0;
        }
        const ymParts = yearText.split(/\s*—\s*/);
        const startYear = toYmFrac(ymParts[0]) || 2020;
        const endYear = ymParts.length > 1 && ymParts[1].match(/\d/)
          ? toYmFrac(ymParts[1])
          : (yearText.includes('—') ? 2030 : startYear + 1);
        // detect group: pub-lists under section
        const parentList = el.closest('.pub-list');
        const allPubLists = section.querySelectorAll('.pub-list');
        const group = (allPubLists.length >= 2 && parentList === allPubLists[1]) ? 'coi' : 'pi';
        // grant & member info
        const grantJaEl = el.querySelector('.grant-info .grant-tag[data-lang="ja"]');
        const grantEnEl = el.querySelector('.grant-info .grant-tag[data-lang="en"]');
        const grantOnlyEl = el.querySelector('.grant-info .grant-tag:not([data-lang])');
        const memberInfoEl = el.querySelector('.member-info');
        let memberJaStr = '', memberEnStr = '';
        if (memberInfoEl) {
          const mJa = memberInfoEl.querySelector('[data-lang="ja"]');
          const mEn = memberInfoEl.querySelector('[data-lang="en"]');
          if (mJa) memberJaStr = mJa.textContent.trim();
          if (mEn) memberEnStr = mEn.textContent.trim();
          if (!memberJaStr && !memberEnStr) {
            memberJaStr = memberEnStr = memberInfoEl.textContent.trim();
          }
        }
        const linkEl = el.querySelector('a.pub-title-link');
        const jaTitle = titleJa ? titleJa.textContent.trim() : (titleOnly ? titleOnly.textContent.trim() : '');
        const enTitle = titleEn ? titleEn.textContent.trim() : (titleOnly ? titleOnly.textContent.trim() : '');
        const grantJaStr = grantJaEl ? grantJaEl.textContent.trim() : (grantOnlyEl ? grantOnlyEl.textContent.trim() : '');
        const grantEnStr = grantEnEl ? grantEnEl.textContent.trim() : (grantOnlyEl ? grantOnlyEl.textContent.trim() : '');
        const summaryData = PROJ_SUMMARIES[jaTitle + '||' + grantJaStr] || PROJ_SUMMARIES[enTitle + '||' + grantEnStr] || PROJ_SUMMARIES[jaTitle] || PROJ_SUMMARIES[enTitle] || null;
        projects.push({
          id: 'proj-' + i,
          ja: jaTitle,
          en: enTitle,
          year: yearText,
          startYear: startYear,
          endYear: endYear,
          group: group,
          tags: tags,
          grantJa: grantJaEl ? grantJaEl.textContent.trim() : (grantOnlyEl ? grantOnlyEl.textContent.trim() : ''),
          grantEn: grantEnEl ? grantEnEl.textContent.trim() : (grantOnlyEl ? grantOnlyEl.textContent.trim() : ''),
          memberJa: memberJaStr,
          memberEn: memberEnStr,
          link: linkEl ? linkEl.href : '',
          summaryJa: summaryData ? summaryData.ja : '',
          summaryEn: summaryData ? summaryData.en : '',
          el: el
        });
      });

      /* ── assign numbers: oldest first ── */
      const sorted = [...projects].sort((a, b) => a.startYear - b.startYear);
      sorted.forEach((p, i) => { p.num = i + 1; });

      /* inject number badge into DOM list */
      projects.forEach(p => {
        const yearSpan = p.el.querySelector('.pub-year');
        if (yearSpan && p.num != null) {
          const badge = document.createElement('span');
          badge.className = 'proj-num-badge';
          badge.textContent = p.num;
          badge.style.background = TAG_COLORS[p.tags[0]] || '#888';
          yearSpan.parentNode.insertBefore(badge, yearSpan);
        }
      });

      /* ── build project card list ── */
      (function buildProjCards() {
        const cardGrid = document.getElementById('proj-card-grid');
        const filterBar = document.getElementById('proj-card-filters');
        const cardListWrap = document.getElementById('proj-card-list');
        if (!cardGrid || !filterBar) return;

        const isJa = () => document.body.classList.contains('lang-ja');

        /* tag order (same as legend) */
        const tagOrder = [
          'Digital STS', 'Digital Philosophy of Science', 'Digital Anthropology',
          'STS', 'Philosophy of Science', 'Anthropology',
          'Digital Humanities', 'Digital Technology',
          'Humanities', 'Technology'
        ];

        /* filter bar */
        const allBtn = document.createElement('button');
        allBtn.className = 'pub-filter-btn active';
        allBtn.textContent = 'All';
        allBtn.addEventListener('click', () => { projCardClearFilter(); });
        filterBar.appendChild(allBtn);

        tagOrder.forEach(tag => {
          if (!tagSet.has(tag)) return;
          const btn = document.createElement('button');
          btn.className = 'pub-filter-btn';
          btn.textContent = tag;
          btn.dataset.tag = tag;
          btn.style.setProperty('--filter-color', TAG_COLORS[tag] || '#888');
          btn.addEventListener('click', () => {
            const tagId = 'tag-' + tag;
            if (activeFilter === tagId) {
              projCardClearFilter();
            } else {
              activeFilter = tagId;
              projCardApplyFilter(tagId);
            }
          });
          filterBar.appendChild(btn);
        });

        /* generate cards — newest first */
        const displayOrder = [...projects].sort((a, b) => b.startYear - a.startYear);
        displayOrder.forEach(p => {
          const card = document.createElement('div');
          card.className = 'pub-card';
          card.dataset.projId = p.id;
          if (p.link) card.dataset.link = p.link;
          const color = TAG_COLORS[p.tags[0]] || '#888';
          const glowColor = color.replace('#', '');
          const r = parseInt(glowColor.substring(0, 2), 16);
          const g = parseInt(glowColor.substring(2, 4), 16);
          const b = parseInt(glowColor.substring(4, 6), 16);
          card.style.setProperty('--card-accent', color);
          card.style.setProperty('--card-glow', `rgba(${r},${g},${b},0.08)`);

          let html = '';
          /* header: number + title + PI/CoI badge */
          html += '<div class="pub-card-header">';
          html += `<span class="pub-card-num" style="background:${color}">${p.num}</span>`;
          html += '<div>';
          if (p.ja) html += `<div class="pub-card-title" data-lang="ja">${p.ja}</div>`;
          if (p.en) html += `<div class="pub-card-title" data-lang="en">${p.en}</div>`;
          html += '</div></div>';

          /* year (period) + PI/CoI badge */
          html += '<div class="pub-card-year">';
          html += p.year;
          if (p.group === 'pi') {
            html += '<span class="pub-card-group" data-lang="ja">代表</span>';
            html += '<span class="pub-card-group" data-lang="en">PI</span>';
          } else {
            html += '<span class="pub-card-group" data-lang="ja">分担</span>';
            html += '<span class="pub-card-group" data-lang="en">Co-I</span>';
          }
          html += '</div>';

          /* grant info */
          if (p.grantJa || p.grantEn) {
            if (p.grantJa) html += `<div class="pub-card-detail" data-lang="ja">${p.grantJa}</div>`;
            if (p.grantEn) html += `<div class="pub-card-detail" data-lang="en">${p.grantEn}</div>`;
            if (p.grantJa && !p.grantEn) html += `<div class="pub-card-detail" data-lang="en">${p.grantJa}</div>`;
            if (!p.grantJa && p.grantEn) html += `<div class="pub-card-detail" data-lang="ja">${p.grantEn}</div>`;
          }

          /* tags */
          html += '<div class="pub-card-tags">';
          p.tags.forEach(tag => {
            html += `<span class="topic-tag" data-tag="${tag}">${tag}</span>`;
          });
          html += '</div>';

          /* summary */
          if (p.summaryJa) html += `<div class="pub-card-summary" data-lang="ja">${p.summaryJa}</div>`;
          if (p.summaryEn) html += `<div class="pub-card-summary" data-lang="en">${p.summaryEn}</div>`;

          card.innerHTML = html;

          /* click → open link */
          if (p.link) {
            card.addEventListener('click', (e) => {
              if (e.target.closest('.topic-tag')) return;
              window.open(p.link, '_blank', 'noopener,noreferrer');
            });
          }

          /* tag chip click → filter */
          card.querySelectorAll('.topic-tag').forEach(chip => {
            chip.style.cursor = 'pointer';
            chip.addEventListener('click', (e) => {
              e.stopPropagation();
              const tagId = 'tag-' + chip.dataset.tag;
              if (activeFilter === tagId) {
                projCardClearFilter();
              } else {
                activeFilter = tagId;
                projCardApplyFilter(tagId);
              }
            });
          });

          cardGrid.appendChild(card);
        });

        /* ── filter logic for card list ── */
        function updateFilterBar(tagId) {
          filterBar.querySelectorAll('.pub-filter-btn').forEach(btn => {
            if (!btn.dataset.tag) {
              btn.classList.toggle('active', !tagId);
            } else {
              btn.classList.toggle('active', ('tag-' + btn.dataset.tag) === tagId);
            }
          });
        }

        function filterCards(tagId) {
          const tagLabel = tagId ? tagId.replace('tag-', '') : null;
          cardGrid.querySelectorAll('.pub-card').forEach(card => {
            const projId = card.dataset.projId;
            const p = projects.find(x => x.id === projId);
            if (!tagLabel || (p && p.tags.includes(tagLabel))) {
              card.classList.remove('filtered-out');
            } else {
              card.classList.add('filtered-out');
            }
          });
        }

        /* called from network/legend/timeline to sync card list */
        window.__projCardApplyFilter = function(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
        };
        window.__projCardClearFilter = function() {
          updateFilterBar(null);
          filterCards(null);
        };

        function projCardApplyFilter(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
          if (typeof window.__projNetworkApplyFilter === 'function') {
            window.__projNetworkApplyFilter(tagId);
          }
        }
        function projCardClearFilter() {
          updateFilterBar(null);
          filterCards(null);
          if (typeof window.__projNetworkClearFilter === 'function') {
            window.__projNetworkClearFilter();
          }
        }

        /* reveal observer */
        if (cardListWrap) revealObserver.observe(cardListWrap);
      })();

      let tlBars = null;
      let tlBarLabels = null;

      /* ── build graph ── */
      const nodes = [];
      const links = [];
      const tagNodes = {};

      tagSet.forEach(tag => {
        const id = 'tag-' + tag;
        tagNodes[tag] = id;
        nodes.push({ id: id, type: 'tag', label: tag, color: TAG_COLORS[tag] || '#888' });
      });

      projects.forEach(p => {
        nodes.push({ id: p.id, type: 'project', num: p.num, ja: p.ja, en: p.en, year: p.year, tags: p.tags, el: p.el, summaryJa: p.summaryJa, summaryEn: p.summaryEn });
        p.tags.forEach(tag => {
          links.push({ source: tagNodes[tag], target: p.id });
        });
      });

      /* ── Digital ↔ base discipline links ── */
      const digitalPairs = [
        ['Digital STS', 'STS'],
        ['Digital Philosophy of Science', 'Philosophy of Science'],
        ['Digital Anthropology', 'Anthropology'],
        ['Digital Humanities', 'Humanities'],
        ['Digital Technology', 'Technology']
      ];
      digitalPairs.forEach(([dTag, bTag]) => {
        if (tagNodes[dTag] && tagNodes[bTag]) {
          links.push({ source: tagNodes[dTag], target: tagNodes[bTag], tagLink: true });
        }
      });

      /* ── dimensions ── */
      let W = container.clientWidth;
      let H = container.clientHeight;

      const svg = d3.select(svgEl)
        .attr('viewBox', [0, 0, W, H].join(' '))
        .attr('preserveAspectRatio', 'xMidYMid meet');

      const g = svg.append('g');

      /* ── simulation ── */
      const simulation = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d => d.id).distance(d => d.tagLink ? 50 : 80))
        .force('charge', d3.forceManyBody().strength(-220))
        .force('center', d3.forceCenter(W / 2, H / 2))
        .force('collision', d3.forceCollide().radius(d => d.type === 'tag' ? 28 : 18))
        .force('x', d3.forceX(W / 2).strength(0.04))
        .force('y', d3.forceY(H / 2).strength(0.04))
        .alphaDecay(0.005)
        .alphaMin(0.005)
        .velocityDecay(0.55)
        .stop();

      /* gentle perpetual drift */
      function keepAlive1() {
        if (simulation.alpha() < 0.02) simulation.alpha(0.03).restart();
        requestAnimationFrame(keepAlive1);
      }

      /* ── draw edges ── */
      const link = g.append('g')
        .selectAll('line')
        .data(links)
        .join('line')
        .attr('class', 'network-edge')
        .attr('stroke-dasharray', d => d.tagLink ? '4 3' : null)
        .attr('stroke-opacity', d => d.tagLink ? 0.30 : null);

      /* ── draw nodes ── */
      const node = g.append('g')
        .selectAll('g')
        .data(nodes)
        .join('g')
        .attr('class', d => d.type === 'tag' ? 'node-tag' : 'node-project');

      // tag nodes: larger circle + label
      node.filter(d => d.type === 'tag')
        .append('circle')
        .attr('r', 14)
        .attr('fill', d => d.color)
        .attr('fill-opacity', 0.18)
        .attr('stroke', d => d.color)
        .attr('stroke-width', 1.5);

      node.filter(d => d.type === 'tag')
        .append('text')
        .attr('dy', '0.35em')
        .attr('text-anchor', 'middle')
        .attr('fill', d => d.color)
        .attr('font-size', '8px')
        .attr('letter-spacing', '0.04em')
        .attr('pointer-events', 'none')
        .text(d => {
          const abbr = {
            'Digital STS': 'DSTS',
            'Digital Philosophy of Science': 'DPS',
            'Digital Anthropology': 'DA',
            'Digital Humanities': 'DH',
            'Digital Technology': 'DT',
            'Philosophy of Science': 'PoS',
            'Anthropology': 'Anth',
            'STS': 'STS',
            'Humanities': 'Hum',
            'Technology': 'Tech'
          };
          return abbr[d.label] || d.label.substring(0, 4);
        });

      // project nodes: numbered circle
      node.filter(d => d.type === 'project')
        .append('circle')
        .attr('r', 11)
        .attr('fill', d => {
          if (d.tags && d.tags.length > 0) return TAG_COLORS[d.tags[0]] || '#888';
          return '#888';
        })
        .attr('fill-opacity', 0.22)
        .attr('stroke', d => {
          if (d.tags && d.tags.length > 0) return TAG_COLORS[d.tags[0]] || '#888';
          return '#888';
        })
        .attr('stroke-width', 1)
        .attr('stroke-opacity', 0.5);

      node.filter(d => d.type === 'project')
        .append('text')
        .attr('dy', '0.35em')
        .attr('text-anchor', 'middle')
        .attr('fill', d => {
          if (d.tags && d.tags.length > 0) return TAG_COLORS[d.tags[0]] || '#888';
          return '#888';
        })
        .attr('font-size', '9px')
        .attr('font-weight', '500')
        .attr('pointer-events', 'none')
        .text(d => d.num);

      /* ── adjacency helpers ── */
      function getNeighbors(nodeId) {
        const neighbors = new Set([nodeId]);
        links.forEach(l => {
          const sId = typeof l.source === 'object' ? l.source.id : l.source;
          const tId = typeof l.target === 'object' ? l.target.id : l.target;
          if (sId === nodeId) neighbors.add(tId);
          if (tId === nodeId) neighbors.add(sId);
        });
        return neighbors;
      }

      function isLinkConnected(l, nodeId) {
        const sId = typeof l.source === 'object' ? l.source.id : l.source;
        const tId = typeof l.target === 'object' ? l.target.id : l.target;
        return sId === nodeId || tId === nodeId;
      }

      /* ── language helper ── */
      function getLang() {
        return document.body.classList.contains('lang-en') ? 'en' : 'ja';
      }

      function getProjectLabel(d) {
        const lang = getLang();
        return lang === 'en' ? (d.en || d.ja) : (d.ja || d.en);
      }

      /* ── rich tooltip HTML builder ── */
      function buildProjectTip(p) {
        const lang = getLang();
        const color = TAG_COLORS[p.tags[0]] || '#888';
        const title = lang === 'en' ? (p.en || p.ja) : (p.ja || p.en);
        const grant = lang === 'en' ? (p.grantEn || p.grantJa) : (p.grantJa || p.grantEn);
        const members = lang === 'en' ? (p.memberEn || p.memberJa) : (p.memberJa || p.memberEn);

        let h = '<div class="tip-head">';
        h += `<span class="tip-num" style="background:${color}">${p.num}</span>`;
        h += `<span class="tip-year">${p.year}</span>`;
        h += '</div>';
        h += `<div class="tip-title">${title}</div>`;
        if (p.tags.length) {
          h += '<div class="tip-tags">';
          p.tags.forEach(t => {
            const tc = TAG_COLORS[t] || '#888';
            h += `<span class="tip-tag" style="color:${tc};border-color:${tc}">${t}</span>`;
          });
          h += '</div>';
        }
        if (grant) h += `<div class="tip-grant">${grant}</div>`;
        if (members) h += `<div class="tip-members">${members}</div>`;
        const summary = lang === 'en' ? (p.summaryEn || p.summaryJa) : (p.summaryJa || p.summaryEn);
        if (summary) h += `<div class="tip-summary">${summary}</div>`;
        return h;
      }

      /* ── rich tag tooltip HTML builder ── */
      function buildTagTip(label) {
        const lang = getLang();
        const color = TAG_COLORS[label] || '#888';
        const info = TAG_DESCS[label];
        if (!info) return `<span style="color:${color}">${label}</span>`;
        const jaName = info.ja || '';
        const desc = lang === 'en' ? (info.descEn || info.descJa) : (info.descJa || info.descEn);

        let h = '<div class="tip-tag-head">';
        h += `<span class="tip-tag-dot" style="background:${color}"></span>`;
        h += `<span class="tip-tag-name" style="color:${color}">${label}`;
        if (jaName) h += `<span class="tip-tag-name-ja">（${jaName}）</span>`;
        h += '</span></div>';
        if (desc) h += `<div class="tip-desc">${desc}</div>`;
        return h;
      }

      /* find project data by id (for network nodes) */
      function findProject(id) {
        return projects.find(p => p.id === id);
      }

      /* ── hover ── */
      let activeFilter = null;

      node.on('mouseenter', function(event, d) {
        if (activeFilter) return;
        const neighbors = getNeighbors(d.id);
        svgEl.classList.add('has-hover');
        node.classed('node-active', n => neighbors.has(n.id));
        link.classed('edge-active', l => isLinkConnected(l, d.id));

        // tooltip
        if (d.type === 'tag') {
          tooltip.innerHTML = buildTagTip(d.label);
        } else {
          const proj = findProject(d.id);
          if (proj) {
            tooltip.innerHTML = buildProjectTip(proj);
          }
        }
        tooltip.classList.add('visible');
      })
      .on('mousemove', function(event) {
        const wrapRect = container.parentElement.getBoundingClientRect();
        const tipW = tooltip.offsetWidth || 200;
        const tipH = tooltip.offsetHeight || 40;
        let x = event.clientX - wrapRect.left + 16;
        let y = event.clientY - wrapRect.top - tipH - 8;
        if (x + tipW > wrapRect.width) x = event.clientX - wrapRect.left - tipW - 8;
        if (y < 0) y = event.clientY - wrapRect.top + 16;
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
      })
      .on('mouseleave', function() {
        if (activeFilter) return;
        svgEl.classList.remove('has-hover');
        node.classed('node-active', false);
        link.classed('edge-active', false);
        tooltip.classList.remove('visible');
      });

      /* ── click: tag → filter, project → scroll ── */
      node.on('click', function(event, d) {
        event.stopPropagation();
        if (d.type === 'tag') {
          if (activeFilter === d.id) {
            clearFilter();
          } else {
            activeFilter = d.id;
            applyFilter(d.id);
          }
        } else if (d.type === 'project') {
          // scroll to timeline bar + flash
          const tlWrap = document.getElementById('project-timeline-wrap');
          if (tlWrap) {
            tlWrap.scrollIntoView({ behavior: 'smooth', block: 'center' });
            if (tlBars) {
              tlBars.filter(b => b.id === d.id).each(function() {
                this.classList.remove('tl-flash');
                void this.offsetWidth; // reflow
                this.classList.add('tl-flash');
                setTimeout(() => this.classList.remove('tl-flash'), 1500);
              });
            }
          }
        }
      });

      svg.on('click', function() {
        if (activeFilter) clearFilter();
      });

      let _projSyncing = false;

      function applyFilter(tagId) {
        const neighbors = getNeighbors(tagId);
        svgEl.classList.remove('has-hover');
        svgEl.classList.add('has-filter');
        node.classed('node-active', n => neighbors.has(n.id));
        link.classed('edge-active', l => isLinkConnected(l, tagId));
        legendEl.querySelectorAll('.legend-item').forEach(li => {
          li.classList.toggle('legend-active', ('tag-' + li.dataset.tag) === tagId);
        });
        // dim project list
        const connectedProjects = new Set();
        links.forEach(l => {
          const sId = typeof l.source === 'object' ? l.source.id : l.source;
          const tId = typeof l.target === 'object' ? l.target.id : l.target;
          if (sId === tagId) connectedProjects.add(tId);
          if (tId === tagId) connectedProjects.add(sId);
        });
        projects.forEach(p => {
          if (connectedProjects.has(p.id)) {
            p.el.classList.remove('net-dimmed');
            p.el.classList.add('net-highlight');
          } else {
            p.el.classList.add('net-dimmed');
            p.el.classList.remove('net-highlight');
          }
        });
        // timeline bars
        if (tlBars) {
          tlBars.classed('tl-dimmed', d => !connectedProjects.has(d.id))
                .classed('tl-highlight', d => connectedProjects.has(d.id));
        }
        if (tlBarLabels) {
          tlBarLabels.attr('opacity', d => connectedProjects.has(d.id) ? 1 : 0.12);
        }
        // sync card list
        if (!_projSyncing && typeof window.__projCardApplyFilter === 'function') {
          window.__projCardApplyFilter(tagId);
        }
      }

      function clearFilter() {
        activeFilter = null;
        svgEl.classList.remove('has-filter');
        node.classed('node-active', false);
        link.classed('edge-active', false);
        legendEl.querySelectorAll('.legend-item').forEach(li => li.classList.remove('legend-active'));
        projects.forEach(p => {
          p.el.classList.remove('net-dimmed', 'net-highlight');
        });
        // timeline bars
        if (tlBars) {
          tlBars.classed('tl-dimmed', false).classed('tl-highlight', false);
        }
        if (tlBarLabels) {
          tlBarLabels.attr('opacity', 1);
        }
        // sync card list
        if (!_projSyncing && typeof window.__projCardClearFilter === 'function') {
          window.__projCardClearFilter();
        }
      }

      /* ── card ↔ network bidirectional sync ── */
      window.__projNetworkApplyFilter = function(tagId) {
        _projSyncing = true;
        activeFilter = tagId;
        applyFilter(tagId);
        _projSyncing = false;
      };
      window.__projNetworkClearFilter = function() {
        _projSyncing = true;
        clearFilter();
        _projSyncing = false;
      };

      /* ── zoom ── */
      const zoom = d3.zoom()
        .scaleExtent([0.4, 3])
        .on('zoom', (event) => {
          g.attr('transform', event.transform);
        });

      svg.call(zoom);
      svg.on('dblclick.zoom', () => {
        svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);
      });

      /* ── drag ── */
      const drag = d3.drag()
        .on('start', (event, d) => {
          if (!event.active) simulation.alphaTarget(0.3).restart();
          d.fx = d.x;
          d.fy = d.y;
        })
        .on('drag', (event, d) => {
          d.fx = event.x;
          d.fy = event.y;
        })
        .on('end', (event, d) => {
          if (!event.active) simulation.alphaTarget(0);
          d.fx = null;
          d.fy = null;
        });

      node.call(drag);

      /* ── tick ── */
      simulation.on('tick', () => {
        link
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);
        node.attr('transform', d => `translate(${d.x},${d.y})`);
      });

      /* ── legend ── */
      const tagOrder = [
        'Digital STS', 'Digital Philosophy of Science', 'Digital Anthropology',
        'STS', 'Philosophy of Science', 'Anthropology',
        'Digital Humanities', 'Digital Technology',
        'Humanities', 'Technology'
      ];
      tagOrder.forEach(tag => {
        if (!tagSet.has(tag)) return;
        const item = document.createElement('span');
        item.className = 'legend-item';
        item.dataset.tag = tag;
        const dot = document.createElement('span');
        dot.className = 'legend-dot';
        dot.style.background = TAG_COLORS[tag] || '#888';
        item.appendChild(dot);
        item.appendChild(document.createTextNode(tag));
        item.addEventListener('click', () => {
          const tagId = 'tag-' + tag;
          if (activeFilter === tagId) {
            clearFilter();
          } else {
            activeFilter = tagId;
            applyFilter(tagId);
          }
        });
        legendEl.appendChild(item);
      });

      /* ── bilingual: update labels on lang change ── */
      const langObserver = new MutationObserver(() => {
        // tooltip is dynamic, nothing static to update
      });
      langObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });

      /* ── lazy start with IntersectionObserver ── */
      let started = false;
      const netObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !started) {
            started = true;
            simulation.restart();
            setTimeout(keepAlive1, 2000);
            netObserver.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      netObserver.observe(container);

      /* also observe for scroll reveal */
      const networkWrap = document.getElementById('research-network');
      if (networkWrap) revealObserver.observe(networkWrap);

      /* ── responsive resize ── */
      window.addEventListener('resize', () => {
        W = container.clientWidth;
        H = container.clientHeight;
        svg.attr('viewBox', [0, 0, W, H].join(' '));
        simulation.force('center', d3.forceCenter(W / 2, H / 2));
        simulation.force('x', d3.forceX(W / 2).strength(0.04));
        simulation.force('y', d3.forceY(H / 2).strength(0.04));
        simulation.alpha(0.3).restart();
      }, { passive: true });

      /* ══════════════════════════════════════════════
         PROJECT TIMELINE (GANTT CHART)
         ══════════════════════════════════════════════ */
      (function drawTimeline() {
        const tlSvgEl = document.getElementById('timeline-svg');
        const tlContainer = document.getElementById('project-timeline');
        const tlTooltip = document.getElementById('timeline-tooltip');
        const tlWrap = document.getElementById('project-timeline-wrap');
        if (!tlSvgEl || !tlContainer) return;

        /* ── layout constants ── */
        const margin = { top: 50, right: 24, bottom: 30, left: 100 };
        const barHeight = 22;
        const barGap = 6;
        const groupGap = 28;
        const xMin = 2013;
        const xMax = 2031;

        /* ── split into PI / Co-I groups ── */
        const piProjects = projects.filter(p => p.group === 'pi').sort((a, b) => a.startYear - b.startYear);
        const coiProjects = projects.filter(p => p.group === 'coi').sort((a, b) => a.startYear - b.startYear);

        const piCount = piProjects.length;
        const coiCount = coiProjects.length;
        const totalBars = piCount + coiCount;
        const innerHeight = totalBars * (barHeight + barGap) + groupGap + 10;
        const totalHeight = margin.top + innerHeight + margin.bottom;
        const totalWidth = tlContainer.clientWidth || 700;

        const tlSvg = d3.select(tlSvgEl)
          .attr('width', totalWidth)
          .attr('height', totalHeight);

        /* ── X scale ── */
        let xScale = d3.scaleLinear()
          .domain([xMin, xMax])
          .range([margin.left, totalWidth - margin.right]);

        /* ── grid lines ── */
        const gridG = tlSvg.append('g').attr('class', 'tl-grid');
        function drawGrid() {
          gridG.selectAll('line').remove();
          for (let yr = xMin; yr <= xMax; yr++) {
            gridG.append('line')
              .attr('x1', xScale(yr))
              .attr('x2', xScale(yr))
              .attr('y1', margin.top)
              .attr('y2', totalHeight - margin.bottom);
          }
        }
        drawGrid();

        /* ── X axis ── */
        const axisG = tlSvg.append('g')
          .attr('class', 'tl-axis')
          .attr('transform', `translate(0,${totalHeight - margin.bottom})`);

        function drawAxis() {
          const ticks = [];
          for (let yr = xMin; yr <= xMax; yr++) ticks.push(yr);
          axisG.call(
            d3.axisBottom(xScale)
              .tickValues(ticks)
              .tickFormat(d => String(d))
              .tickSize(-innerHeight - 4)
          );
          axisG.select('.domain').remove();
          axisG.selectAll('.tick line').attr('stroke-opacity', 0);
        }
        drawAxis();

        /* ── "NOW" marker ── */
        const now = new Date();
        const nowFrac = now.getFullYear() + (now.getMonth() / 12);
        const nowG = tlSvg.append('g');

        function drawNow() {
          nowG.selectAll('*').remove();
          const nx = xScale(nowFrac);
          nowG.append('line')
            .attr('class', 'tl-today-line')
            .attr('x1', nx).attr('x2', nx)
            .attr('y1', margin.top - 8)
            .attr('y2', totalHeight - margin.bottom);
          nowG.append('text')
            .attr('x', nx)
            .attr('y', margin.top - 14)
            .attr('text-anchor', 'middle')
            .attr('fill', 'var(--accent)')
            .attr('font-size', '9px')
            .attr('letter-spacing', '0.1em')
            .text('NOW');
        }
        drawNow();

        /* ── group labels ── */
        function getGroupLabel(group) {
          const lang = getLang();
          if (group === 'pi') return lang === 'ja' ? '代表者' : 'PI';
          return lang === 'ja' ? '分担者' : 'Co-I';
        }

        const dividerY = margin.top + piCount * (barHeight + barGap) + groupGap / 2;
        const piLabelY = margin.top + (barHeight + barGap) * piCount / 2;
        const coiLabelY = margin.top + (barHeight + barGap) * piCount + groupGap + (barHeight + barGap) * coiCount / 2;

        /* ── group divider line ── */
        const dividerG = tlSvg.append('g');
        function drawDivider() {
          dividerG.selectAll('*').remove();
          dividerG.append('line')
            .attr('class', 'tl-divider')
            .attr('x1', margin.left)
            .attr('x2', xScale(xMax))
            .attr('y1', dividerY)
            .attr('y2', dividerY);
        }
        drawDivider();

        const piLabel = tlSvg.append('text')
          .attr('class', 'tl-group-label')
          .attr('x', 12)
          .attr('y', piLabelY)
          .attr('dominant-baseline', 'central')
          .text(getGroupLabel('pi'));

        const coiLabel = tlSvg.append('text')
          .attr('class', 'tl-group-label')
          .attr('x', 12)
          .attr('y', coiLabelY)
          .attr('dominant-baseline', 'central')
          .text(getGroupLabel('coi'));

        /* ── MutationObserver for language switch ── */
        const tlLangObs = new MutationObserver(() => {
          piLabel.text(getGroupLabel('pi'));
          coiLabel.text(getGroupLabel('coi'));
        });
        tlLangObs.observe(document.body, { attributes: true, attributeFilter: ['class'] });

        /* ── bar y positions ── */
        function barY(d) {
          if (d.group === 'pi') {
            const idx = piProjects.indexOf(d);
            return margin.top + idx * (barHeight + barGap);
          } else {
            const idx = coiProjects.indexOf(d);
            return margin.top + piCount * (barHeight + barGap) + groupGap + idx * (barHeight + barGap);
          }
        }

        /* ── all projects sorted for entry animation ── */
        const allSorted = [...piProjects, ...coiProjects];

        /* ── draw bars ── */
        const barsG = tlSvg.append('g');

        tlBars = barsG.selectAll('rect')
          .data(allSorted)
          .join('rect')
          .attr('class', 'tl-bar')
          .attr('x', d => xScale(d.startYear))
          .attr('y', d => barY(d))
          .attr('height', barHeight)
          .attr('width', 0)
          .attr('rx', 2)
          .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
          .attr('fill-opacity', 0.65);

        /* ── number labels ── */
        tlBarLabels = barsG.selectAll('text.tl-bar-num')
          .data(allSorted)
          .join('text')
          .attr('class', 'tl-bar-num')
          .attr('x', d => xScale(d.startYear) + 8)
          .attr('y', d => barY(d) + barHeight / 2)
          .attr('dominant-baseline', 'central')
          .attr('opacity', 0)
          .text(d => '#' + d.num);

        /* ── entry animation via IntersectionObserver ── */
        let tlAnimated = false;
        const tlObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !tlAnimated) {
              tlAnimated = true;
              tlBars.transition()
                .delay((d, i) => i * 60)
                .duration(800)
                .ease(d3.easeCubicOut)
                .attr('width', d => Math.max(xScale(d.endYear) - xScale(d.startYear), 6));

              tlBarLabels.transition()
                .delay((d, i) => i * 60 + 500)
                .duration(400)
                .attr('opacity', 1);

              tlObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        tlObserver.observe(tlContainer);

        /* ── hover tooltip ── */
        tlBars.on('mouseenter', function(event, d) {
          tlTooltip.innerHTML = buildProjectTip(d);
          tlTooltip.classList.add('visible');
        })
        .on('mousemove', function(event) {
          const rect = tlContainer.getBoundingClientRect();
          const tipW = tlTooltip.offsetWidth || 200;
          const tipH = tlTooltip.offsetHeight || 40;
          let x = event.clientX - rect.left + 16;
          let y = event.clientY - rect.top - tipH - 8;
          if (x + tipW > rect.width) x = event.clientX - rect.left - tipW - 8;
          if (y < 0) y = event.clientY - rect.top + 16;
          tlTooltip.style.left = x + 'px';
          tlTooltip.style.top = y + 'px';
        })
        .on('mouseleave', function() {
          tlTooltip.classList.remove('visible');
        });

        /* ── click → highlight network node ── */
        tlBars.on('click', function(event, d) {
          event.stopPropagation();
          // highlight matching project node in network
          const neighbors = getNeighbors(d.id);
          svgEl.classList.remove('has-hover');
          svgEl.classList.add('has-filter');
          node.classed('node-active', n => neighbors.has(n.id));
          link.classed('edge-active', l => isLinkConnected(l, d.id));
          activeFilter = '__tl_' + d.id; // mark as timeline-originated filter

          // scroll to network
          const netEl = document.getElementById('research-network');
          if (netEl) netEl.scrollIntoView({ behavior: 'smooth', block: 'center' });

          // auto-clear after 3s
          setTimeout(() => {
            if (activeFilter === '__tl_' + d.id) {
              clearFilter();
            }
          }, 3000);
        });

        /* ── responsive resize ── */
        window.addEventListener('resize', () => {
          const newW = tlContainer.clientWidth || 700;
          tlSvg.attr('width', newW);
          xScale.range([margin.left, newW - margin.right]);

          tlBars
            .attr('x', d => xScale(d.startYear))
            .attr('width', d => tlAnimated ? Math.max(xScale(d.endYear) - xScale(d.startYear), 6) : 0);

          tlBarLabels
            .attr('x', d => xScale(d.startYear) + 8);

          drawGrid();
          drawAxis();
          drawNow();
          drawDivider();
        }, { passive: true });

        /* ── observe for scroll reveal ── */
        if (tlWrap) revealObserver.observe(tlWrap);

      })();

    })();

    /* ── CAREER & EDUCATION: CARDS + NETWORK + TIMELINE ── */
    (function() {
      const ctSvgEl = document.getElementById('career-timeline-svg');
      const ctContainer = document.getElementById('career-timeline');
      const ctTooltip = document.getElementById('career-timeline-tooltip');
      const ctWrap = document.getElementById('career-timeline-wrap');

      /* ── local TAG_COLORS ── */
      const TAG_COLORS = {
        'Anthropology':                 '#c87a5e',
        'Digital Anthropology':         '#c8a96e',
        'STS':                          '#6ab08a',
        'Digital STS':                  '#4dc4a8',
        'Philosophy of Science':        '#a87cb0',
        'Digital Philosophy of Science':'#8e7fd4',
        'Humanities':                   '#4868a8',
        'Digital Humanities':           '#38b0e8',
        'Digital Technology':           '#78a8e0',
        'Technology':                   '#6890c0',
        'Neuroscience':                 '#e06878',
        'Research Ethics':              '#d4a84b'
      };

      /* ── tag descriptions (ja / en) ── */
      const TAG_DESCS = {
        'Philosophy of Science': {
          ja: '科学哲学',
          descJa: '科学哲学は、科学的知識の性質、科学の基礎、およびその方法論を哲学的な視点から探求する学問分野です。「科学とは何か」「科学的知識はどのようにして正当化されるのか」といった根本的な問いを扱います。科学理論が現実をどのように記述しているのか、因果関係や推論の妥当性、理論と観察の関係、そして科学の発展メカニズム（パラダイムシフトなど）を考察します。科学の客観性や権威の本質を解き明かし、科学が現代社会や倫理に与える影響をメタ的な視点から批判的に分析する役割を担っています。',
          descEn: 'Philosophy of Science is a branch of philosophy that critically examines the foundations, methods, and implications of scientific inquiry. It addresses fundamental questions such as "What is science?" and "How is scientific knowledge justified?" This field explores how scientific theories describe reality, analyzing concepts like causality, the validity of scientific reasoning, and the mechanisms of scientific development, such as paradigm shifts. By unpacking the essence of scientific objectivity and authority, it plays a crucial role in providing a meta-perspective on how science influences modern society, culture, and ethics.'
        },
        'Digital Philosophy of Science': {
          ja: 'デジタル科学哲学',
          descJa: 'デジタル科学哲学は、伝統的な科学哲学の問いに対して、情報技術やデータサイエンスの手法を用いてアプローチする新興の学際分野です。テキストマイニング、ネットワーク分析、コンピュータ・シミュレーションなどの計算論的手法を活用し、膨大な科学論文や歴史的データを計量的に分析することで、科学理論の変遷や研究コミュニティの動態を実証的に解明します。さらに、人工知能（AI）やビッグデータを用いたデータ駆動型の研究手法が、科学的知識の客観性や正当性にどのような影響を与えるかといった現代的な課題も考察します。',
          descEn: 'Digital Philosophy of Science is an emerging interdisciplinary field that addresses traditional philosophical questions about science using computational methods and digital tools. By utilizing techniques such as text mining, network analysis, and computer simulations, researchers quantitatively analyze vast amounts of scientific literature to empirically trace the evolution of scientific theories and community dynamics. Furthermore, it investigates the unique epistemological and ethical challenges of the modern era, questioning how data-driven research methods, artificial intelligence, and algorithmic decision-making impact the objectivity and justification of scientific knowledge.'
        },
        'Anthropology': {
          ja: '人類学',
          descJa: '人類学は、人間の進化、行動、文化、社会、言語を時間的・空間的に幅広く研究し、「人間とは何か」という根源的な問いに挑む総合的な学問分野です。大きく分けて、生物学的な進化を探求する自然人類学と、社会構造や多様な文化を研究する文化人類学などがあります。特に文化人類学では、研究対象となるコミュニティに長期間滞在する「フィールドワーク（参与観察）」を重視します。多様な人々の生活様式や価値観を内側から深く理解することで、自文化の常識を相対化し、人間社会の多様性と普遍性を探求します。',
          descEn: 'Anthropology is the comprehensive study of human evolution, behavior, culture, society, and language across time and space, fundamentally seeking to answer what it means to be human. It is primarily divided into physical anthropology, which explores human biological evolution, and cultural anthropology, which investigates diverse social structures and lifestyles. Cultural anthropology, in particular, emphasizes fieldwork and participant observation, where researchers immerse themselves in communities for extended periods. By understanding diverse values from an insider\'s perspective, anthropology relativizes our own cultural assumptions and explores both the vast diversity and underlying universality of human societies.'
        },
        'Digital Anthropology': {
          ja: 'デジタル人類学',
          descJa: 'デジタル人類学は、インターネット、SNS、スマートフォン、人工知能、メタバースなどのデジタル技術が、人間の日常生活、文化、社会関係、アイデンティティの形成にどのような影響を与えているかを研究する新しい領域です。オンライン空間でのフィールドワーク（デジタル・エスノグラフィ）などの手法を用いて、サイバースペースにおける人間の行動やコミュニケーションの変容を分析します。オンラインとオフラインの境界が曖昧になる現代社会において、テクノロジーがいかに文化実践を再構築しているかを解明する学問です。',
          descEn: 'Digital Anthropology is a relatively new subfield of anthropology that investigates how digital technologies\u2014such as the internet, social media, smartphones, artificial intelligence, and the metaverse\u2014affect human daily life, culture, social relationships, and identity formation. Utilizing methods like digital ethnography, researchers observe and analyze behavioral patterns and transformations in communication within cyberspace. In a contemporary society where the boundary between online and offline worlds is increasingly blurred, this vital discipline illuminates how the ubiquitous presence of technology continuously reshapes our cultural practices and redefines what it means to be human in the digital age.'
        },
        'STS': {
          ja: '科学技術社会論',
          descJa: 'STS（Science and Technology Studies）は、科学的知識や技術的イノベーションが、社会、文化、政治、歴史の文脈とどのように相互作用しながら形成されているかを研究する学際的な分野です。科学や技術を単なる客観的な真理や中立的な道具としてではなく、人間の価値観、経済的利益、権力関係が複雑に絡み合った「社会的な構築物」として捉えます。気候変動、生命倫理、新技術の社会的受容など、現代社会が直面する複雑な課題に対し批判的な視点を提供し、専門家と市民の対話のあり方や民主的な科学技術政策の構築を模索します。',
          descEn: 'STS (Science and Technology Studies) is an interdisciplinary field that investigates how scientific knowledge and technological innovations are shaped by, and in turn shape, society, culture, politics, and history. Instead of viewing science and technology as purely objective truths or neutral tools, STS understands them as "social constructs" intricately entangled with human values, economic interests, and power dynamics. The field provides critical perspectives on complex contemporary challenges such as climate change, bioethics, and the societal acceptance of new technologies, striving to foster better dialogue between experts and citizens and to build more democratic science and technology policies.'
        },
        'Digital STS': {
          ja: 'デジタルSTS',
          descJa: 'デジタルSTSは、科学技術社会論（STS）の分析枠組みや批判的視点を、アルゴリズム、ビッグデータ、巨大プラットフォームといった現代のデジタル技術に適用する分野です。データ収集やAIによる自動意思決定が、いかにして社会的なバイアスや差別を内包し、既存の権力構造を再生産しているかを解明します。同時に、ネットワーク分析やデータマイニングといった計算論的アプローチを調査手法として活用します。見えにくいデジタルインフラのブラックボックスを解体し、データ駆動型社会における倫理やガバナンスを問い直します。',
          descEn: 'Digital STS is a specialized branch of Science and Technology Studies that applies STS analytical frameworks specifically to modern digital technologies, including algorithms, big data, and digital platforms. It critically examines how data collection and automated decision-making by AI embed social biases and reproduce existing power structures and inequalities. Simultaneously, it actively incorporates computational approaches\u2014such as data mining and network analysis\u2014into its research methodologies. By unpacking the opaque "black boxes" of digital infrastructures, this advanced research area fundamentally questions the ethics, governance, and societal impacts inherent in our increasingly data-driven society.'
        },
        'Humanities': {
          ja: '人文学',
          descJa: '人文学（ヒューマニティーズ）は、文学、歴史学、哲学、言語学、宗教学、芸術学などの多様なアプローチを通じて、人間の思想、文化、歴史、精神的所産を深く理解しようとする学問領域の総称です。自然科学が客観的なデータに基づく普遍的な法則の発見を目指すのに対し、人文学は人間の主観的な経験、価値観の多様性、そして意味の解釈に重きを置きます。過去から受け継がれてきたテキストや史料の批判的な読解を通じて人類の営みを詳細に分析し、「私たちは何者なのか」「どう生きるべきか」という根源的な問いに向き合い続けます。',
          descEn: 'The Humanities encompass a broad group of academic disciplines\u2014including literature, history, philosophy, linguistics, religious studies, and the arts\u2014dedicated to the profound understanding of human thought, culture, history, and spiritual endeavors. While the natural sciences strive to objectively discover universal laws, the humanities emphasize subjective human experiences, the diversity of values, and the critical interpretation of meaning. Through the meticulous analysis of historical texts, primary documents, and artistic works inherited from the past, the humanities continuously address fundamental questions about human existence, exploring "who we are" and "how we ought to live."'
        },
        'Digital Technology': {
          ja: 'デジタルテクノロジー',
          descJa: 'デジタルテクノロジー（デジタル技術）は、音声や画像、テキストなどの連続的なアナログ情報を「0」と「1」の離散的な二進数データに変換して処理、保存、通信を行う技術体系全般を指します。コンピュータ科学や情報工学を基盤とし、ソフトウェア開発、インターネット、人工知能（AI）、クラウドコンピューティング、IoTなどが含まれます。膨大なデータを高速かつ正確に処理できる点が特徴であり、現代のあらゆる産業やインフラを根底から支え、社会課題の解決とイノベーションを牽引する極めて実践的な分野です。',
          descEn: 'Digital Technology refers to the comprehensive system of technologies that process, store, and transmit continuous analog information by converting it into discrete binary data (zeros and ones). Rooted in computer science and information engineering, this field encompasses software development, the internet, artificial intelligence (AI), cloud computing, and the Internet of Things (IoT). Characterized by its unprecedented ability to process massive amounts of data rapidly and accurately, digital technology forms the indispensable backbone of all modern industries and societal infrastructures, driving innovation and providing practical solutions to complex contemporary challenges.'
        },
        'Technology': {
          ja: 'テクノロジー / 技術・工学',
          descJa: 'テクノロジー（技術・工学）は、科学的な知識や実証的な経験則を応用して、人間の生活を向上させ、社会的な課題を解決するための手段、道具、機械、システムを創出する分野です。学術的なタグとしては、機械、電子、材料、土木、バイオテクノロジーなどの工学領域全般を包含します。新しいハードウェアの開発やインフラの構築にとどまらず、製造プロセスの最適化、エネルギー効率の向上、技術革新が環境や社会構造に与える影響の評価なども重要なテーマです。理論を現実世界で安全かつ効果的に機能する形へと変換する実践的な領域です。',
          descEn: 'Technology, often categorized under engineering and applied sciences, is the broad field dedicated to applying scientific knowledge and empirical principles to create tools, machines, and systems that improve human life and solve practical societal challenges. As an academic tag, it encompasses a vast array of disciplines, including mechanical, electrical, civil, and biotechnology engineering. Important themes extend beyond developing new hardware to include optimizing manufacturing processes, enhancing energy efficiency, and rigorously assessing the environmental and social impacts of innovations. It is a highly practical domain focused on translating theories into functional and effective real-world applications.'
        },
        'Digital Humanities': {
          ja: 'デジタル人文学',
          descJa: 'デジタルヒューマニティーズ（デジタル人文学）は、歴史学や文学といった伝統的な人文学の研究手法に、最新のデジタル技術や計算論的アプローチを融合させた革新的な学際分野です。歴史的文書や芸術作品などの膨大な文化資源をデジタルデータ化し、テキストマイニング、ネットワーク分析、地理情報システム（GIS）、3Dモデリングなどを用いて解析します。これにより、人間の目視だけでは発見できなかった大規模なパターン（遠読）や新たな知見を抽出し、人文学の知識生産のあり方を革新し、可能性を大きく広げています。',
          descEn: 'Digital Humanities is an innovative, interdisciplinary field that merges traditional humanistic research\u2014such as history and literature\u2014with cutting-edge digital technologies and computational approaches. Researchers digitize vast collections of cultural resources, including historical manuscripts and artworks, and analyze them using advanced techniques like text mining, network analysis, Geographic Information Systems (GIS), and 3D modeling. This computational power enables scholars to engage in "distant reading," extracting new insights and uncovering large-scale patterns impossible to detect through manual analysis alone. By synergizing technological capabilities with humanistic insight, it revolutionizes knowledge production in the humanities.'
        },
        'Research Ethics': {
          ja: '研究倫理',
          descJa: '研究倫理は、科学的探求や学術活動において研究者が遵守すべき行動規範や道徳的原則を探求・実践する分野です。研究の誠実性（インテグリティ）を確保し、科学に対する社会の信頼を維持・構築することを最大の目的としています。具体的には、データの捏造、改ざん、盗用といった研究不正行為の防止をはじめ、研究データの適切な取り扱い、論文の正当な著者資格（オーサーシップ）、資金提供元との利益相反の透明化など、研究活動全般に関わる規範を扱います。',
          descEn: 'Research Ethics is an academic field that explores and implements the codes of conduct and moral principles that researchers must observe in their scientific inquiry and scholarly activities. Its primary objective is to ensure research integrity and maintain public trust in science. Specifically, it addresses norms related to overall research practices, including the prevention of research misconduct—such as fabrication, falsification, and plagiarism—as well as proper data management, fair authorship allocation, and the transparent disclosure of conflicts of interest.'
        },
        'Neuroscience': {
          ja: '神経科学',
          descJa: '神経科学は、脳、脊髄、末梢神経からなる神経系の構造、機能、発達、および病理を解明しようとする学際的な学問分野です。遺伝子やタンパク質、神経細胞（ニューロン）が連携するミクロなレベルの働きから、複雑な神経回路のネットワーク、さらには知覚、学習、記憶、感情、意思決定、そして「意識」といったマクロな精神活動に至るまで、幅広いスケールで「物質である脳がいかにして心や行動を生み出すのか」という根源的な問いに挑みます。',
          descEn: 'Neuroscience is an interdisciplinary academic field dedicated to uncovering the structure, function, development, and pathology of the nervous system, encompassing the brain, spinal cord, and peripheral nerves. It tackles the fundamental question of how the physical brain generates the mind and behavior across a vast spectrum of scales.'
        }
      };

      /* ── language helper ── */
      function getLang() {
        return document.body.classList.contains('lang-en') ? 'en' : 'ja';
      }

      /* ── parse period string → { start, end } as fractional year ── */
      function parsePeriod(periodEl) {
        const text = periodEl.textContent.trim();
        // e.g. "2025.04 — 現在" or "2022.04 — 2025.03" or "2022.03"
        const parts = text.split(/\s*[—–-]\s*/);
        function toFrac(s) {
          s = s.trim();
          if (s.includes('現在') || s.includes('Present')) {
            const now = new Date();
            return now.getFullYear() + now.getMonth() / 12;
          }
          const m = s.match(/(\d{4})\.(\d{2})/);
          if (m) return parseInt(m[1]) + (parseInt(m[2]) - 1) / 12;
          return parseFloat(s) || 0;
        }
        if (parts.length >= 2) {
          return { start: toFrac(parts[0]), end: toFrac(parts[1]) };
        }
        // single point (degree)
        const v = toFrac(parts[0]);
        return { start: v, end: v };
      }

      /* ── extract data from DOM ── */
      const careerSection = document.querySelector('.career-static-list');
      if (!careerSection) return;

      const allLists = careerSection.querySelectorAll('.career-list');
      // list 0 = career, list 1 = degrees, list 2 = education
      const careerItems = [];
      const degreeItems = [];
      const educationItems = [];

      function extractItems(listEl, group) {
        const items = [];
        listEl.querySelectorAll('.career-item').forEach(el => {
          const periodEl = el.querySelector('.career-period');
          if (!periodEl) return;
          const period = parsePeriod(periodEl);

          const bodyEl = el.querySelector('.career-body');
          const jaSpan = bodyEl ? bodyEl.querySelector('[data-lang="ja"]') : null;
          const enSpan = bodyEl ? bodyEl.querySelector('[data-lang="en"]') : null;
          const ja = jaSpan ? jaSpan.textContent.trim() : (bodyEl ? bodyEl.textContent.trim() : '');
          const en = enSpan ? enSpan.textContent.trim() : '';

          const roleEl = el.querySelector('.career-role');
          let roleJa = '', roleEn = '';
          if (roleEl) {
            const rja = roleEl.querySelector('[data-lang="ja"]');
            const ren = roleEl.querySelector('[data-lang="en"]');
            roleJa = rja ? rja.textContent.trim() : roleEl.textContent.trim();
            roleEn = ren ? ren.textContent.trim() : '';
          }

          const tags = [];
          el.querySelectorAll('.topic-tag').forEach(t => {
            tags.push(t.getAttribute('data-tag') || t.textContent.trim());
          });

          // extract link URL
          const linkEl = bodyEl ? bodyEl.querySelector('a[href]') : null;
          const url = linkEl ? linkEl.getAttribute('href') : '';

          // tenure end (e.g. "2053.03" → fractional year)
          const tenureAttr = el.getAttribute('data-tenure-end');
          let tenureEnd = 0;
          if (tenureAttr) {
            const tm = tenureAttr.match(/(\d{4})\.(\d{2})/);
            tenureEnd = tm ? parseInt(tm[1]) + (parseInt(tm[2]) - 1) / 12 : parseFloat(tenureAttr);
          }

          items.push({
            group: group,
            start: period.start,
            end: period.end,
            ja: ja,
            en: en,
            roleJa: roleJa,
            roleEn: roleEn,
            tags: tags,
            url: url,
            isPoint: period.start === period.end,
            tenureEnd: tenureEnd
          });
        });
        return items;
      }

      if (allLists[0]) careerItems.push(...extractItems(allLists[0], 'career'));
      if (allLists[1]) degreeItems.push(...extractItems(allLists[1], 'degree'));
      if (allLists[2]) educationItems.push(...extractItems(allLists[2], 'education'));

      /* ── sort by start date ── */
      careerItems.sort((a, b) => a.start - b.start);
      educationItems.sort((a, b) => a.start - b.start);
      degreeItems.sort((a, b) => a.start - b.start);

      /* ── layout constants ── */
      const margin = { top: 50, right: 24, bottom: 30, left: 100 };
      const barHeight = 22;
      const barGap = 6;
      const groupGap = 28;
      const xMin = 2003;
      const xMax = 2055;

      const careerCount = careerItems.length;
      const eduCount = educationItems.length;
      const totalBars = careerCount + eduCount;
      const innerHeight = totalBars * (barHeight + barGap) + groupGap + 10;
      const totalHeight = margin.top + innerHeight + margin.bottom;
      const totalWidth = ctContainer.clientWidth || 700;

      const ctSvg = d3.select(ctSvgEl)
        .attr('width', totalWidth)
        .attr('height', totalHeight);

      /* ── X scale ── */
      let xScale = d3.scaleLinear()
        .domain([xMin, xMax])
        .range([margin.left, totalWidth - margin.right]);

      /* ── grid lines ── */
      const gridG = ctSvg.append('g').attr('class', 'tl-grid');
      function drawGrid() {
        gridG.selectAll('line').remove();
        for (let yr = xMin; yr <= xMax; yr += 5) {
          gridG.append('line')
            .attr('x1', xScale(yr))
            .attr('x2', xScale(yr))
            .attr('y1', margin.top)
            .attr('y2', totalHeight - margin.bottom);
        }
      }
      drawGrid();

      /* ── X axis ── */
      const axisG = ctSvg.append('g')
        .attr('class', 'tl-axis')
        .attr('transform', `translate(0,${totalHeight - margin.bottom})`);

      function drawAxis() {
        const ticks = [];
        for (let yr = xMin; yr <= xMax; yr += 5) ticks.push(yr);
        axisG.call(
          d3.axisBottom(xScale)
            .tickValues(ticks)
            .tickFormat(d => String(d))
            .tickSize(-innerHeight - 4)
        );
        axisG.select('.domain').remove();
        axisG.selectAll('.tick line').attr('stroke-opacity', 0);
      }
      drawAxis();

      /* ── NOW marker ── */
      const now = new Date();
      const nowFrac = now.getFullYear() + (now.getMonth() / 12);
      const nowG = ctSvg.append('g');

      function drawNow() {
        nowG.selectAll('*').remove();
        const nx = xScale(nowFrac);
        nowG.append('line')
          .attr('class', 'tl-today-line')
          .attr('x1', nx).attr('x2', nx)
          .attr('y1', margin.top - 8)
          .attr('y2', totalHeight - margin.bottom);
        nowG.append('text')
          .attr('x', nx)
          .attr('y', margin.top - 14)
          .attr('text-anchor', 'middle')
          .attr('fill', 'var(--accent)')
          .attr('font-size', '9px')
          .attr('letter-spacing', '0.1em')
          .text('NOW');
      }
      drawNow();

      /* ── group labels ── */
      function getCareerGroupLabel() {
        return getLang() === 'ja' ? '職歴' : 'Career';
      }
      function getEduGroupLabel() {
        return getLang() === 'ja' ? '学歴' : 'Education';
      }

      const dividerY = margin.top + eduCount * (barHeight + barGap) + groupGap / 2;
      const eduLabelY = margin.top + (barHeight + barGap) * eduCount / 2;
      const careerLabelY = margin.top + (barHeight + barGap) * eduCount + groupGap + (barHeight + barGap) * careerCount / 2;

      /* ── group divider line ── */
      const dividerG = ctSvg.append('g');
      function drawDivider() {
        dividerG.selectAll('*').remove();
        dividerG.append('line')
          .attr('class', 'tl-divider')
          .attr('x1', margin.left)
          .attr('x2', xScale(xMax))
          .attr('y1', dividerY)
          .attr('y2', dividerY);
      }
      drawDivider();

      const careerLabel = ctSvg.append('text')
        .attr('class', 'tl-group-label')
        .attr('x', 12)
        .attr('y', careerLabelY)
        .attr('dominant-baseline', 'central')
        .text(getCareerGroupLabel());

      const eduLabel = ctSvg.append('text')
        .attr('class', 'tl-group-label')
        .attr('x', 12)
        .attr('y', eduLabelY)
        .attr('dominant-baseline', 'central')
        .text(getEduGroupLabel());

      /* (language observer set up after all elements are created) */

      /* ── bar y positions (Education on top, Career on bottom) ── */
      function barY(d) {
        if (d.group === 'education') {
          const idx = educationItems.indexOf(d);
          return margin.top + idx * (barHeight + barGap);
        } else {
          const idx = careerItems.indexOf(d);
          return margin.top + eduCount * (barHeight + barGap) + groupGap + idx * (barHeight + barGap);
        }
      }

      /* ── stripe pattern for tenure projection ── */
      const defs = ctSvg.append('defs');
      // create one stripe pattern per unique first-tag color used by tenured items
      const allBars = [...careerItems, ...educationItems];
      const tenuredColors = new Set();
      allBars.forEach(d => { if (d.tenureEnd) tenuredColors.add(TAG_COLORS[d.tags[0]] || '#888'); });
      tenuredColors.forEach(color => {
        const pid = 'tenure-stripe-' + color.replace('#', '');
        const pat = defs.append('pattern')
          .attr('id', pid)
          .attr('patternUnits', 'userSpaceOnUse')
          .attr('width', 6).attr('height', 6)
          .attr('patternTransform', 'rotate(45)');
        pat.append('rect').attr('width', 6).attr('height', 6).attr('fill', color).attr('opacity', 0.18);
        pat.append('line').attr('x1', 0).attr('y1', 0).attr('x2', 0).attr('y2', 6)
          .attr('stroke', color).attr('stroke-width', 2).attr('opacity', 0.35);
      });

      /* ── draw career bars (solid portion) ── */
      const barsG = ctSvg.append('g');

      // For tenured items, the solid bar goes from start → now
      // For others, start → end
      function barEnd(d) {
        return d.tenureEnd ? Math.min(d.end, nowFrac) : d.end;
      }

      const ctBars = barsG.selectAll('rect.tl-bar')
        .data(allBars)
        .join('rect')
        .attr('class', 'tl-bar')
        .attr('x', d => xScale(d.start))
        .attr('y', d => barY(d))
        .attr('height', barHeight)
        .attr('width', 0)
        .attr('rx', 2)
        .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
        .attr('fill-opacity', 0.65);

      /* ── tenure projection bars (striped, now → retirement) ── */
      const tenureData = allBars.filter(d => d.tenureEnd);
      const ctTenureBars = barsG.selectAll('rect.tl-tenure')
        .data(tenureData)
        .join('rect')
        .attr('class', 'tl-bar')
        .attr('x', d => xScale(nowFrac))
        .attr('y', d => barY(d))
        .attr('height', barHeight)
        .attr('width', 0)
        .attr('rx', 2)
        .attr('fill', d => {
          const color = TAG_COLORS[d.tags[0]] || '#888';
          return `url(#tenure-stripe-${color.replace('#', '')})`;
        })
        .attr('fill-opacity', 1);

      /* ── tenure end labels (hidden) ── */
      const ctTenureLabels = barsG.selectAll('text.tl-tenure-label')
        .data(tenureData)
        .join('text')
        .attr('class', 'tl-group-label')
        .attr('x', d => xScale(d.tenureEnd) + 4)
        .attr('y', d => barY(d) + barHeight / 2)
        .attr('dominant-baseline', 'central')
        .attr('font-size', '9px')
        .attr('opacity', 0)
        .text('');

      /* ── degree diamond markers ── */
      // map each degree to the corresponding education bar row (by index)
      degreeItems.forEach((deg, i) => {
        deg.eduIndex = Math.min(i, eduCount - 1);
      });

      function diamondY(d) {
        return margin.top + d.eduIndex * (barHeight + barGap) + barHeight / 2;
      }

      const diamondG = ctSvg.append('g');
      const diamondSize = 7;

      const ctDiamonds = diamondG.selectAll('path.tl-diamond')
        .data(degreeItems)
        .join('path')
        .attr('class', 'tl-diamond')
        .attr('d', d3.symbol().type(d3.symbolDiamond).size(diamondSize * diamondSize * 2))
        .attr('transform', d => `translate(${xScale(d.start)},${diamondY(d)})`)
        .attr('fill', 'var(--accent)')
        .attr('fill-opacity', 0)
        .attr('stroke', 'var(--accent)')
        .attr('stroke-width', 1.5)
        .attr('stroke-opacity', 0);

      /* ── MutationObserver for language switch ── */
      const ctLangObs = new MutationObserver(() => {
        careerLabel.text(getCareerGroupLabel());
        eduLabel.text(getEduGroupLabel());
        ctTenureLabels.text('');
      });
      ctLangObs.observe(document.body, { attributes: true, attributeFilter: ['class'] });

      /* ── format period text ── */
      function formatPeriod(d) {
        function ym(frac) {
          const y = Math.floor(frac);
          const m = Math.round((frac - y) * 12) + 1;
          return y + '.' + String(m).padStart(2, '0');
        }
        if (d.isPoint) return ym(d.start);
        const lang = getLang();
        let endLabel;
        if (d.tenureEnd) {
          endLabel = ym(d.tenureEnd);
        } else if (d.end >= nowFrac - 0.01) {
          endLabel = lang === 'ja' ? '現在' : 'Present';
        } else {
          endLabel = ym(d.end);
        }
        return ym(d.start) + ' — ' + endLabel;
      }

      /* ── rich tooltip builder ── */
      function buildCareerTip(d) {
        const lang = getLang();
        const color = TAG_COLORS[d.tags[0]] || 'var(--accent)';
        const title = lang === 'en' ? (d.en || d.ja) : (d.ja || d.en);
        const role = lang === 'en' ? (d.roleEn || d.roleJa) : (d.roleJa || d.roleEn);
        const period = formatPeriod(d);

        let h = '<div class="tip-head">';
        h += `<span class="tip-year">${period}</span>`;
        h += '</div>';
        h += `<div class="tip-title">${title}</div>`;
        if (role) {
          h += `<div class="tip-grant" style="border-top:none;padding-top:0;margin-top:0;">${role}</div>`;
        }
        if (d.tags.length) {
          h += '<div class="tip-tags">';
          d.tags.forEach(t => {
            const tc = TAG_COLORS[t] || '#888';
            h += `<span class="tip-tag" style="color:${tc};border-color:${tc}">${t}</span>`;
          });
          h += '</div>';
        }
        return h;
      }

      function buildDegreeTip(d) {
        const lang = getLang();
        const title = lang === 'en' ? (d.en || d.ja) : (d.ja || d.en);
        const period = formatPeriod(d);

        let h = '<div class="tip-head">';
        h += `<span class="tip-num" style="background:var(--accent)">◆</span>`;
        h += `<span class="tip-year">${period}</span>`;
        h += '</div>';
        h += `<div class="tip-title">${title}</div>`;
        return h;
      }

      /* ── hover tooltip (bars) ── */
      ctBars.on('mouseenter', function(event, d) {
        ctTooltip.innerHTML = buildCareerTip(d);
        ctTooltip.classList.add('visible');
      })
      .on('mousemove', function(event) {
        const rect = ctContainer.getBoundingClientRect();
        const tipW = ctTooltip.offsetWidth || 200;
        const tipH = ctTooltip.offsetHeight || 40;
        let x = event.clientX - rect.left + 16;
        let y = event.clientY - rect.top - tipH - 8;
        if (x + tipW > rect.width) x = event.clientX - rect.left - tipW - 8;
        if (y < 0) y = event.clientY - rect.top + 16;
        ctTooltip.style.left = x + 'px';
        ctTooltip.style.top = y + 'px';
      })
      .on('mouseleave', function() {
        ctTooltip.classList.remove('visible');
      });

      /* ── hover tooltip (tenure projection bars) ── */
      ctTenureBars.on('mouseenter', function(event, d) {
        ctTooltip.innerHTML = buildCareerTip(d);
        ctTooltip.classList.add('visible');
      })
      .on('mousemove', function(event) {
        const rect = ctContainer.getBoundingClientRect();
        const tipW = ctTooltip.offsetWidth || 200;
        const tipH = ctTooltip.offsetHeight || 40;
        let x = event.clientX - rect.left + 16;
        let y = event.clientY - rect.top - tipH - 8;
        if (x + tipW > rect.width) x = event.clientX - rect.left - tipW - 8;
        if (y < 0) y = event.clientY - rect.top + 16;
        ctTooltip.style.left = x + 'px';
        ctTooltip.style.top = y + 'px';
      })
      .on('mouseleave', function() {
        ctTooltip.classList.remove('visible');
      });

      /* ── hover tooltip (diamonds) ── */
      ctDiamonds.on('mouseenter', function(event, d) {
        ctTooltip.innerHTML = buildDegreeTip(d);
        ctTooltip.classList.add('visible');
      })
      .on('mousemove', function(event) {
        const rect = ctContainer.getBoundingClientRect();
        const tipW = ctTooltip.offsetWidth || 200;
        const tipH = ctTooltip.offsetHeight || 40;
        let x = event.clientX - rect.left + 16;
        let y = event.clientY - rect.top - tipH - 8;
        if (x + tipW > rect.width) x = event.clientX - rect.left - tipW - 8;
        if (y < 0) y = event.clientY - rect.top + 16;
        ctTooltip.style.left = x + 'px';
        ctTooltip.style.top = y + 'px';
      })
      .on('mouseleave', function() {
        ctTooltip.classList.remove('visible');
      });

      /* ── entry animation via IntersectionObserver ── */
      let ctAnimated = false;
      const ctObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !ctAnimated) {
            ctAnimated = true;
            ctBars.transition()
              .delay((d, i) => i * 80)
              .duration(800)
              .ease(d3.easeCubicOut)
              .attr('width', d => Math.max(xScale(barEnd(d)) - xScale(d.start), 6));

            // tenure projection bars animate after solid bars
            ctTenureBars.transition()
              .delay((d, i) => allBars.length * 80 + 200)
              .duration(1200)
              .ease(d3.easeCubicOut)
              .attr('width', d => Math.max(xScale(d.tenureEnd) - xScale(nowFrac), 4));

            ctTenureLabels.transition()
              .delay((d, i) => allBars.length * 80 + 1200)
              .duration(600)
              .attr('opacity', 0.7);

            ctDiamonds.transition()
              .delay((d, i) => (allBars.length + i) * 80)
              .duration(500)
              .ease(d3.easeCubicOut)
              .attr('fill-opacity', 0.85)
              .attr('stroke-opacity', 1);

            ctObserver.unobserve(entry.target);
          }
        });
      }, { threshold: 0.15 });
      ctObserver.observe(ctContainer);

      /* ── responsive resize ── */
      window.addEventListener('resize', () => {
        const newW = ctContainer.clientWidth || 700;
        ctSvg.attr('width', newW);
        xScale.range([margin.left, newW - margin.right]);

        ctBars
          .attr('x', d => xScale(d.start))
          .attr('width', d => ctAnimated ? Math.max(xScale(barEnd(d)) - xScale(d.start), 6) : 0);

        ctTenureBars
          .attr('x', d => xScale(nowFrac))
          .attr('width', d => ctAnimated ? Math.max(xScale(d.tenureEnd) - xScale(nowFrac), 4) : 0);

        ctTenureLabels
          .attr('x', d => xScale(d.tenureEnd) + 4);

        ctDiamonds
          .attr('transform', d => `translate(${xScale(d.start)},${diamondY(d)})`);

        drawGrid();
        drawAxis();
        drawNow();
        drawDivider();
      }, { passive: true });

      /* ── observe for scroll reveal ── */
      if (ctWrap) revealObserver.observe(ctWrap);

      /* ═══════════════════════════════════════════
         CAREER CARDS + NETWORK + CROSS-FILTER
         ═══════════════════════════════════════════ */

      /* ── numbering (newest first) ── */
      const careerSorted = [...careerItems].sort((a, b) => b.start - a.start);
      careerSorted.forEach((d, i) => { d.num = String(i + 1); });
      const eduSorted = [...educationItems].sort((a, b) => b.start - a.start);
      eduSorted.forEach((d, i) => { d.num = 'E' + (i + 1); });
      degreeItems.forEach(d => { d.num = '◆'; });

      /* ── collect tags ── */
      const tagSet = new Set();
      careerItems.forEach(d => d.tags.forEach(t => tagSet.add(t)));
      educationItems.forEach(d => d.tags.forEach(t => tagSet.add(t)));

      const tagOrder = [
        'Digital STS', 'Digital Philosophy of Science', 'Digital Anthropology',
        'STS', 'Philosophy of Science', 'Anthropology',
        'Digital Humanities', 'Digital Technology',
        'Humanities', 'Technology',
        'Neuroscience', 'Research Ethics'
      ];

      /* ── syncing flag ── */
      let _careerSyncing = false;
      let activeCareerFilter = null;

      /* ── group labels ── */
      function groupLabelJa(group) {
        if (group === 'career') return '職歴';
        if (group === 'education') return '学歴';
        return '学位';
      }
      function groupLabelEn(group) {
        if (group === 'career') return 'Career';
        if (group === 'education') return 'Education';
        return 'Degree';
      }

      /* ═══════════════════════
         3C: CAREER CARDS
         ═══════════════════════ */
      (function buildCareerCards() {
        const cardGrid = document.getElementById('career-card-grid');
        const filterBar = document.getElementById('career-card-filters');
        const cardListWrap = document.getElementById('career-card-list');
        if (!cardGrid || !filterBar) return;

        /* filter bar: All + tags */
        const allBtn = document.createElement('button');
        allBtn.className = 'pub-filter-btn active';
        allBtn.textContent = 'All';
        allBtn.addEventListener('click', () => {
          careerCardClearFilter();
        });
        filterBar.appendChild(allBtn);

        tagOrder.forEach(tag => {
          if (!tagSet.has(tag)) return;
          const btn = document.createElement('button');
          btn.className = 'pub-filter-btn';
          btn.textContent = tag;
          btn.dataset.tag = tag;
          btn.style.setProperty('--filter-color', TAG_COLORS[tag] || '#888');
          btn.addEventListener('click', () => {
            const tagId = 'tag-' + tag;
            if (activeCareerFilter === tagId) {
              careerCardClearFilter();
            } else {
              activeCareerFilter = tagId;
              careerCardApplyFilter(tagId);
            }
          });
          filterBar.appendChild(btn);
        });

        /* combine all items for display (newest first) */
        const allDisplay = [
          ...careerSorted.map(d => Object.assign({}, d)),
          ...eduSorted.map(d => Object.assign({}, d))
        ];

        allDisplay.forEach(d => {
          const card = document.createElement('div');
          card.className = 'pub-card';
          card.dataset.group = d.group;
          card.dataset.careerNum = d.num;
          if (d.url) card.dataset.link = d.url;
          const color = d.tags.length ? (TAG_COLORS[d.tags[0]] || '#888') : 'var(--accent)';
          const colorHex = d.tags.length ? (TAG_COLORS[d.tags[0]] || '#888888') : '#c8a96e';
          const r = parseInt(colorHex.replace('#','').substring(0,2),16);
          const g = parseInt(colorHex.replace('#','').substring(2,4),16);
          const b = parseInt(colorHex.replace('#','').substring(4,6),16);
          card.style.setProperty('--card-accent', color);
          card.style.setProperty('--card-glow', `rgba(${r},${g},${b},0.08)`);

          const lang = getLang();
          const title = d.ja || d.en;
          const titleEn = d.en || d.ja;
          const period = formatPeriod(d);
          const role = d.roleJa || d.roleEn;
          const roleEn = d.roleEn || d.roleJa;
          const groupJa = groupLabelJa(d.group);
          const groupEn = groupLabelEn(d.group);

          let html = '';
          html += '<div class="pub-card-header">';
          html += `<span class="pub-card-num" style="background:${color}">${d.num}</span>`;
          html += '<div>';
          if (title) html += `<div class="pub-card-title" data-lang="ja">${title}</div>`;
          if (titleEn) html += `<div class="pub-card-title" data-lang="en">${titleEn}</div>`;
          html += '</div>';
          html += `<span class="pub-card-group" data-lang="ja">${groupJa}</span>`;
          html += `<span class="pub-card-group" data-lang="en">${groupEn}</span>`;
          html += '</div>';

          html += `<div class="pub-card-year">${period}</div>`;

          if (role || roleEn) {
            if (role) html += `<div class="pub-card-detail" data-lang="ja">${role}</div>`;
            if (roleEn) html += `<div class="pub-card-detail" data-lang="en">${roleEn}</div>`;
          }

          if (d.tags.length) {
            html += '<div class="pub-card-tags">';
            d.tags.forEach(tag => {
              html += `<span class="topic-tag" data-tag="${tag}">${tag}</span>`;
            });
            html += '</div>';
          }

          card.innerHTML = html;

          /* click → open link */
          if (d.url) {
            card.addEventListener('click', (e) => {
              if (e.target.closest('.topic-tag')) return;
              window.open(d.url, '_blank', 'noopener,noreferrer');
            });
          }

          /* tag chip click → filter */
          card.querySelectorAll('.topic-tag').forEach(chip => {
            chip.style.cursor = 'pointer';
            chip.addEventListener('click', (e) => {
              e.stopPropagation();
              const tagId = 'tag-' + chip.dataset.tag;
              if (activeCareerFilter === tagId) {
                careerCardClearFilter();
              } else {
                activeCareerFilter = tagId;
                careerCardApplyFilter(tagId);
              }
            });
          });

          cardGrid.appendChild(card);
        });

        /* filter logic */
        function updateFilterBar(tagId) {
          filterBar.querySelectorAll('.pub-filter-btn').forEach(btn => {
            if (!btn.dataset.tag) {
              btn.classList.toggle('active', !tagId);
            } else {
              btn.classList.toggle('active', ('tag-' + btn.dataset.tag) === tagId);
            }
          });
        }

        function filterCards(tagId) {
          const tagLabel = tagId ? tagId.replace('tag-', '') : null;
          cardGrid.querySelectorAll('.pub-card').forEach(card => {
            const tags = [];
            card.querySelectorAll('.topic-tag').forEach(t => tags.push(t.dataset.tag));
            if (!tagLabel || tags.includes(tagLabel)) {
              card.classList.remove('filtered-out');
            } else {
              card.classList.add('filtered-out');
            }
          });
        }

        /* public interface */
        window.__careerCardApplyFilter = function(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
        };
        window.__careerCardClearFilter = function() {
          updateFilterBar(null);
          filterCards(null);
        };

        function careerCardApplyFilter(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
          if (!_careerSyncing) {
            _careerSyncing = true;
            if (typeof window.__careerNetworkApplyFilter === 'function') window.__careerNetworkApplyFilter(tagId);
            if (typeof window.__careerTimelineApplyFilter === 'function') window.__careerTimelineApplyFilter(tagId);
            _careerSyncing = false;
          }
        }
        function careerCardClearFilter() {
          activeCareerFilter = null;
          updateFilterBar(null);
          filterCards(null);
          if (!_careerSyncing) {
            _careerSyncing = true;
            if (typeof window.__careerNetworkClearFilter === 'function') window.__careerNetworkClearFilter();
            if (typeof window.__careerTimelineClearFilter === 'function') window.__careerTimelineClearFilter();
            _careerSyncing = false;
          }
        }

        if (cardListWrap) revealObserver.observe(cardListWrap);
      })();

      /* ═══════════════════════
         3D: CAREER NETWORK
         ═══════════════════════ */
      (function buildCareerNetwork() {
        const svgEl = document.getElementById('career-network-svg');
        const container = document.getElementById('career-network-container');
        const tooltip = document.getElementById('career-network-tooltip');
        const legendEl = document.getElementById('career-network-legend');
        if (!svgEl || !container) return;

        /* nodes & links */
        const nodes = [];
        const links = [];
        const tagNodes = {};

        tagSet.forEach(tag => {
          const id = 'tag-' + tag;
          tagNodes[tag] = id;
          nodes.push({ id: id, type: 'tag', label: tag, color: TAG_COLORS[tag] || '#888' });
        });

        /* career items — merge same-institution into single node */
        const instGroups = {};
        careerSorted.forEach(d => {
          const key = d.ja;
          if (!instGroups[key]) instGroups[key] = [];
          instGroups[key].push(d);
        });

        const mergedCareer = [];
        Object.values(instGroups).forEach(group => {
          if (group.length === 1) {
            mergedCareer.push(group[0]);
          } else {
            const chrono = [...group].sort((a, b) => a.start - b.start);
            const newest = group[0]; // careerSorted is newest-first
            const oldest = chrono[0];
            const latest = chrono[chrono.length - 1];
            const mergedTags = [];
            const seen = new Set();
            chrono.forEach(d => d.tags.forEach(t => { if (!seen.has(t)) { seen.add(t); mergedTags.push(t); } }));
            mergedCareer.push({
              group: 'career',
              start: oldest.start,
              end: latest.end,
              ja: newest.ja,
              en: newest.en,
              roleJa: chrono.map(d => d.roleJa).join(' → '),
              roleEn: chrono.map(d => d.roleEn).join(' → '),
              tags: mergedTags,
              url: newest.url,
              isPoint: false,
              tenureEnd: latest.tenureEnd || 0,
              num: newest.num
            });
          }
        });

        const netItems = [...mergedCareer, ...eduSorted];
        netItems.forEach(d => {
          const id = 'career-' + d.num;
          nodes.push({
            id: id, type: 'project', num: d.num,
            ja: d.ja, en: d.en, roleJa: d.roleJa, roleEn: d.roleEn,
            tags: d.tags, group: d.group, url: d.url, itemRef: d
          });
          d.tags.forEach(tag => {
            if (tagNodes[tag]) links.push({ source: tagNodes[tag], target: id });
          });
        });

        /* Digital ↔ base discipline links */
        const digitalPairs = [
          ['Digital STS', 'STS'],
          ['Digital Philosophy of Science', 'Philosophy of Science'],
          ['Digital Anthropology', 'Anthropology'],
          ['Digital Humanities', 'Humanities'],
          ['Digital Technology', 'Technology']
        ];
        digitalPairs.forEach(([dTag, bTag]) => {
          if (tagNodes[dTag] && tagNodes[bTag]) {
            links.push({ source: tagNodes[dTag], target: tagNodes[bTag], tagLink: true });
          }
        });

        /* dimensions */
        let W = container.clientWidth;
        let H = container.clientHeight;
        const svg = d3.select(svgEl)
          .attr('viewBox', [0, 0, W, H].join(' '))
          .attr('preserveAspectRatio', 'xMidYMid meet');
        const g = svg.append('g');

        /* simulation */
        const simulation = d3.forceSimulation(nodes)
          .force('link', d3.forceLink(links).id(d => d.id).distance(d => d.tagLink ? 50 : 80))
          .force('charge', d3.forceManyBody().strength(-220))
          .force('center', d3.forceCenter(W / 2, H / 2))
          .force('collision', d3.forceCollide().radius(d => d.type === 'tag' ? 28 : 18))
          .force('x', d3.forceX(W / 2).strength(0.04))
          .force('y', d3.forceY(H / 2).strength(0.04))
          .alphaDecay(0.005)
          .alphaMin(0.005)
          .velocityDecay(0.55)
          .stop();

        /* gentle perpetual drift */
        function keepAlive2() {
          if (simulation.alpha() < 0.02) simulation.alpha(0.03).restart();
          requestAnimationFrame(keepAlive2);
        }

        /* edges */
        const link = g.append('g')
          .selectAll('line')
          .data(links)
          .join('line')
          .attr('class', 'network-edge')
          .attr('stroke-dasharray', d => d.tagLink ? '4 3' : null)
          .attr('stroke-opacity', d => d.tagLink ? 0.30 : null);

        /* tag nodes */
        const node = g.append('g')
          .selectAll('g')
          .data(nodes)
          .join('g')
          .attr('class', d => d.type === 'tag' ? 'node-tag' : 'node-project');

        node.filter(d => d.type === 'tag')
          .append('circle')
          .attr('r', 14)
          .attr('fill', d => d.color)
          .attr('fill-opacity', 0.18)
          .attr('stroke', d => d.color)
          .attr('stroke-width', 1.5);

        const TAG_ABBR = {
          'Digital STS': 'DSTS',
          'Digital Philosophy of Science': 'DPS',
          'Digital Anthropology': 'DA',
          'Digital Humanities': 'DH',
          'Digital Technology': 'DT',
          'Philosophy of Science': 'PoS',
          'Anthropology': 'Anth',
          'STS': 'STS',
          'Humanities': 'Hum',
          'Technology': 'Tech',
          'Neuroscience': 'Neuro',
          'Research Ethics': 'RE'
        };

        node.filter(d => d.type === 'tag')
          .append('text')
          .attr('dy', '0.35em')
          .attr('text-anchor', 'middle')
          .attr('fill', d => d.color)
          .attr('font-size', '8px')
          .attr('letter-spacing', '0.04em')
          .attr('pointer-events', 'none')
          .text(d => TAG_ABBR[d.label] || d.label.substring(0, 4));

        /* career/education nodes */
        node.filter(d => d.type === 'project')
          .append('circle')
          .attr('r', 11)
          .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
          .attr('fill-opacity', 0.22)
          .attr('stroke', d => TAG_COLORS[d.tags[0]] || '#888')
          .attr('stroke-width', 1)
          .attr('stroke-opacity', 0.5);

        node.filter(d => d.type === 'project')
          .append('text')
          .attr('dy', '0.35em')
          .attr('text-anchor', 'middle')
          .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
          .attr('font-size', '9px')
          .attr('font-weight', '500')
          .attr('pointer-events', 'none')
          .text(d => d.num);

        /* adjacency helpers */
        function getNeighbors(nodeId) {
          const neighbors = new Set([nodeId]);
          links.forEach(l => {
            const sId = typeof l.source === 'object' ? l.source.id : l.source;
            const tId = typeof l.target === 'object' ? l.target.id : l.target;
            if (sId === nodeId) neighbors.add(tId);
            if (tId === nodeId) neighbors.add(sId);
          });
          return neighbors;
        }
        function isLinkConnected(l, nodeId) {
          const sId = typeof l.source === 'object' ? l.source.id : l.source;
          const tId = typeof l.target === 'object' ? l.target.id : l.target;
          return sId === nodeId || tId === nodeId;
        }

        /* tooltip builders */
        function buildCareerNetTip(d) {
          const lang = getLang();
          const color = TAG_COLORS[d.tags[0]] || '#888';
          const title = lang === 'en' ? (d.en || d.ja) : (d.ja || d.en);
          const role = lang === 'en' ? (d.roleEn || d.roleJa) : (d.roleJa || d.roleEn);
          const item = d.itemRef;
          const period = item ? formatPeriod(item) : '';
          let h = '<div class="tip-head">';
          h += `<span class="tip-num" style="background:${color}">${d.num}</span>`;
          h += `<span class="tip-year">${period}</span>`;
          h += '</div>';
          h += `<div class="tip-title">${title}</div>`;
          if (role) h += `<div class="tip-grant" style="border-top:none;padding-top:0;margin-top:0;">${role}</div>`;
          if (d.tags.length) {
            h += '<div class="tip-tags">';
            d.tags.forEach(t => {
              const tc = TAG_COLORS[t] || '#888';
              h += `<span class="tip-tag" style="color:${tc};border-color:${tc}">${t}</span>`;
            });
            h += '</div>';
          }
          return h;
        }

        function buildTagNetTip(label) {
          const lang = getLang();
          const color = TAG_COLORS[label] || '#888';
          const info = TAG_DESCS[label];
          if (!info) return `<span style="color:${color}">${label}</span>`;
          const jaName = info.ja || '';
          const desc = lang === 'en' ? (info.descEn || info.descJa) : (info.descJa || info.descEn);

          let h = '<div class="tip-tag-head">';
          h += `<span class="tip-tag-dot" style="background:${color}"></span>`;
          h += `<span class="tip-tag-name" style="color:${color}">${label}`;
          if (jaName) h += `<span class="tip-tag-name-ja">（${jaName}）</span>`;
          h += '</span></div>';
          if (desc) h += `<div class="tip-desc">${desc}</div>`;
          return h;
        }

        /* hover */
        let netActiveFilter = null;

        function showTooltip(d, event) {
          const neighbors = getNeighbors(d.id);
          svgEl.classList.add('has-hover');
          node.classed('node-active', n => neighbors.has(n.id));
          link.classed('edge-active', l => isLinkConnected(l, d.id));
          if (d.type === 'tag') {
            tooltip.innerHTML = buildTagNetTip(d.label);
          } else {
            tooltip.innerHTML = buildCareerNetTip(d);
          }
          tooltip.classList.add('visible');
        }

        function hideTooltip() {
          svgEl.classList.remove('has-hover');
          node.classed('node-active', false);
          link.classed('edge-active', false);
          tooltip.classList.remove('visible');
        }

        node.on('mouseenter', function(event, d) {
          if (netActiveFilter) return;
          showTooltip(d, event);
        })
        .on('mousemove', function(event) {
          const wrapRect = container.parentElement.getBoundingClientRect();
          const tipW = tooltip.offsetWidth || 200;
          const tipH = tooltip.offsetHeight || 40;
          let x = event.clientX - wrapRect.left + 16;
          let y = event.clientY - wrapRect.top - tipH - 8;
          if (x + tipW > wrapRect.width) x = event.clientX - wrapRect.left - tipW - 8;
          if (y < 0) y = event.clientY - wrapRect.top + 16;
          tooltip.style.left = x + 'px';
          tooltip.style.top = y + 'px';
        })
        .on('mouseleave', function() {
          if (netActiveFilter) return;
          hideTooltip();
        });

        /* click filter */
        node.on('click', function(event, d) {
          event.stopPropagation();
          if (d.type === 'tag') {
            if (netActiveFilter === d.id) {
              netClearFilter();
            } else {
              netActiveFilter = d.id;
              netApplyFilter(d.id);
            }
          } else if (d.type === 'project' && d.url) {
            window.open(d.url, '_blank', 'noopener,noreferrer');
          }
        });

        svg.on('click', function() {
          if (netActiveFilter) netClearFilter();
        });

        function netApplyFilter(tagId) {
          const neighbors = getNeighbors(tagId);
          svgEl.classList.remove('has-hover');
          svgEl.classList.add('has-filter');
          node.classed('node-active', n => neighbors.has(n.id));
          link.classed('edge-active', l => isLinkConnected(l, tagId));
          legendEl.querySelectorAll('.legend-item').forEach(li => {
            li.classList.toggle('legend-active', ('tag-' + li.dataset.tag) === tagId);
          });
          hideTooltip();
          /* sync to cards + timeline */
          if (!_careerSyncing) {
            _careerSyncing = true;
            activeCareerFilter = tagId;
            if (typeof window.__careerCardApplyFilter === 'function') window.__careerCardApplyFilter(tagId);
            if (typeof window.__careerTimelineApplyFilter === 'function') window.__careerTimelineApplyFilter(tagId);
            _careerSyncing = false;
          }
        }

        function netClearFilter() {
          netActiveFilter = null;
          svgEl.classList.remove('has-filter');
          node.classed('node-active', false);
          link.classed('edge-active', false);
          legendEl.querySelectorAll('.legend-item').forEach(li => li.classList.remove('legend-active'));
          if (!_careerSyncing) {
            _careerSyncing = true;
            activeCareerFilter = null;
            if (typeof window.__careerCardClearFilter === 'function') window.__careerCardClearFilter();
            if (typeof window.__careerTimelineClearFilter === 'function') window.__careerTimelineClearFilter();
            _careerSyncing = false;
          }
        }

        /* expose for card/timeline to call into network */
        window.__careerNetworkApplyFilter = function(tagId) {
          _careerSyncing = true;
          netActiveFilter = tagId;
          const neighbors = getNeighbors(tagId);
          svgEl.classList.remove('has-hover');
          svgEl.classList.add('has-filter');
          node.classed('node-active', n => neighbors.has(n.id));
          link.classed('edge-active', l => isLinkConnected(l, tagId));
          legendEl.querySelectorAll('.legend-item').forEach(li => {
            li.classList.toggle('legend-active', ('tag-' + li.dataset.tag) === tagId);
          });
          _careerSyncing = false;
        };
        window.__careerNetworkClearFilter = function() {
          _careerSyncing = true;
          netActiveFilter = null;
          svgEl.classList.remove('has-filter');
          node.classed('node-active', false);
          link.classed('edge-active', false);
          legendEl.querySelectorAll('.legend-item').forEach(li => li.classList.remove('legend-active'));
          _careerSyncing = false;
        };

        /* zoom */
        const zoom = d3.zoom()
          .scaleExtent([0.4, 3])
          .on('zoom', (event) => { g.attr('transform', event.transform); });
        svg.call(zoom);
        svg.on('dblclick.zoom', () => {
          svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);
        });

        /* drag */
        const drag = d3.drag()
          .on('start', (event, d) => {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x; d.fy = d.y;
          })
          .on('drag', (event, d) => { d.fx = event.x; d.fy = event.y; })
          .on('end', (event, d) => {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null; d.fy = null;
          });
        node.call(drag);

        /* tick */
        simulation.on('tick', () => {
          link
            .attr('x1', d => d.source.x)
            .attr('y1', d => d.source.y)
            .attr('x2', d => d.target.x)
            .attr('y2', d => d.target.y);
          node.attr('transform', d => `translate(${d.x},${d.y})`);
        });

        /* legend */
        tagOrder.forEach(tag => {
          if (!tagSet.has(tag)) return;
          const item = document.createElement('span');
          item.className = 'legend-item';
          item.dataset.tag = tag;
          const dot = document.createElement('span');
          dot.className = 'legend-dot';
          dot.style.background = TAG_COLORS[tag] || '#888';
          item.appendChild(dot);
          item.appendChild(document.createTextNode(tag));
          item.addEventListener('click', () => {
            const tagId = 'tag-' + tag;
            if (netActiveFilter === tagId) {
              netClearFilter();
            } else {
              netActiveFilter = tagId;
              netApplyFilter(tagId);
            }
          });
          legendEl.appendChild(item);
        });

        /* lazy start */
        let started = false;
        const careerNetObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !started) {
              started = true;
              simulation.restart();
              setTimeout(keepAlive2, 2000);
              careerNetObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        careerNetObserver.observe(container);

        /* reveal observer */
        const careerNetWrap = document.getElementById('career-network');
        if (careerNetWrap) revealObserver.observe(careerNetWrap);

        /* responsive resize */
        window.addEventListener('resize', () => {
          W = container.clientWidth;
          H = container.clientHeight;
          svg.attr('viewBox', [0, 0, W, H].join(' '));
          simulation.force('center', d3.forceCenter(W / 2, H / 2));
          simulation.force('x', d3.forceX(W / 2).strength(0.04));
          simulation.force('y', d3.forceY(H / 2).strength(0.04));
          simulation.alpha(0.3).restart();
        }, { passive: true });
      })();

      /* ═══════════════════════
         3E: TIMELINE FILTER HOOKS
         ═══════════════════════ */
      (function careerTimelineFilter() {
        if (!ctSvgEl || !ctContainer) return;

        /* collect tag → bar mapping */
        function getConnectedBars(tagId) {
          const tagLabel = tagId ? tagId.replace('tag-', '') : null;
          if (!tagLabel) return null;
          const connected = new Set();
          allBars.forEach((d, i) => {
            if (d.tags.includes(tagLabel)) connected.add(i);
          });
          return connected;
        }

        window.__careerTimelineApplyFilter = function(tagId) {
          const connected = getConnectedBars(tagId);
          if (!connected) return;
          ctBars.classed('tl-dimmed', (d, i) => !connected.has(i))
                .classed('tl-highlight', (d, i) => connected.has(i));
          ctTenureBars.classed('tl-dimmed', (d) => {
            const idx = allBars.indexOf(d);
            return !connected.has(idx);
          }).classed('tl-highlight', (d) => {
            const idx = allBars.indexOf(d);
            return connected.has(idx);
          });
          if (!_careerSyncing) {
            _careerSyncing = true;
            activeCareerFilter = tagId;
            if (typeof window.__careerCardApplyFilter === 'function') window.__careerCardApplyFilter(tagId);
            if (typeof window.__careerNetworkApplyFilter === 'function') window.__careerNetworkApplyFilter(tagId);
            _careerSyncing = false;
          }
        };

        window.__careerTimelineClearFilter = function() {
          ctBars.classed('tl-dimmed', false).classed('tl-highlight', false);
          ctTenureBars.classed('tl-dimmed', false).classed('tl-highlight', false);
          if (!_careerSyncing) {
            _careerSyncing = true;
            activeCareerFilter = null;
            if (typeof window.__careerCardClearFilter === 'function') window.__careerCardClearFilter();
            if (typeof window.__careerNetworkClearFilter === 'function') window.__careerNetworkClearFilter();
            _careerSyncing = false;
          }
        };

        /* click on timeline bar → filter by primary tag */
        ctBars.on('click', function(event, d) {
          if (d.tags.length === 0) return;
          const tagId = 'tag-' + d.tags[0];
          if (activeCareerFilter === tagId) {
            activeCareerFilter = null;
            window.__careerTimelineClearFilter();
          } else {
            activeCareerFilter = tagId;
            window.__careerTimelineApplyFilter(tagId);
          }
        });

        ctTenureBars.on('click', function(event, d) {
          if (d.tags.length === 0) return;
          const tagId = 'tag-' + d.tags[0];
          if (activeCareerFilter === tagId) {
            activeCareerFilter = null;
            window.__careerTimelineClearFilter();
          } else {
            activeCareerFilter = tagId;
            window.__careerTimelineApplyFilter(tagId);
          }
        });
      })();

    })();

    /* ══════════════════════════════════════════════
       PUBLICATIONS TOPIC NETWORK
       ══════════════════════════════════════════════ */
    (function() {
      const svgEl = document.getElementById('pub-network-svg');
      const container = document.getElementById('pub-network-container');
      const tooltip = document.getElementById('pub-network-tooltip');
      const legendEl = document.getElementById('pub-network-legend');
      if (!svgEl || !container) return;

      /* ── colour map ── */
      const TAG_COLORS = {
        'Anthropology':                 '#c87a5e',
        'Digital Anthropology':         '#c8a96e',
        'STS':                          '#6ab08a',
        'Digital STS':                  '#4dc4a8',
        'Philosophy of Science':        '#a87cb0',
        'Digital Philosophy of Science':'#8e7fd4',
        'Humanities':                   '#4868a8',
        'Digital Humanities':           '#38b0e8',
        'Digital Technology':           '#78a8e0',
        'Technology':                   '#6890c0',
        'Neuroscience':                 '#e06878',
        'Research Ethics':              '#d4a84b'
      };

      /* ── tag descriptions (ja / en) ── */
      const TAG_DESCS = {
        'Philosophy of Science': {
          ja: '科学哲学',
          descJa: '科学哲学は、科学的知識の性質、科学の基礎、およびその方法論を哲学的な視点から探求する学問分野です。「科学とは何か」「科学的知識はどのようにして正当化されるのか」といった根本的な問いを扱います。科学理論が現実をどのように記述しているのか、因果関係や推論の妥当性、理論と観察の関係、そして科学の発展メカニズム（パラダイムシフトなど）を考察します。科学の客観性や権威の本質を解き明かし、科学が現代社会や倫理に与える影響をメタ的な視点から批判的に分析する役割を担っています。',
          descEn: 'Philosophy of Science is a branch of philosophy that critically examines the foundations, methods, and implications of scientific inquiry. It addresses fundamental questions such as "What is science?" and "How is scientific knowledge justified?" This field explores how scientific theories describe reality, analyzing concepts like causality, the validity of scientific reasoning, and the mechanisms of scientific development, such as paradigm shifts. By unpacking the essence of scientific objectivity and authority, it plays a crucial role in providing a meta-perspective on how science influences modern society, culture, and ethics.'
        },
        'Digital Philosophy of Science': {
          ja: 'デジタル科学哲学',
          descJa: 'デジタル科学哲学は、伝統的な科学哲学の問いに対して、情報技術やデータサイエンスの手法を用いてアプローチする新興の学際分野です。テキストマイニング、ネットワーク分析、コンピュータ・シミュレーションなどの計算論的手法を活用し、膨大な科学論文や歴史的データを計量的に分析することで、科学理論の変遷や研究コミュニティの動態を実証的に解明します。さらに、人工知能（AI）やビッグデータを用いたデータ駆動型の研究手法が、科学的知識の客観性や正当性にどのような影響を与えるかといった現代的な課題も考察します。',
          descEn: 'Digital Philosophy of Science is an emerging interdisciplinary field that addresses traditional philosophical questions about science using computational methods and digital tools. By utilizing techniques such as text mining, network analysis, and computer simulations, researchers quantitatively analyze vast amounts of scientific literature to empirically trace the evolution of scientific theories and community dynamics. Furthermore, it investigates the unique epistemological and ethical challenges of the modern era, questioning how data-driven research methods, artificial intelligence, and algorithmic decision-making impact the objectivity and justification of scientific knowledge.'
        },
        'Anthropology': {
          ja: '人類学',
          descJa: '人類学は、人間の進化、行動、文化、社会、言語を時間的・空間的に幅広く研究し、「人間とは何か」という根源的な問いに挑む総合的な学問分野です。大きく分けて、生物学的な進化を探求する自然人類学と、社会構造や多様な文化を研究する文化人類学などがあります。特に文化人類学では、研究対象となるコミュニティに長期間滞在する「フィールドワーク（参与観察）」を重視します。多様な人々の生活様式や価値観を内側から深く理解することで、自文化の常識を相対化し、人間社会の多様性と普遍性を探求します。',
          descEn: 'Anthropology is the comprehensive study of human evolution, behavior, culture, society, and language across time and space, fundamentally seeking to answer what it means to be human. It is primarily divided into physical anthropology, which explores human biological evolution, and cultural anthropology, which investigates diverse social structures and lifestyles. Cultural anthropology, in particular, emphasizes fieldwork and participant observation, where researchers immerse themselves in communities for extended periods. By understanding diverse values from an insider\'s perspective, anthropology relativizes our own cultural assumptions and explores both the vast diversity and underlying universality of human societies.'
        },
        'Digital Anthropology': {
          ja: 'デジタル人類学',
          descJa: 'デジタル人類学は、インターネット、SNS、スマートフォン、人工知能、メタバースなどのデジタル技術が、人間の日常生活、文化、社会関係、アイデンティティの形成にどのような影響を与えているかを研究する新しい領域です。オンライン空間でのフィールドワーク（デジタル・エスノグラフィ）などの手法を用いて、サイバースペースにおける人間の行動やコミュニケーションの変容を分析します。オンラインとオフラインの境界が曖昧になる現代社会において、テクノロジーがいかに文化実践を再構築しているかを解明する学問です。',
          descEn: 'Digital Anthropology is a relatively new subfield of anthropology that investigates how digital technologies\u2014such as the internet, social media, smartphones, artificial intelligence, and the metaverse\u2014affect human daily life, culture, social relationships, and identity formation. Utilizing methods like digital ethnography, researchers observe and analyze behavioral patterns and transformations in communication within cyberspace. In a contemporary society where the boundary between online and offline worlds is increasingly blurred, this vital discipline illuminates how the ubiquitous presence of technology continuously reshapes our cultural practices and redefines what it means to be human in the digital age.'
        },
        'STS': {
          ja: '科学技術社会論',
          descJa: 'STS（Science and Technology Studies）は、科学的知識や技術的イノベーションが、社会、文化、政治、歴史の文脈とどのように相互作用しながら形成されているかを研究する学際的な分野です。科学や技術を単なる客観的な真理や中立的な道具としてではなく、人間の価値観、経済的利益、権力関係が複雑に絡み合った「社会的な構築物」として捉えます。気候変動、生命倫理、新技術の社会的受容など、現代社会が直面する複雑な課題に対し批判的な視点を提供し、専門家と市民の対話のあり方や民主的な科学技術政策の構築を模索します。',
          descEn: 'STS (Science and Technology Studies) is an interdisciplinary field that investigates how scientific knowledge and technological innovations are shaped by, and in turn shape, society, culture, politics, and history. Instead of viewing science and technology as purely objective truths or neutral tools, STS understands them as "social constructs" intricately entangled with human values, economic interests, and power dynamics. The field provides critical perspectives on complex contemporary challenges such as climate change, bioethics, and the societal acceptance of new technologies, striving to foster better dialogue between experts and citizens and to build more democratic science and technology policies.'
        },
        'Digital STS': {
          ja: 'デジタルSTS',
          descJa: 'デジタルSTSは、科学技術社会論（STS）の分析枠組みや批判的視点を、アルゴリズム、ビッグデータ、巨大プラットフォームといった現代のデジタル技術に適用する分野です。データ収集やAIによる自動意思決定が、いかにして社会的なバイアスや差別を内包し、既存の権力構造を再生産しているかを解明します。同時に、ネットワーク分析やデータマイニングといった計算論的アプローチを調査手法として活用します。見えにくいデジタルインフラのブラックボックスを解体し、データ駆動型社会における倫理やガバナンスを問い直します。',
          descEn: 'Digital STS is a specialized branch of Science and Technology Studies that applies STS analytical frameworks specifically to modern digital technologies, including algorithms, big data, and digital platforms. It critically examines how data collection and automated decision-making by AI embed social biases and reproduce existing power structures and inequalities. Simultaneously, it actively incorporates computational approaches\u2014such as data mining and network analysis\u2014into its research methodologies. By unpacking the opaque "black boxes" of digital infrastructures, this advanced research area fundamentally questions the ethics, governance, and societal impacts inherent in our increasingly data-driven society.'
        },
        'Humanities': {
          ja: '人文学',
          descJa: '人文学（ヒューマニティーズ）は、文学、歴史学、哲学、言語学、宗教学、芸術学などの多様なアプローチを通じて、人間の思想、文化、歴史、精神的所産を深く理解しようとする学問領域の総称です。自然科学が客観的なデータに基づく普遍的な法則の発見を目指すのに対し、人文学は人間の主観的な経験、価値観の多様性、そして意味の解釈に重きを置きます。過去から受け継がれてきたテキストや史料の批判的な読解を通じて人類の営みを詳細に分析し、「私たちは何者なのか」「どう生きるべきか」という根源的な問いに向き合い続けます。',
          descEn: 'The Humanities encompass a broad group of academic disciplines\u2014including literature, history, philosophy, linguistics, religious studies, and the arts\u2014dedicated to the profound understanding of human thought, culture, history, and spiritual endeavors. While the natural sciences strive to objectively discover universal laws, the humanities emphasize subjective human experiences, the diversity of values, and the critical interpretation of meaning. Through the meticulous analysis of historical texts, primary documents, and artistic works inherited from the past, the humanities continuously address fundamental questions about human existence, exploring "who we are" and "how we ought to live."'
        },
        'Digital Humanities': {
          ja: 'デジタル人文学',
          descJa: 'デジタルヒューマニティーズ（デジタル人文学）は、歴史学や文学といった伝統的な人文学の研究手法に、最新のデジタル技術や計算論的アプローチを融合させた革新的な学際分野です。歴史的文書や芸術作品などの膨大な文化資源をデジタルデータ化し、テキストマイニング、ネットワーク分析、地理情報システム（GIS）、3Dモデリングなどを用いて解析します。これにより、人間の目視だけでは発見できなかった大規模なパターン（遠読）や新たな知見を抽出し、人文学の知識生産のあり方を革新し、可能性を大きく広げています。',
          descEn: 'Digital Humanities is an innovative, interdisciplinary field that merges traditional humanistic research\u2014such as history and literature\u2014with cutting-edge digital technologies and computational approaches. Researchers digitize vast collections of cultural resources, including historical manuscripts and artworks, and analyze them using advanced techniques like text mining, network analysis, Geographic Information Systems (GIS), and 3D modeling. This computational power enables scholars to engage in "distant reading," extracting new insights and uncovering large-scale patterns impossible to detect through manual analysis alone. By synergizing technological capabilities with humanistic insight, it revolutionizes knowledge production in the humanities.'
        },
        'Digital Technology': {
          ja: 'デジタルテクノロジー',
          descJa: 'デジタルテクノロジー（デジタル技術）は、音声や画像、テキストなどの連続的なアナログ情報を「0」と「1」の離散的な二進数データに変換して処理、保存、通信を行う技術体系全般を指します。コンピュータ科学や情報工学を基盤とし、ソフトウェア開発、インターネット、人工知能（AI）、クラウドコンピューティング、IoTなどが含まれます。膨大なデータを高速かつ正確に処理できる点が特徴であり、現代のあらゆる産業やインフラを根底から支え、社会課題の解決とイノベーションを牽引する極めて実践的な分野です。',
          descEn: 'Digital Technology refers to the comprehensive system of technologies that process, store, and transmit continuous analog information by converting it into discrete binary data (zeros and ones). Rooted in computer science and information engineering, this field encompasses software development, the internet, artificial intelligence (AI), cloud computing, and the Internet of Things (IoT). Characterized by its unprecedented ability to process massive amounts of data rapidly and accurately, digital technology forms the indispensable backbone of all modern industries and societal infrastructures, driving innovation and providing practical solutions to complex contemporary challenges.'
        },
        'Technology': {
          ja: 'テクノロジー / 技術・工学',
          descJa: 'テクノロジー（技術・工学）は、科学的な知識や実証的な経験則を応用して、人間の生活を向上させ、社会的な課題を解決するための手段、道具、機械、システムを創出する分野です。学術的なタグとしては、機械、電子、材料、土木、バイオテクノロジーなどの工学領域全般を包含します。新しいハードウェアの開発やインフラの構築にとどまらず、製造プロセスの最適化、エネルギー効率の向上、技術革新が環境や社会構造に与える影響の評価なども重要なテーマです。理論を現実世界で安全かつ効果的に機能する形へと変換する実践的な領域です。',
          descEn: 'Technology, often categorized under engineering and applied sciences, is the broad field dedicated to applying scientific knowledge and empirical principles to create tools, machines, and systems that improve human life and solve practical societal challenges. As an academic tag, it encompasses a vast array of disciplines, including mechanical, electrical, civil, and biotechnology engineering. Important themes extend beyond developing new hardware to include optimizing manufacturing processes, enhancing energy efficiency, and rigorously assessing the environmental and social impacts of innovations. It is a highly practical domain focused on translating theories into functional and effective real-world applications.'
        },
        'Research Ethics': {
          ja: '研究倫理',
          descJa: '研究倫理は、科学的探求や学術活動において研究者が遵守すべき行動規範や道徳的原則を探求・実践する分野です。研究の誠実性（インテグリティ）を確保し、科学に対する社会の信頼を維持・構築することを最大の目的としています。具体的には、データの捏造、改ざん、盗用といった研究不正行為の防止をはじめ、研究データの適切な取り扱い、論文の正当な著者資格（オーサーシップ）、資金提供元との利益相反の透明化など、研究活動全般に関わる規範を扱います。また、人間を対象とする医学や社会科学の研究においては、インフォームド・コンセントの取得やプライバシーの保護といった被験者の人権・尊厳への配慮が極めて重要視されます。実験動物の福祉（苦痛の軽減など）も主要なテーマです。近年では、生命科学技術の進歩に伴う生命倫理的ジレンマや、人工知能（AI）・ビッグデータを活用した研究におけるアルゴリズムのバイアス、個人情報の保護など、新たな課題にも直面しています。研究倫理は、単なるルールの遵守にとどまらず、研究者が社会に対する責任を自覚し、健全で持続可能な科学の発展を導くための不可欠な基盤となる領域です。',
          descEn: 'Research Ethics is an academic field that explores and implements the codes of conduct and moral principles that researchers must observe in their scientific inquiry and scholarly activities. Its primary objective is to ensure research integrity and maintain public trust in science. Specifically, it addresses norms related to overall research practices, including the prevention of research misconduct\u2014such as fabrication, falsification, and plagiarism\u2014as well as proper data management, fair authorship allocation, and the transparent disclosure of conflicts of interest. Furthermore, in medical and social science research involving human subjects, ethical considerations such as obtaining informed consent and protecting the privacy and dignity of participants are of paramount importance. The welfare and ethical treatment of laboratory animals, including the minimization of suffering, is also a major theme. In recent years, the field has faced new challenges, such as bioethical dilemmas arising from rapid advances in the life sciences, as well as algorithmic bias and data privacy concerns in research utilizing artificial intelligence (AI) and big data. Rather than merely enforcing compliance with rules, research ethics serves as an indispensable foundation that encourages researchers to recognize their social responsibilities and guides the sound advancement of science.'
        },
        'Neuroscience': {
          ja: '神経科学',
          descJa: '神経科学は、脳、脊髄、末梢神経からなる神経系の構造、機能、発達、および病理を解明しようとする学際的な学問分野です。遺伝子やタンパク質、神経細胞（ニューロン）が連携するミクロなレベルの働きから、複雑な神経回路のネットワーク、さらには知覚、学習、記憶、感情、意思決定、そして「意識」といったマクロな精神活動に至るまで、幅広いスケールで「物質である脳がいかにして心や行動を生み出すのか」という根源的な問いに挑みます。生物学や医学、心理学を研究の基盤としつつも、現在では物理学、数学、情報工学など多様な分野の知見と融合している点が大きな特徴です。fMRI（機能的磁気共鳴画像法）や光遺伝学といった最先端のテクノロジーを駆使することで、活動中の生きた脳を精緻に観察・操作することが可能になりました。この分野の成果は、アルツハイマー病などの神経変性疾患やうつ病などの精神疾患のメカニズム解明と新たな治療法開発に直結しています。さらに、脳の仕組みを模倣した人工知能（AI）の構築やブレイン・マシン・インターフェース（BMI）の開発など、未来のテクノロジーの進化をも牽引する極めて重要な最前線の領域となっています。',
          descEn: 'Neuroscience is an interdisciplinary academic field dedicated to uncovering the structure, function, development, and pathology of the nervous system, encompassing the brain, spinal cord, and peripheral nerves. It tackles the fundamental question of how the physical brain generates the mind and behavior across a vast spectrum of scales. This ranges from the microscopic workings of genes, proteins, and neurons, to complex neural networks, and ultimately to macroscopic mental phenomena such as perception, learning, memory, emotion, decision-making, and consciousness. A defining characteristic of modern neuroscience is its integration of diverse disciplines. While firmly rooted in biology, medicine, and psychology, it actively synthesizes insights from physics, mathematics, and computer science. By utilizing cutting-edge technologies like functional magnetic resonance imaging (fMRI) and optogenetics, researchers can now precisely observe and manipulate the dynamic, living brain in action. The discoveries in this field are directly linked to unraveling the mechanisms of neurodegenerative and psychiatric disorders, such as Alzheimer\'s disease, and developing novel treatments. Furthermore, neuroscience significantly drives the evolution of future technologies, inspiring the architecture of artificial intelligence (AI) and the advancement of brain-machine interfaces (BMI), making it a crucially important domain at the forefront of science.'
        }
      };

      /* ── publication summaries ── */
      const PUB_SUMMARIES = {
        "How 'empirical' is corpus linguistics?: A meta-analysis using formal concept analysis": {
          ja: 'コーパス言語学は伝統的に、言語理論の仮説を検証する分野と見なされてきました。私たちはこの前提に疑問を投げかけ、同分野の科学性を問い直しました。本研究では学術誌の論文抄録に対し形式概念分析（FCA）を用いたメタ分析を実施しました。その結果、コーパス言語学の実態は仮説「検証」ではなく、仮説「生成」に重きを置く発見の科学であることを実証的に明らかにしました。本分野を記述科学として力強く再定義する論考と考えています。',
          en: "Traditionally, corpus linguistics has been positioned as a field for verifying hypotheses derived from linguistic theories. We challenged this assumption to reexamine the scientificity of the field. By conducting a meta-analysis of journal abstracts using Formal Concept Analysis (FCA), we empirically demonstrated that corpus linguistics operates primarily as a science of hypothesis generation and discovery, rather than hypothesis testing. We believe this study effectively redefines corpus linguistics as a distinct descriptive science."
        },
        'What is New with the New Mechanistic Philosophy? Comments on In search of Mechanisms: Discoveries across the Life Sciences': {
          ja: '本稿は、科学哲学における「メカニズム哲学」の代表的著作であるCraverとDardenの『In Search of Mechanisms』に対する書評論文です。同書は一般向けには極めて優れた内容ですが、私たちは専門的な哲学の視点から、その「新規性」に鋭い疑問を投げかけました。特に、「メカニズム」という概念が既存の「モデル」や「理論」といった枠組みとどう違うのか、その境界が曖昧であることを批判的に指摘しています。メカニズム哲学の枠組みをより厳密に問い直し、理論的洗練を促す建設的な論考であると考えています。',
          en: 'In this review article, we critically evaluated Craver and Darden\'s prominent book on the new mechanistic philosophy. While we highly praised the book\'s informative value for non-philosophers, we questioned the actual novelty of its claims from a specialized philosophical perspective. Specifically, we pointed out the conceptual ambiguity between "mechanisms" and existing terms like "models," "hypotheses," or "theories," arguing that the authors failed to clearly distinguish them. We believe this constructive critique actively challenges the mechanistic framework to achieve greater theoretical rigor and conceptual clarity.'
        },
        'Causal Mechanisms in Neurosciences': {
          ja: '脳の構造と機能の因果関係を記述することは神経科学の中心的な目的ですが、現在の測定手法でそれが可能かは不明確です。私は光遺伝学（オプトジェネティクス）とfMRIを用いた研究を比較し、光遺伝学は因果関係を記述できるものの、fMRI単独では困難であることを示しました。その上で、科学哲学における「メカニズム」の概念を基盤に両者を統合することで、fMRIの限界を克服できると論じました。この統合的アプローチは、科学的手法の妥当性を評価する強力な枠組みになると考えています。',
          en: 'While a central aim of neuroscience is to describe the causal relationship between brain structure and function, it remains unclear whether current methods adequately achieve this. I analyzed optogenetics and fMRI studies, demonstrating that while optogenetics can successfully describe these causal mechanisms, fMRI alone falls short. To overcome these limitations, I argued for the methodological integration of both techniques, grounded in the philosophical conception of "mechanisms." I believe this mechanistic framework is highly useful for judging the scientific validity of such integrated methods and advancing our true understanding of the brain.'
        },
        'Mechanistic stance: An epistemic norm among scientists': {
          ja: '科学的説明において「メカニズム」の記述を重視するメカニズム哲学（Mechanistic philosophy）は、その定義や適用範囲の曖昧さから多くの批判に晒されてきました。本稿ではこれらの批判に応答すべく、科学者が実践の中でメカニズム的なものを探求し記述しようとする態度を「メカニズム的スタンス（Mechanistic stance）」と名付け、新たな視点を提示しました。厳密な定義に縛られず、科学者の実際の認識論的規範を的確に捉え直す意欲的な論考と考えています。',
          en: 'Mechanistic philosophy, which emphasizes the description of mechanisms in scientific explanations, has faced severe criticisms regarding its definitions, applications, and normativity. To defend against these criticisms, we proposed a novel perspective called the "mechanistic stance." We argued that even if strict definitions fail, scientists practically search for and attempt to describe mechanism-like systems as an epistemic norm. By shifting the focus from rigid definitions to the actual practices and norms of scientists, we believe this paper successfully reframes mechanistic philosophy and offers a highly productive direction for understanding scientific explanations.'
        },
        '誰をオーサーにするべきか？：「オリジナリティー」の分野特性を考慮した自律的オーサーシップの提案': {
          ja: '現代科学の現場でしばしば議論となる「誰を論文の著者（オーサー）にするべきか」という問いに対し、私たちは新たな解決策を提示しました。多くの学術誌が採用するICMJE基準は、学術的貢献の公正な評価という点で課題を抱えています。本稿では、「オリジナリティー」の分野特性（人文系と自然科学系の違い）を再考し、トップダウンの画一的な規制ではなく、研究者自身の「自律性」と責任に基づく柔軟なオーサーシップの在り方を提案しました。研究の自由で健全な発展に向けた、新たな評価基盤を構築する論考と考えています。',
          en: 'In this paper, we addressed the highly debated question in modern scientific practice: "Who should be an author?" While widely adopted, the ICMJE authorship standards face criticism for failing to evaluate academic contributions fairly. To overcome this, we re-examined the disciplinary differences in "originality" and proposed a flexible, "autonomy-based" authorship standard. By relying on the responsible autonomy of researchers rather than strict top-down regulations, we believe this proposal provides a robust conceptual foundation for recognizing fair contributions and fostering the sound development of science.'
        },
        '入門 科学技術と社会': {
          ja: '科学技術と社会の健全な関係を築くための重要な枠組みである「ELSI（倫理的・法的・社会的課題）」と「RRI（責任ある研究・イノベーション）」について、その歴史的経緯と現在地を整理しました。先端技術が社会に与える影響を予見し、多様な利害関係者と対話する手法や、研究者自身の応答可能性が求められる背景を論じています。さらに、「ポストELSI」時代における人文・社会科学研究者の新たな役割や、取り組みが形骸化するといった実践的な課題を提示した論考です。',
          en: 'To build a healthy relationship between science, technology, and society, I comprehensively outlined the historical context and current landscape of two critical frameworks: ELSI (Ethical, Legal, and Social Issues) and RRI (Responsible Research and Innovation). I discussed methodologies for anticipating the societal impacts of advanced science, fostering dialogue with diverse stakeholders, and the growing necessity for researchers to be responsive. I believe this piece effectively highlights practical challenges, such as the risk of these frameworks becoming mere formalities, and the evolving roles of humanities and social science researchers in the "post-ELSI" era.'
        },
        '南三陸の復興に関するハイパーリンク・エスノグラフィ': {
          ja: '東日本大震災の被災地である宮城県南三陸町の復興プロセスにおいて、オンライン上の活動の実態を明らかにするため、私は「ハイパーリンク・エスノグラフィ」という手法を用いて調査を行いました。ウェブページ間のリンク構造をネットワークとして可視化し、地元住民・移住者・観光者といった質的な分類と組み合わせることで、多様なアクターが密接に結びついて形成する「デジタルパブリック」の様態を描き出しました。現場のフィールドワークを補完し、復興の全体像をマクロな視点から捉え直す意欲的な研究であると考えています。',
          en: 'To clarify the role of grassroots online activities in the reconstruction process of Minamisanriku after the Great East Japan Earthquake, I conducted research utilizing "hyperlink ethnography." By visualizing the link structures among web pages as a network and combining this with qualitative categorizations—such as original insiders, new-insiders, and outsiders—I empirically illustrated how a "digital public" is formed through the intricate connections of diverse actors. I believe this study effectively complements on-site fieldwork, providing a crucial macroscopic perspective to reexamine the overall picture of the reconstruction efforts.'
        },
        'Revisiting Semantic Prosody of Cause: A Sentiment Analysis': {
          ja: '英語の動詞「cause」は伝統的にネガティブな結果を伴うとされてきました。しかし私たちはこの前提に疑問を投げかけ、共起表現分析と感情分析を統合した新たなコーパスアプローチを提示しました。データを精緻に分析した結果、「cause」を用いた構文の多くが実際には「中立的」な感情スコアを持つことを実証的に明らかにしました。本研究は、言語、認知、感情の複雑な関係に新たな洞察を与え、従来の「意味的韻律」研究の常識を覆す野心的な論考であると考えています。',
          en: 'The verb "cause" has traditionally been assumed to carry a strictly negative semantic prosody. To challenge this prevailing assumption, we integrated co-varying collexeme analysis with computational sentiment analysis. By meticulously analyzing the data, we empirically demonstrated that constructions involving "cause" predominantly exhibit neutral sentiment scores, rather than inherently negative ones. We believe this study effectively overturns established assumptions and offers a robust, interdisciplinary framework for exploring the complex interplay between language, cognition, and emotion.'
        },
        'デジタル空間の多重性：被災地移住のデジタル人類学': {
          ja: '津波被災地（宮城県南三陸町）への移住現象を対象に、「多重性」の視点からデジタル人類学の新たなアプローチを提示しました。YouTube、Instagram、Facebookのデータを自然言語処理や説明可能AI（XAI）を用いて分析し、各プラットフォームにおいて移住者の「ビジョン」や「情動」がどのように異なって表現されるかを実証的に明らかにしました。現実空間の語りとデジタル上の自己呈示を比較することで、移住という社会現象の多面的な意味を紐解く、今後のデジタル人類学の基盤となる野心的な研究であると考えています。',
          en: 'To explore migration to tsunami-affected areas (Minamisanriku Town), I proposed a novel digital anthropological approach centered on the concept of "multiplicity." By analyzing data across YouTube, Instagram, and Facebook using natural language processing and Explainable AI (XAI), I empirically demonstrated how migrants distinctively express their visions and affects on each platform. By comparing face-to-face narratives with digital self-presentations, I believe this study effectively unravels the multifaceted meanings of migration and establishes a robust methodological foundation for the future of digital anthropology.'
        },
        '津波被災地域における期待の調整：南三陸町の資源循環型復興ビジョンと移住者のビジョン': {
          ja: '宮城県南三陸町を事例に、津波被災地域において住民や移住者がどのように「期待の調整」を行っているかを、「期待の社会学」の観点から分析。震災後の資源循環型復興ビジョンにおける「フレーム間の期待の調整」と、町のローカルビジョンと移住者個人のアクターレベルビジョンとの間の「レベル間の期待の調整」が、復興において重要な役割を果たしていることを明らかにした。',
          en: 'Analyzes how residents and migrants in Minamisanriku Town manage their expectations in tsunami-affected areas, drawing on the "sociology of expectation." Reveals the importance of managing expectations between different "frames"—balancing hopes with realistic constraints—and between "levels," navigating the town\'s local vision and individual actor-level visions held by migrants.'
        },
        'The Many Uses of Explain: Quantitative Corpus Method and Philosophy of Science': {
          ja: '従来の科学哲学における事例研究の限界を克服するため、私たちはデータサイエンスと認知意味論の枠組みを融合した「デジタル科学哲学」のアプローチを提唱しました。本研究では、計量コーパス手法（QCM）を用いて「説明する（explain）」の多様な用法を分析し、学術ジャンルと非学術ジャンルにおける概念の構造的な違いを実証的に明らかにしました。言語学の精緻な手法を導入することで認識論と存在論を架橋する、今後の概念分析の強力な基盤を提供する野心的な研究であると考えています。',
          en: 'To overcome the limitations of traditional case studies in the philosophy of science, we proposed an updated approach to the "digital philosophy of science" by integrating data science methodologies with cognitive semantics. By applying the Quantitative Corpus Method (QCM) to analyze the diverse uses of the verb explain, we empirically demonstrated how its conceptual structure varies significantly across academic and non-academic genres. By bridging epistemology and ontology through rigorous linguistic methods, we believe this represents an ambitious study that provides a robust foundation for future conceptual analyses.'
        },
        'Philosophy with and for Data Science: Setting the Scene': {
          ja: 'データサイエンスの劇的な進歩は、哲学のアプローチを根本から変革しつつあります。本稿では、従来の少数事例に依存する科学哲学の限界を指摘し、大規模データやトピックモデルを用いた「デジタル科学哲学」というアプローチを提示しました。さらに、哲学がAIのブラックボックス化などデータサイエンス自身の課題を批判的に検討する重要性についても論じました。データ分析と哲学的な問いが双方向に刺激し合い、新たな知のパラダイムを切り拓く論考となったと考えています。',
          en: 'The rapid advancement of data science is fundamentally transforming traditional philosophical methodologies. In this paper, I challenged the limitations of conventional case-study-reliant philosophy of science and proposed an approach to "digital philosophy of science" that leverages machine learning and topic modeling on large datasets. Furthermore, I discussed the importance of philosophy in critically examining data science itself, such as addressing the black-box problem in AI. I believe this work sets the stage for a dynamic synergy where data science and philosophy mutually enrich each other to open up a new paradigm of knowledge.'
        }
      };

      /* ── extract data from Publications section DOM ── */
      const section = container.closest('section');
      const items = section.querySelectorAll('.pub-item, .pub-item-book');
      const pubs = [];
      const tagSet = new Set();

      function toSortFrac(s) {
        const m = s.match(/(\d{4})\.(\d{2})/);
        if (m) return parseInt(m[1]) + (parseInt(m[2]) - 1) / 12;
        const y = s.match(/\b((?:19|20)\d{2})\b/);
        return y ? parseInt(y[1]) : 2020;
      }

      items.forEach((el, i) => {
        if (el.classList.contains('news-entry')) return;
        const isBook = el.classList.contains('pub-item-book');
        const titleJa = el.querySelector('.pub-title[data-lang="ja"]');
        const titleEn = el.querySelector('.pub-title[data-lang="en"]');
        const titleOnly = el.querySelector('.pub-title:not([data-lang])');
        const tags = [];
        el.querySelectorAll('.topic-tag[data-tag]').forEach(t => {
          tags.push(t.dataset.tag);
          tagSet.add(t.dataset.tag);
        });

        /* year extraction */
        let yearText = '';
        if (!isBook) {
          const yearEl = el.querySelector('.pub-year');
          yearText = yearEl ? yearEl.textContent.trim() : '';
        } else {
          const detailEl = el.querySelector('.pub-detail');
          if (detailEl) {
            const jaSpan = detailEl.querySelector('[data-lang="ja"]');
            const txt = jaSpan ? jaSpan.textContent : detailEl.textContent;
            const mYM = txt.match(/(\d{4})年(\d{1,2})月/);
            if (mYM) {
              yearText = mYM[1] + '.' + mYM[2].padStart(2, '0');
            } else {
              const m = txt.match(/\b((?:19|20)\d{2})\b/);
              if (m) yearText = m[1];
            }
          }
        }
        const sortYear = toSortFrac(yearText);

        /* detail */
        const detailEl = el.querySelector('.pub-detail');
        const detJa = detailEl ? (detailEl.querySelector('[data-lang="ja"]')?.textContent.trim() || '') : '';
        const detEn = detailEl ? (detailEl.querySelector('[data-lang="en"]')?.textContent.trim() || '') : '';
        const detOnly = (detailEl && !detJa && !detEn) ? detailEl.textContent.trim() : '';

        /* type (books) */
        let typeJa = '', typeEn = '';
        if (isBook) {
          const tJa = el.querySelector('.pub-type-badge[data-lang="ja"]');
          const tEn = el.querySelector('.pub-type-badge[data-lang="en"]');
          typeJa = tJa ? tJa.textContent.trim() : '';
          typeEn = tEn ? tEn.textContent.trim() : '';
        }

        const linkEl = el.querySelector('a.pub-title-link');
        let coverImg = '';
        if (isBook) {
          const img = el.querySelector('.pub-book-cover');
          if (img) coverImg = img.getAttribute('src');
        }
        /* summary lookup */
        const jaTitle = titleJa ? titleJa.textContent.trim() : (titleOnly ? titleOnly.textContent.trim() : '');
        const enTitle = titleEn ? titleEn.textContent.trim() : (titleOnly ? titleOnly.textContent.trim() : '');
        const summaryData = PUB_SUMMARIES[jaTitle] || PUB_SUMMARIES[enTitle] || null;

        pubs.push({
          id: 'pub-' + pubs.length,
          ja: jaTitle,
          en: enTitle,
          year: yearText,
          sortYear: sortYear,
          isBook: isBook,
          tags: tags,
          detailJa: detJa || detOnly,
          detailEn: detEn || detOnly,
          typeJa: typeJa,
          typeEn: typeEn,
          link: linkEl ? linkEl.href : '',
          coverImg: coverImg,
          summaryJa: summaryData ? summaryData.ja : '',
          summaryEn: summaryData ? summaryData.en : '',
          el: el
        });
      });

      /* ── assign numbers: oldest first ── */
      const sorted = [...pubs].sort((a, b) => a.sortYear - b.sortYear);
      sorted.forEach((p, i) => { p.num = i + 1; });

      /* inject number badge into DOM list */
      pubs.forEach(p => {
        if (p.num == null) return;
        const badge = document.createElement('span');
        badge.className = 'proj-num-badge';
        badge.textContent = p.num;
        badge.style.background = TAG_COLORS[p.tags[0]] || '#888';
        if (p.isBook) {
          const contentDiv = p.el.children[1] || p.el.lastElementChild;
          if (contentDiv) contentDiv.insertBefore(badge, contentDiv.firstChild);
        } else {
          const yearSpan = p.el.querySelector('.pub-year');
          if (yearSpan) yearSpan.parentNode.insertBefore(badge, yearSpan);
        }
      });

      /* ── build card list ── */
      (function buildPubCards() {
        const cardGrid = document.getElementById('pub-card-grid');
        const filterBar = document.getElementById('pub-card-filters');
        const cardListWrap = document.getElementById('pub-card-list');
        if (!cardGrid || !filterBar) return;

        const isJa = () => document.body.classList.contains('lang-ja');

        /* tag order (same as legend) */
        const tagOrder = [
          'Digital STS', 'Digital Philosophy of Science', 'Digital Anthropology',
          'STS', 'Philosophy of Science', 'Anthropology',
          'Digital Humanities', 'Digital Technology',
          'Humanities', 'Technology',
          'Neuroscience', 'Research Ethics'
        ];

        /* filter bar */
        const allBtn = document.createElement('button');
        allBtn.className = 'pub-filter-btn active';
        allBtn.textContent = 'All';
        allBtn.addEventListener('click', () => {
          pubCardClearFilter();
        });
        filterBar.appendChild(allBtn);

        tagOrder.forEach(tag => {
          if (!tagSet.has(tag)) return;
          const btn = document.createElement('button');
          btn.className = 'pub-filter-btn';
          btn.textContent = tag;
          btn.dataset.tag = tag;
          btn.style.setProperty('--filter-color', TAG_COLORS[tag] || '#888');
          btn.addEventListener('click', () => {
            const tagId = 'tag-' + tag;
            if (activeFilter === tagId) {
              pubCardClearFilter();
            } else {
              activeFilter = tagId;
              pubCardApplyFilter(tagId);
            }
          });
          filterBar.appendChild(btn);
        });

        /* generate cards — newest first */
        const displayOrder = [...pubs].sort((a, b) => b.sortYear - a.sortYear);
        displayOrder.forEach(p => {
          const card = document.createElement('div');
          card.className = 'pub-card';
          card.dataset.pubId = p.id;
          if (p.link) card.dataset.link = p.link;
          const color = TAG_COLORS[p.tags[0]] || '#888';
          const glowColor = color.replace('#', '');
          const r = parseInt(glowColor.substring(0, 2), 16);
          const g = parseInt(glowColor.substring(2, 4), 16);
          const b = parseInt(glowColor.substring(4, 6), 16);
          card.style.setProperty('--card-accent', color);
          card.style.setProperty('--card-glow', `rgba(${r},${g},${b},0.08)`);

          let html = '';
          /* header: number + title */
          html += '<div class="pub-card-header">';
          html += `<span class="pub-card-num" style="background:${color}">${p.num}</span>`;
          html += '<div>';
          if (p.ja) html += `<div class="pub-card-title" data-lang="ja">${p.ja}</div>`;
          if (p.en) html += `<div class="pub-card-title" data-lang="en">${p.en}</div>`;
          html += '</div></div>';

          /* year */
          html += `<div class="pub-card-year">${p.year}${p.isBook ? (isJa() ? '　' : ' — ') : ''}</div>`;

          /* detail */
          if (p.detailJa || p.detailEn) {
            if (p.detailJa) html += `<div class="pub-card-detail" data-lang="ja">${p.detailJa}</div>`;
            if (p.detailEn) html += `<div class="pub-card-detail" data-lang="en">${p.detailEn}</div>`;
            if (!p.detailJa && !p.detailEn && p.detailJa === p.detailEn) {
              html += `<div class="pub-card-detail">${p.detailJa}</div>`;
            }
          }

          /* tags */
          html += '<div class="pub-card-tags">';
          p.tags.forEach(tag => {
            html += `<span class="topic-tag" data-tag="${tag}">${tag}</span>`;
          });
          html += '</div>';

          /* summary */
          if (p.summaryJa) html += `<div class="pub-card-summary" data-lang="ja">${p.summaryJa}</div>`;
          if (p.summaryEn) html += `<div class="pub-card-summary" data-lang="en">${p.summaryEn}</div>`;

          /* book cover */
          if (p.isBook && p.coverImg) {
            html += `<img class="pub-card-cover" src="${p.coverImg}" alt="">`;
          }

          card.innerHTML = html;

          /* click → open link */
          if (p.link) {
            card.addEventListener('click', (e) => {
              if (e.target.closest('.topic-tag')) return;
              window.open(p.link, '_blank', 'noopener,noreferrer');
            });
          }

          /* tag chip click → filter */
          card.querySelectorAll('.topic-tag').forEach(chip => {
            chip.style.cursor = 'pointer';
            chip.addEventListener('click', (e) => {
              e.stopPropagation();
              const tagId = 'tag-' + chip.dataset.tag;
              if (activeFilter === tagId) {
                pubCardClearFilter();
              } else {
                activeFilter = tagId;
                pubCardApplyFilter(tagId);
              }
            });
          });

          cardGrid.appendChild(card);
        });

        /* ── filter logic for card list ── */
        function updateFilterBar(tagId) {
          filterBar.querySelectorAll('.pub-filter-btn').forEach(btn => {
            if (!btn.dataset.tag) {
              btn.classList.toggle('active', !tagId);
            } else {
              btn.classList.toggle('active', ('tag-' + btn.dataset.tag) === tagId);
            }
          });
        }

        function filterCards(tagId) {
          const tagLabel = tagId ? tagId.replace('tag-', '') : null;
          cardGrid.querySelectorAll('.pub-card').forEach(card => {
            const pubId = card.dataset.pubId;
            const p = pubs.find(x => x.id === pubId);
            if (!tagLabel || (p && p.tags.includes(tagLabel))) {
              card.classList.remove('filtered-out');
            } else {
              card.classList.add('filtered-out');
            }
          });
        }

        /* these functions call the network's applyFilter / clearFilter once they exist */
        window.__pubCardApplyFilter = function(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
        };
        window.__pubCardClearFilter = function() {
          updateFilterBar(null);
          filterCards(null);
        };

        function pubCardApplyFilter(tagId) {
          updateFilterBar(tagId);
          filterCards(tagId);
          /* delegate to network/timeline filter once available */
          if (typeof window.__pubNetworkApplyFilter === 'function') {
            window.__pubNetworkApplyFilter(tagId);
          }
        }
        function pubCardClearFilter() {
          updateFilterBar(null);
          filterCards(null);
          if (typeof window.__pubNetworkClearFilter === 'function') {
            window.__pubNetworkClearFilter();
          }
        }

        /* reveal observer */
        if (cardListWrap) revealObserver.observe(cardListWrap);
      })();

      let pubTlBars = null;
      let pubTlBarLabels = null;

      /* ── build graph ── */
      const nodes = [];
      const links = [];
      const tagNodes = {};

      tagSet.forEach(tag => {
        const id = 'tag-' + tag;
        tagNodes[tag] = id;
        nodes.push({ id: id, type: 'tag', label: tag, color: TAG_COLORS[tag] || '#888' });
      });

      pubs.forEach(p => {
        nodes.push({
          id: p.id, type: 'project', num: p.num,
          ja: p.ja, en: p.en, year: p.year, tags: p.tags,
          isBook: p.isBook, typeJa: p.typeJa, typeEn: p.typeEn,
          detailJa: p.detailJa, detailEn: p.detailEn,
          link: p.link, coverImg: p.coverImg,
          summaryJa: p.summaryJa, summaryEn: p.summaryEn, el: p.el
        });
        p.tags.forEach(tag => {
          links.push({ source: tagNodes[tag], target: p.id });
        });
      });

      /* ── Digital ↔ base discipline links ── */
      const digitalPairs = [
        ['Digital STS', 'STS'],
        ['Digital Philosophy of Science', 'Philosophy of Science'],
        ['Digital Anthropology', 'Anthropology'],
        ['Digital Humanities', 'Humanities'],
        ['Digital Technology', 'Technology']
      ];
      digitalPairs.forEach(([dTag, bTag]) => {
        if (tagNodes[dTag] && tagNodes[bTag]) {
          links.push({ source: tagNodes[dTag], target: tagNodes[bTag], tagLink: true });
        }
      });

      /* ── dimensions ── */
      let W = container.clientWidth;
      let H = container.clientHeight;

      const svg = d3.select(svgEl)
        .attr('viewBox', [0, 0, W, H].join(' '))
        .attr('preserveAspectRatio', 'xMidYMid meet');

      const g = svg.append('g');

      /* ── simulation ── */
      const simulation = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d => d.id).distance(d => d.tagLink ? 50 : 80))
        .force('charge', d3.forceManyBody().strength(-220))
        .force('center', d3.forceCenter(W / 2, H / 2))
        .force('collision', d3.forceCollide().radius(d => d.type === 'tag' ? 28 : 18))
        .force('x', d3.forceX(W / 2).strength(0.04))
        .force('y', d3.forceY(H / 2).strength(0.04))
        .alphaDecay(0.005)
        .alphaMin(0.005)
        .velocityDecay(0.55)
        .stop();

      /* gentle perpetual drift */
      function keepAlive3() {
        if (simulation.alpha() < 0.02) simulation.alpha(0.03).restart();
        requestAnimationFrame(keepAlive3);
      }

      /* ── draw edges ── */
      const link = g.append('g')
        .selectAll('line')
        .data(links)
        .join('line')
        .attr('class', 'network-edge')
        .attr('stroke-dasharray', d => d.tagLink ? '4 3' : null)
        .attr('stroke-opacity', d => d.tagLink ? 0.30 : null);

      /* ── draw nodes ── */
      const node = g.append('g')
        .selectAll('g')
        .data(nodes)
        .join('g')
        .attr('class', d => d.type === 'tag' ? 'node-tag' : 'node-project');

      /* tag nodes: larger circle + abbreviation */
      node.filter(d => d.type === 'tag')
        .append('circle')
        .attr('r', 14)
        .attr('fill', d => d.color)
        .attr('fill-opacity', 0.18)
        .attr('stroke', d => d.color)
        .attr('stroke-width', 1.5);

      node.filter(d => d.type === 'tag')
        .append('text')
        .attr('dy', '0.35em')
        .attr('text-anchor', 'middle')
        .attr('fill', d => d.color)
        .attr('font-size', '8px')
        .attr('letter-spacing', '0.04em')
        .attr('pointer-events', 'none')
        .text(d => {
          const abbr = {
            'Digital STS': 'DSTS',
            'Digital Philosophy of Science': 'DPS',
            'Digital Anthropology': 'DA',
            'Digital Humanities': 'DH',
            'Digital Technology': 'DT',
            'Philosophy of Science': 'PoS',
            'Anthropology': 'Anth',
            'STS': 'STS',
            'Humanities': 'Hum',
            'Technology': 'Tech',
            'Neuroscience': 'Neuro',
            'Research Ethics': 'RE'
          };
          return abbr[d.label] || d.label.substring(0, 4);
        });

      /* publication nodes: numbered circle */
      node.filter(d => d.type === 'project')
        .append('circle')
        .attr('r', 11)
        .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
        .attr('fill-opacity', 0.22)
        .attr('stroke', d => TAG_COLORS[d.tags[0]] || '#888')
        .attr('stroke-width', 1)
        .attr('stroke-opacity', 0.5);

      node.filter(d => d.type === 'project')
        .append('text')
        .attr('dy', '0.35em')
        .attr('text-anchor', 'middle')
        .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
        .attr('font-size', '9px')
        .attr('font-weight', '500')
        .attr('pointer-events', 'none')
        .text(d => d.num);

      /* ── adjacency helpers ── */
      function getNeighbors(nodeId) {
        const neighbors = new Set([nodeId]);
        links.forEach(l => {
          const sId = typeof l.source === 'object' ? l.source.id : l.source;
          const tId = typeof l.target === 'object' ? l.target.id : l.target;
          if (sId === nodeId) neighbors.add(tId);
          if (tId === nodeId) neighbors.add(sId);
        });
        return neighbors;
      }

      function isLinkConnected(l, nodeId) {
        const sId = typeof l.source === 'object' ? l.source.id : l.source;
        const tId = typeof l.target === 'object' ? l.target.id : l.target;
        return sId === nodeId || tId === nodeId;
      }

      /* ── language helper ── */
      function getLang() {
        return document.body.classList.contains('lang-en') ? 'en' : 'ja';
      }

      /* ── rich tooltip: publication ── */
      function buildPubTip(p) {
        const lang = getLang();
        const color = TAG_COLORS[p.tags[0]] || '#888';
        const title = lang === 'en' ? (p.en || p.ja) : (p.ja || p.en);
        const detail = lang === 'en' ? (p.detailEn || p.detailJa) : (p.detailJa || p.detailEn);

        /* ── header + body ── */
        let head = '<div class="tip-head">';
        head += `<span class="tip-num" style="background:${color}">${p.num}</span>`;
        head += `<span class="tip-year">${p.year}</span>`;
        if (p.isBook) {
          const typeLabel = lang === 'en' ? (p.typeEn || p.typeJa) : (p.typeJa || p.typeEn);
          if (typeLabel) head += `<span class="tip-year" style="margin-left:4px">[${typeLabel}]</span>`;
        }
        head += '</div>';

        let body = `<div class="tip-title">${title}</div>`;
        if (p.tags.length) {
          body += '<div class="tip-tags">';
          p.tags.forEach(t => {
            const tc = TAG_COLORS[t] || '#888';
            body += `<span class="tip-tag" style="color:${tc};border-color:${tc}">${t}</span>`;
          });
          body += '</div>';
        }
        if (detail) body += `<div class="tip-grant">${detail}</div>`;
        const summary = lang === 'en' ? (p.summaryEn || p.summaryJa) : (p.summaryJa || p.summaryEn);
        if (summary) body += `<div class="tip-summary">${summary}</div>`;
        if (p.isBook && p.link) {
          const linkLabel = lang === 'en' ? 'Link to publisher \u2192' : '\u51FA\u7248\u793E\u3078\u306E\u30EA\u30F3\u30AF\u306F\u3053\u3061\u3089 \u2192';
          body += `<div class="tip-pub-link"><a href="${p.link}" target="_blank" rel="noopener noreferrer">${linkLabel}</a></div>`;
        }

        /* ── wrap with cover image for books ── */
        if (p.isBook && p.coverImg) {
          let h = head;
          h += '<div class="tip-book-row">';
          h += `<div class="tip-book-cover"><img src="${p.coverImg}" alt="" /></div>`;
          h += `<div class="tip-book-body">${body}</div>`;
          h += '</div>';
          return h;
        }
        return head + body;
      }

      /* ── rich tooltip: tag ── */
      function buildTagTip(label) {
        const lang = getLang();
        const color = TAG_COLORS[label] || '#888';
        const info = TAG_DESCS[label];
        if (!info) return `<span style="color:${color}">${label}</span>`;
        const jaName = info.ja || '';
        const desc = lang === 'en' ? (info.descEn || info.descJa) : (info.descJa || info.descEn);

        let h = '<div class="tip-tag-head">';
        h += `<span class="tip-tag-dot" style="background:${color}"></span>`;
        h += `<span class="tip-tag-name" style="color:${color}">${label}`;
        if (jaName) h += `<span class="tip-tag-name-ja">（${jaName}）</span>`;
        h += '</span></div>';
        if (desc) h += `<div class="tip-desc">${desc}</div>`;
        return h;
      }

      function findPub(id) {
        return pubs.find(p => p.id === id);
      }

      /* ── hover ── */
      let activeFilter = null;
      let tipHideTimer = null;

      function showTooltip(d, event) {
        if (tipHideTimer) { clearTimeout(tipHideTimer); tipHideTimer = null; }
        const neighbors = getNeighbors(d.id);
        svgEl.classList.add('has-hover');
        node.classed('node-active', n => neighbors.has(n.id));
        link.classed('edge-active', l => isLinkConnected(l, d.id));

        if (d.type === 'tag') {
          tooltip.innerHTML = buildTagTip(d.label);
          tooltip.classList.remove('tip-interactive');
        } else {
          const pub = findPub(d.id);
          if (pub) tooltip.innerHTML = buildPubTip(pub);
          if (pub && pub.isBook) {
            tooltip.classList.add('tip-interactive');
          } else {
            tooltip.classList.remove('tip-interactive');
          }
        }
        tooltip.classList.add('visible');
      }

      function hideTooltip() {
        svgEl.classList.remove('has-hover');
        node.classed('node-active', false);
        link.classed('edge-active', false);
        tooltip.classList.remove('visible', 'tip-interactive');
      }

      function scheduleHide(delay) {
        if (tipHideTimer) clearTimeout(tipHideTimer);
        tipHideTimer = setTimeout(() => { tipHideTimer = null; hideTooltip(); }, delay || 300);
      }

      /* tooltip mouseenter/leave for interactive book tooltips */
      tooltip.addEventListener('mouseenter', function() {
        if (tipHideTimer) { clearTimeout(tipHideTimer); tipHideTimer = null; }
      });
      tooltip.addEventListener('mouseleave', function() {
        scheduleHide(200);
      });

      node.on('mouseenter', function(event, d) {
        if (activeFilter) return;
        showTooltip(d, event);
      })
      .on('mousemove', function(event) {
        const wrapRect = container.parentElement.getBoundingClientRect();
        const tipW = tooltip.offsetWidth || 200;
        const tipH = tooltip.offsetHeight || 40;
        let x = event.clientX - wrapRect.left + 16;
        let y = event.clientY - wrapRect.top - tipH - 8;
        if (x + tipW > wrapRect.width) x = event.clientX - wrapRect.left - tipW - 8;
        if (y < 0) y = event.clientY - wrapRect.top + 16;
        tooltip.style.left = x + 'px';
        tooltip.style.top = y + 'px';
      })
      .on('mouseleave', function(event, d) {
        if (activeFilter) return;
        const pub = findPub(d.id);
        if (pub && pub.isBook) {
          scheduleHide(300);
        } else {
          hideTooltip();
        }
      });

      /* ── click: tag → filter, publication → scroll+flash ── */
      node.on('click', function(event, d) {
        event.stopPropagation();
        if (d.type === 'tag') {
          if (activeFilter === d.id) {
            clearFilter();
          } else {
            activeFilter = d.id;
            applyFilter(d.id);
          }
        } else if (d.type === 'project') {
          const pub = findPub(d.id);
          if (pub && pub.link) {
            window.open(pub.link, '_blank', 'noopener,noreferrer');
          }
        }
      });

      svg.on('click', function() {
        if (activeFilter) clearFilter();
      });

      let _pubSyncing = false;

      function applyFilter(tagId) {
        const neighbors = getNeighbors(tagId);
        svgEl.classList.remove('has-hover');
        svgEl.classList.add('has-filter');
        node.classed('node-active', n => neighbors.has(n.id));
        link.classed('edge-active', l => isLinkConnected(l, tagId));
        legendEl.querySelectorAll('.legend-item').forEach(li => {
          li.classList.toggle('legend-active', ('tag-' + li.dataset.tag) === tagId);
        });
        const connectedPubs = new Set();
        links.forEach(l => {
          const sId = typeof l.source === 'object' ? l.source.id : l.source;
          const tId = typeof l.target === 'object' ? l.target.id : l.target;
          if (sId === tagId) connectedPubs.add(tId);
          if (tId === tagId) connectedPubs.add(sId);
        });
        pubs.forEach(p => {
          if (connectedPubs.has(p.id)) {
            p.el.classList.remove('net-dimmed');
            p.el.classList.add('net-highlight');
          } else {
            p.el.classList.add('net-dimmed');
            p.el.classList.remove('net-highlight');
          }
        });
        if (pubTlBars) {
          pubTlBars.classed('tl-dimmed', d => !connectedPubs.has(d.id))
                   .classed('tl-highlight', d => connectedPubs.has(d.id));
        }
        if (pubTlBarLabels) {
          pubTlBarLabels.attr('opacity', d => connectedPubs.has(d.id) ? 1 : 0.12);
        }
        if (!_pubSyncing && typeof window.__pubCardApplyFilter === 'function') {
          window.__pubCardApplyFilter(tagId);
        }
      }

      function clearFilter() {
        activeFilter = null;
        svgEl.classList.remove('has-filter');
        node.classed('node-active', false);
        link.classed('edge-active', false);
        legendEl.querySelectorAll('.legend-item').forEach(li => li.classList.remove('legend-active'));
        pubs.forEach(p => {
          p.el.classList.remove('net-dimmed', 'net-highlight');
        });
        if (pubTlBars) {
          pubTlBars.classed('tl-dimmed', false).classed('tl-highlight', false);
        }
        if (pubTlBarLabels) {
          pubTlBarLabels.attr('opacity', 1);
        }
        if (!_pubSyncing && typeof window.__pubCardClearFilter === 'function') {
          window.__pubCardClearFilter();
        }
      }

      /* expose for card list to call into network */
      window.__pubNetworkApplyFilter = function(tagId) {
        _pubSyncing = true;
        activeFilter = tagId;
        applyFilter(tagId);
        _pubSyncing = false;
      };
      window.__pubNetworkClearFilter = function() {
        _pubSyncing = true;
        clearFilter();
        _pubSyncing = false;
      };

      /* ── zoom ── */
      const zoom = d3.zoom()
        .scaleExtent([0.4, 3])
        .on('zoom', (event) => {
          g.attr('transform', event.transform);
        });
      svg.call(zoom);
      svg.on('dblclick.zoom', () => {
        svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);
      });

      /* ── drag ── */
      const drag = d3.drag()
        .on('start', (event, d) => {
          if (!event.active) simulation.alphaTarget(0.3).restart();
          d.fx = d.x; d.fy = d.y;
        })
        .on('drag', (event, d) => {
          d.fx = event.x; d.fy = event.y;
        })
        .on('end', (event, d) => {
          if (!event.active) simulation.alphaTarget(0);
          d.fx = null; d.fy = null;
        });
      node.call(drag);

      /* ── tick ── */
      simulation.on('tick', () => {
        link
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);
        node.attr('transform', d => `translate(${d.x},${d.y})`);
      });

      /* ── legend ── */
      const tagOrder = [
        'Digital STS', 'Digital Philosophy of Science', 'Digital Anthropology',
        'STS', 'Philosophy of Science', 'Anthropology',
        'Digital Humanities', 'Digital Technology',
        'Humanities', 'Technology',
        'Neuroscience', 'Research Ethics'
      ];
      tagOrder.forEach(tag => {
        if (!tagSet.has(tag)) return;
        const item = document.createElement('span');
        item.className = 'legend-item';
        item.dataset.tag = tag;
        const dot = document.createElement('span');
        dot.className = 'legend-dot';
        dot.style.background = TAG_COLORS[tag] || '#888';
        item.appendChild(dot);
        item.appendChild(document.createTextNode(tag));
        item.addEventListener('click', () => {
          const tagId = 'tag-' + tag;
          if (activeFilter === tagId) {
            clearFilter();
          } else {
            activeFilter = tagId;
            applyFilter(tagId);
          }
        });
        legendEl.appendChild(item);
      });

      /* ── bilingual: update labels on lang change ── */
      const langObserver = new MutationObserver(() => {});
      langObserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });

      /* ── lazy start with IntersectionObserver ── */
      let started = false;
      const pubNetObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && !started) {
            started = true;
            simulation.restart();
            setTimeout(keepAlive3, 2000);
            pubNetObserver.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      pubNetObserver.observe(container);

      /* also observe for scroll reveal */
      const pubNetWrap = document.getElementById('pub-network');
      if (pubNetWrap) revealObserver.observe(pubNetWrap);

      /* ── responsive resize ── */
      window.addEventListener('resize', () => {
        W = container.clientWidth;
        H = container.clientHeight;
        svg.attr('viewBox', [0, 0, W, H].join(' '));
        simulation.force('center', d3.forceCenter(W / 2, H / 2));
        simulation.force('x', d3.forceX(W / 2).strength(0.04));
        simulation.force('y', d3.forceY(H / 2).strength(0.04));
        simulation.alpha(0.3).restart();
      }, { passive: true });

      /* ══════════════════════════════════════════════
         PUBLICATION TIMELINE
         ══════════════════════════════════════════════ */
      (function drawPubTimeline() {
        const ptSvgEl = document.getElementById('pub-timeline-svg');
        const ptContainer = document.getElementById('pub-timeline');
        const ptTooltip = document.getElementById('pub-timeline-tooltip');
        const ptWrap = document.getElementById('pub-timeline-wrap');
        if (!ptSvgEl || !ptContainer) return;

        /* ── parse date to fractional year ── */
        function toFrac(yearText) {
          const m = yearText.match(/(\d{4})\.(\d{2})/);
          if (m) return parseInt(m[1]) + (parseInt(m[2]) - 1) / 12;
          const ym = yearText.match(/\b((?:19|20)\d{2})\b/);
          if (ym) return parseInt(ym[1]) + 0.5;
          return 2020;
        }

        /* ── add dateFrac to pubs ── */
        pubs.forEach(p => { p.dateFrac = toFrac(p.year); });

        /* ── layout constants ── */
        const margin = { top: 50, right: 24, bottom: 30, left: 100 };
        const barHeight = 22;
        const barGap = 6;
        const groupGap = 28;
        const barWidth = 0.4; // years
        const xMin = 2012;
        const xMax = 2027;

        /* ── split into papers / books groups ── */
        const paperPubs = pubs.filter(p => !p.isBook).sort((a, b) => a.dateFrac - b.dateFrac);
        const bookPubs = pubs.filter(p => p.isBook).sort((a, b) => a.dateFrac - b.dateFrac);

        const paperCount = paperPubs.length;
        const bookCount = bookPubs.length;
        const totalBars = paperCount + bookCount;
        const innerHeight = totalBars * (barHeight + barGap) + groupGap + 10;
        const totalHeight = margin.top + innerHeight + margin.bottom;
        const totalWidth = ptContainer.clientWidth || 700;

        const ptSvg = d3.select(ptSvgEl)
          .attr('width', totalWidth)
          .attr('height', totalHeight);

        /* ── X scale ── */
        let xScale = d3.scaleLinear()
          .domain([xMin, xMax])
          .range([margin.left, totalWidth - margin.right]);

        function getBarWidthPx() {
          return Math.max(xScale(xMin + barWidth) - xScale(xMin), 20);
        }

        /* ── grid lines ── */
        const gridG = ptSvg.append('g').attr('class', 'tl-grid');
        function drawGrid() {
          gridG.selectAll('line').remove();
          for (let yr = xMin; yr <= xMax; yr++) {
            gridG.append('line')
              .attr('x1', xScale(yr))
              .attr('x2', xScale(yr))
              .attr('y1', margin.top)
              .attr('y2', totalHeight - margin.bottom);
          }
        }
        drawGrid();

        /* ── X axis ── */
        const axisG = ptSvg.append('g')
          .attr('class', 'tl-axis')
          .attr('transform', `translate(0,${totalHeight - margin.bottom})`);

        function drawAxis() {
          const ticks = [];
          for (let yr = xMin; yr <= xMax; yr++) ticks.push(yr);
          axisG.call(
            d3.axisBottom(xScale)
              .tickValues(ticks)
              .tickFormat(d => String(d))
              .tickSize(-innerHeight - 4)
          );
          axisG.select('.domain').remove();
          axisG.selectAll('.tick line').attr('stroke-opacity', 0);
        }
        drawAxis();

        /* ── "NOW" marker ── */
        const now = new Date();
        const nowFrac = now.getFullYear() + (now.getMonth() / 12);
        const nowG = ptSvg.append('g');

        function drawNow() {
          nowG.selectAll('*').remove();
          const nx = xScale(nowFrac);
          nowG.append('line')
            .attr('class', 'tl-today-line')
            .attr('x1', nx).attr('x2', nx)
            .attr('y1', margin.top - 8)
            .attr('y2', totalHeight - margin.bottom);
          nowG.append('text')
            .attr('x', nx)
            .attr('y', margin.top - 14)
            .attr('text-anchor', 'middle')
            .attr('fill', 'var(--accent)')
            .attr('font-size', '9px')
            .attr('letter-spacing', '0.1em')
            .text('NOW');
        }
        drawNow();

        /* ── group labels ── */
        function getPaperLabel() {
          return getLang() === 'ja' ? '論文' : 'Papers';
        }
        function getBookLabel() {
          return getLang() === 'ja' ? '著書・翻訳' : 'Books';
        }

        const dividerY = margin.top + paperCount * (barHeight + barGap) + groupGap / 2;
        const paperLabelY = margin.top + (barHeight + barGap) * paperCount / 2;
        const bookLabelY = margin.top + (barHeight + barGap) * paperCount + groupGap + (barHeight + barGap) * bookCount / 2;

        /* ── group divider line ── */
        const dividerG = ptSvg.append('g');
        function drawDivider() {
          dividerG.selectAll('*').remove();
          dividerG.append('line')
            .attr('class', 'tl-divider')
            .attr('x1', margin.left)
            .attr('x2', xScale(xMax))
            .attr('y1', dividerY)
            .attr('y2', dividerY);
        }
        drawDivider();

        const paperLabel = ptSvg.append('text')
          .attr('class', 'tl-group-label')
          .attr('x', 12)
          .attr('y', paperLabelY)
          .attr('dominant-baseline', 'central')
          .text(getPaperLabel());

        const bookLabel = ptSvg.append('text')
          .attr('class', 'tl-group-label')
          .attr('x', 12)
          .attr('y', bookLabelY)
          .attr('dominant-baseline', 'central')
          .text(getBookLabel());

        /* ── MutationObserver for language switch ── */
        const ptLangObs = new MutationObserver(() => {
          paperLabel.text(getPaperLabel());
          bookLabel.text(getBookLabel());
        });
        ptLangObs.observe(document.body, { attributes: true, attributeFilter: ['class'] });

        /* ── bar y positions ── */
        function barY(d) {
          if (!d.isBook) {
            const idx = paperPubs.indexOf(d);
            return margin.top + idx * (barHeight + barGap);
          } else {
            const idx = bookPubs.indexOf(d);
            return margin.top + paperCount * (barHeight + barGap) + groupGap + idx * (barHeight + barGap);
          }
        }

        /* ── all pubs sorted for animation ── */
        const allSorted = [...paperPubs, ...bookPubs];

        /* ── draw bars ── */
        const barsG = ptSvg.append('g');

        pubTlBars = barsG.selectAll('rect')
          .data(allSorted)
          .join('rect')
          .attr('class', 'tl-bar')
          .attr('x', d => xScale(d.dateFrac))
          .attr('y', d => barY(d))
          .attr('height', barHeight)
          .attr('width', 0)
          .attr('rx', 2)
          .attr('fill', d => TAG_COLORS[d.tags[0]] || '#888')
          .attr('fill-opacity', 0.65);

        /* ── number labels ── */
        pubTlBarLabels = barsG.selectAll('text.tl-bar-num')
          .data(allSorted)
          .join('text')
          .attr('class', 'tl-bar-num')
          .attr('x', d => xScale(d.dateFrac) + 8)
          .attr('y', d => barY(d) + barHeight / 2)
          .attr('dominant-baseline', 'central')
          .attr('opacity', 0)
          .text(d => '#' + d.num);

        /* ── entry animation via IntersectionObserver ── */
        let ptAnimated = false;
        const ptObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !ptAnimated) {
              ptAnimated = true;
              pubTlBars.transition()
                .delay((d, i) => i * 60)
                .duration(800)
                .ease(d3.easeCubicOut)
                .attr('width', getBarWidthPx());

              pubTlBarLabels.transition()
                .delay((d, i) => i * 60 + 500)
                .duration(400)
                .attr('opacity', 1);

              ptObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        ptObserver.observe(ptContainer);

        /* ── hover tooltip ── */
        let ptTipHideTimer = null;

        function hidePtTip() {
          ptTooltip.classList.remove('visible', 'tip-interactive');
        }
        function schedulePtHide(delay) {
          if (ptTipHideTimer) clearTimeout(ptTipHideTimer);
          ptTipHideTimer = setTimeout(() => { ptTipHideTimer = null; hidePtTip(); }, delay || 300);
        }

        ptTooltip.addEventListener('mouseenter', function() {
          if (ptTipHideTimer) { clearTimeout(ptTipHideTimer); ptTipHideTimer = null; }
        });
        ptTooltip.addEventListener('mouseleave', function() {
          schedulePtHide(200);
        });

        pubTlBars.on('mouseenter', function(event, d) {
          if (ptTipHideTimer) { clearTimeout(ptTipHideTimer); ptTipHideTimer = null; }
          ptTooltip.innerHTML = buildPubTip(d);
          if (d.isBook) {
            ptTooltip.classList.add('tip-interactive');
          } else {
            ptTooltip.classList.remove('tip-interactive');
          }
          ptTooltip.classList.add('visible');
        })
        .on('mousemove', function(event) {
          const rect = ptContainer.getBoundingClientRect();
          const tipW = ptTooltip.offsetWidth || 200;
          const tipH = ptTooltip.offsetHeight || 40;
          let x = event.clientX - rect.left + 16;
          let y = event.clientY - rect.top - tipH - 8;
          if (x + tipW > rect.width) x = event.clientX - rect.left - tipW - 8;
          if (y < 0) y = event.clientY - rect.top + 16;
          ptTooltip.style.left = x + 'px';
          ptTooltip.style.top = y + 'px';
        })
        .on('mouseleave', function(event, d) {
          if (d.isBook) {
            schedulePtHide(300);
          } else {
            hidePtTip();
          }
        });

        /* ── click → highlight network node ── */
        pubTlBars.on('click', function(event, d) {
          event.stopPropagation();
          if (d.link) {
            window.open(d.link, '_blank', 'noopener,noreferrer');
          }
        });

        /* ── responsive resize ── */
        window.addEventListener('resize', () => {
          const newW = ptContainer.clientWidth || 700;
          ptSvg.attr('width', newW);
          xScale.range([margin.left, newW - margin.right]);

          const bw = getBarWidthPx();
          pubTlBars
            .attr('x', d => xScale(d.dateFrac))
            .attr('width', ptAnimated ? bw : 0);

          pubTlBarLabels
            .attr('x', d => xScale(d.dateFrac) + 8);

          drawGrid();
          drawAxis();
          drawNow();
          drawDivider();
        }, { passive: true });

        /* ── observe for scroll reveal ── */
        if (ptWrap) revealObserver.observe(ptWrap);

      })();

    })();

    /* ── HERO AMBIENT GLOW ── */
    (function() {
      const hero = document.querySelector('.hero');
      const glow = document.querySelector('.hero-glow');
      if (!hero || !glow) return;
      let tx = 50, ty = 50, cx = 50, cy = 50;
      hero.addEventListener('mousemove', e => {
        const r = hero.getBoundingClientRect();
        tx = ((e.clientX - r.left) / r.width)  * 100;
        ty = ((e.clientY - r.top)  / r.height) * 100;
      });
      (function glowTick() {
        cx += (tx - cx) * 0.05;
        cy += (ty - cy) * 0.05;
        glow.style.background =
          `radial-gradient(700px circle at ${cx}% ${cy}%, rgba(200,169,110,0.055), transparent 60%)`;
        requestAnimationFrame(glowTick);
      })();
    })();

    /* ── 3-D CARD TILT ── */
    (function() {
      const TILT_SELECTORS = ['.mvv-card', '.mvv-block', '.strengths-card', '.str-block', '.ro-pillar', '.contact-block'];
      const BASE_T = 'background 0.4s ease, opacity 0.4s ease';
      TILT_SELECTORS.forEach(sel => {
        document.querySelectorAll(sel).forEach(card => {
          card.addEventListener('mousemove', e => {
            const r = card.getBoundingClientRect();
            const x = (e.clientX - r.left) / r.width  - 0.5;
            const y = (e.clientY - r.top)  / r.height - 0.5;
            card.style.transition = `${BASE_T}, transform 0.08s ease`;
            card.style.transform  =
              `perspective(900px) rotateY(${x * 7}deg) rotateX(${-y * 5}deg) scale3d(1.012,1.012,1.012)`;
          });
          card.addEventListener('mouseleave', () => {
            card.style.transition = `${BASE_T}, transform 0.7s cubic-bezier(0.16,1,0.3,1)`;
            card.style.transform  = '';
          });
        });
      });
    })();
  </script>
</body>
</html>
